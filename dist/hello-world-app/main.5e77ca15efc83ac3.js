"use strict";(self.webpackChunkhello_world_app=self.webpackChunkhello_world_app||[]).push([[179],{2011:(pt,Re,P)=>{P.d(Re,{Dh:()=>ge,GT:()=>fe,cc:()=>Ce,hO:()=>Oe,on:()=>$,pX:()=>de,xv:()=>he});var p=P(4650),X=P(127),L=P(880);pt=P.hmd(pt);const re=["ngOnDestroy"],de=(le,lt,rt,Ne={})=>new Proxy(le,{get:(we,De)=>rt.runOutsideAngular(()=>{var Ge;if(le[De])return!(null===(Ge=Ne?.spy)||void 0===Ge)&&Ge.get&&Ne.spy.get(De,le[De]),le[De];if(re.indexOf(De)>-1)return()=>{};const Ve=lt.toPromise().then(j=>{const ve=j&&j[De];return"function"==typeof ve?ve.bind(j):ve&&ve.then?ve.then(Q=>rt.run(()=>Q)):rt.run(()=>ve)});return new Proxy(()=>{},{get:(j,ve)=>Ve[ve],apply:(j,ve,Q)=>Ve.then(ee=>{var se;const ne=ee&&ee(...Q);return!(null===(se=Ne?.spy)||void 0===se)&&se.apply&&Ne.spy.apply(De,Q,ne),ne})})})}),fe=(le,lt)=>{lt.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ne=>{Object.defineProperty(le.prototype,Ne,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ne))})})};class oe{constructor(lt){return lt}}const ge=new p.OlP("angularfire2.app.options"),he=new p.OlP("angularfire2.app.name");function $(le,lt,rt){const we="object"==typeof rt&&rt||{};we.name=we.name||"string"==typeof rt&&rt||"[DEFAULT]";const Ge=X.Z.apps.filter(Ve=>Ve&&Ve.name===we.name)[0]||lt.runOutsideAngular(()=>X.Z.initializeApp(le,we));try{JSON.stringify(le)!==JSON.stringify(Ge.options)&&z("error",`${Ge.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(Ge)}const z=(le,...lt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[le](...lt)},J={provide:oe,useFactory:$,deps:[ge,p.R0b,[new p.FiY,he]]};let Oe=(()=>{class le{constructor(rt){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",p.q4F.full,rt.toString())}static initializeApp(rt,Ne){return{ngModule:le,providers:[{provide:ge,useValue:rt},{provide:he,useValue:Ne}]}}}return le.\u0275fac=function(rt){return new(rt||le)(p.LFG(p.Lbi))},le.\u0275mod=p.oAB({type:le}),le.\u0275inj=p.cJS({providers:[J]}),le})();function Ce(le,lt,rt,Ne,we){const[,De,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===le)||[];if(De)return function be(le,lt){try{return le.toString()===lt.toString()}catch{return le===lt}}(we,Ge)||(ye("error",`${lt} was already initialized on the ${rt} Firebase App with different settings.${Ze?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:we,was:Ge})),De;{const Ve=Ne();return globalThis.\u0275AngularfireInstanceCache.push([le,Ve,we]),Ve}}const Ze=!!pt.hot,ye=(le,...lt)=>{(0,p.X6Q)()&&typeof console<"u"&&console[le](...lt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(pt,Re,P)=>{P.d(Re,{q4:()=>Ju,iC:()=>el,HU:()=>_c,vb:()=>qa,JM:()=>Hn});var p=P(4650),X=P(5867),L=P(5861),re=P(9681),de=P(2090),fe=P(4859),oe=P(1877);P(2833);const he="@firebase/remote-config",$="0.3.15",Ce=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ft{constructor(O,K,ae,Pe){this.client=O,this.storage=K,this.storageCache=ae,this.logger=Pe}isCachedDataFresh(O,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ae=Date.now()-K,Pe=ae<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${Pe}.`),Pe}fetch(O){var K=this;return(0,L.Z)(function*(){const[ae,Pe]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Pe&&K.isCachedDataFresh(O.cacheMaxAgeMillis,ae))return Pe;O.eTag=Pe&&Pe.eTag;const qe=yield K.client.fetch(O),ct=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===qe.status&&ct.push(K.storage.setLastSuccessfulFetchResponse(qe)),yield Promise.all(ct),qe})()}}function Yt(R=navigator){return R.languages&&R.languages[0]||R.language}class Rt{constructor(O,K,ae,Pe,qe,ct){this.firebaseInstallations=O,this.sdkVersion=K,this.namespace=ae,this.projectId=Pe,this.apiKey=qe,this.appId=ct}fetch(O){var K=this;return(0,L.Z)(function*(){var ae,Pe,qe;const[ct,Jt]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,_t={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Pt={sdk_version:K.sdkVersion,app_instance_id:ct,app_instance_id_token:Jt,app_id:K.appId,language_code:Yt()},rs={method:"POST",headers:_t,body:JSON.stringify(Pt)},On=fetch(Te,rs),la=new Promise((zs,qs)=>{O.signal.addEventListener(()=>{const Ks=new Error("The operation was aborted.");Ks.name="AbortError",qs(Ks)})});let Hi;try{yield Promise.race([On,la]),Hi=yield On}catch(zs){let qs="fetch-client-network";throw"AbortError"===(null===(ae=zs)||void 0===ae?void 0:ae.name)&&(qs="fetch-timeout"),Ce.create(qs,{originalErrorMessage:null===(Pe=zs)||void 0===Pe?void 0:Pe.message})}let Fr=Hi.status;const Za=Hi.headers.get("ETag")||void 0;let ca,Ws;if(200===Hi.status){let zs;try{zs=yield Hi.json()}catch(qs){throw Ce.create("fetch-client-parse",{originalErrorMessage:null===(qe=qs)||void 0===qe?void 0:qe.message})}ca=zs.entries,Ws=zs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ws?Fr=500:"NO_CHANGE"===Ws?Fr=304:("NO_TEMPLATE"===Ws||"EMPTY_CONFIG"===Ws)&&(ca={}),304!==Fr&&200!==Fr)throw Ce.create("fetch-status",{httpStatus:Fr});return{status:Fr,eTag:Za,config:ca}})()}}class Rn{constructor(O,K){this.client=O,this.storage=K}fetch(O){var K=this;return(0,L.Z)(function*(){const ae=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(O,ae)})()}attemptFetch(O,{throttleEndTimeMillis:K,backoffCount:ae}){var Pe=this;return(0,L.Z)(function*(){yield function ze(R,O){return new Promise((K,ae)=>{const Pe=Math.max(O-Date.now(),0),qe=setTimeout(K,Pe);R.addEventListener(()=>{clearTimeout(qe),ae(Ce.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,K);try{const qe=yield Pe.client.fetch(O);return yield Pe.storage.deleteThrottleMetadata(),qe}catch(qe){if(!function un(R){if(!(R instanceof de.ZR&&R.customData))return!1;const O=Number(R.customData.httpStatus);return 429===O||500===O||503===O||504===O}(qe))throw qe;const ct={throttleEndTimeMillis:Date.now()+(0,de.$s)(ae),backoffCount:ae+1};return yield Pe.storage.setThrottleMetadata(ct),Pe.attemptFetch(O,ct)}})()}}class qn{constructor(O,K,ae,Pe,qe){this.app=O,this._client=K,this._storageCache=ae,this._storage=Pe,this._logger=qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Et(R,O){var K;const ae=R.target.error||void 0;return Ce.create(O,{originalErrorMessage:ae&&(null===(K=ae)||void 0===K?void 0:K.message)})}const jt="app_namespace_store";class bn{constructor(O,K,ae,Pe=function gr(){return new Promise((R,O)=>{var K;try{const ae=indexedDB.open("firebase_remote_config",1);ae.onerror=Pe=>{O(Et(Pe,"storage-open"))},ae.onsuccess=Pe=>{R(Pe.target.result)},ae.onupgradeneeded=Pe=>{0===Pe.oldVersion&&Pe.target.result.createObjectStore(jt,{keyPath:"compositeKey"})}}catch(ae){O(Ce.create("storage-open",{originalErrorMessage:null===(K=ae)||void 0===K?void 0:K.message}))}})}()){this.appId=O,this.appName=K,this.namespace=ae,this.openDbPromise=Pe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var K=this;return(0,L.Z)(function*(){const ae=yield K.openDbPromise;return new Promise((Pe,qe)=>{var ct;const Zn=ae.transaction([jt],"readonly").objectStore(jt),Te=K.createCompositeKey(O);try{const _t=Zn.get(Te);_t.onerror=Pt=>{qe(Et(Pt,"storage-get"))},_t.onsuccess=Pt=>{const rs=Pt.target.result;Pe(rs?rs.value:void 0)}}catch(_t){qe(Ce.create("storage-get",{originalErrorMessage:null===(ct=_t)||void 0===ct?void 0:ct.message}))}})})()}set(O,K){var ae=this;return(0,L.Z)(function*(){const Pe=yield ae.openDbPromise;return new Promise((qe,ct)=>{var Jt;const Te=Pe.transaction([jt],"readwrite").objectStore(jt),_t=ae.createCompositeKey(O);try{const Pt=Te.put({compositeKey:_t,value:K});Pt.onerror=rs=>{ct(Et(rs,"storage-set"))},Pt.onsuccess=()=>{qe()}}catch(Pt){ct(Ce.create("storage-set",{originalErrorMessage:null===(Jt=Pt)||void 0===Jt?void 0:Jt.message}))}})})()}delete(O){var K=this;return(0,L.Z)(function*(){const ae=yield K.openDbPromise;return new Promise((Pe,qe)=>{var ct;const Zn=ae.transaction([jt],"readwrite").objectStore(jt),Te=K.createCompositeKey(O);try{const _t=Zn.delete(Te);_t.onerror=Pt=>{qe(Et(Pt,"storage-delete"))},_t.onsuccess=()=>{Pe()}}catch(_t){qe(Ce.create("storage-delete",{originalErrorMessage:null===(ct=_t)||void 0===ct?void 0:ct.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Gr{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,L.Z)(function*(){const K=O.storage.getLastFetchStatus(),ae=O.storage.getLastSuccessfulFetchTimestampMillis(),Pe=O.storage.getActiveConfig(),qe=yield K;qe&&(O.lastFetchStatus=qe);const ct=yield ae;ct&&(O.lastSuccessfulFetchTimestampMillis=ct);const Jt=yield Pe;Jt&&(O.activeConfig=Jt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function Di(){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,L.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function Jn(){(0,re._registerComponent)(new fe.wA("remote-config",function R(O,{instanceIdentifier:K}){const ae=O.getProvider("app").getImmediate(),Pe=O.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ce.create("registration-window");if(!(0,de.hl)())throw Ce.create("indexed-db-unavailable");const{projectId:qe,apiKey:ct,appId:Jt}=ae.options;if(!qe)throw Ce.create("registration-project-id");if(!ct)throw Ce.create("registration-api-key");if(!Jt)throw Ce.create("registration-app-id");const Zn=new bn(Jt,ae.name,K=K||"firebase"),Te=new Gr(Zn),_t=new oe.Yd(he);_t.logLevel=oe.in.ERROR;const Pt=new Rt(Pe,re.SDK_VERSION,K,qe,ct,Jt),rs=new Rn(Pt,Zn),On=new ft(rs,Zn,Te,_t),la=new qn(ae,On,Te,Zn,_t);return function Ge(R){const O=(0,de.m9)(R);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(la),la},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(he,$),(0,re.registerVersion)(he,$,"esm2017")}();var In=P(8766);const li="/firebase-messaging-sw.js",An="/firebase-cloud-messaging-push-scope",Or="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Dn="google.c.a.c_id",Pn="google.c.a.c_l",on="google.c.a.ts",mt="google.c.a.e";var Nt=(()=>{return(R=Nt||(Nt={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",Nt;var R})();function hn(R){const O=new Uint8Array(R);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Un(R){const K=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ae=atob(K),Pe=new Uint8Array(ae.length);for(let qe=0;qe<ae.length;++qe)Pe[qe]=ae.charCodeAt(qe);return Pe}const or="fcm_token_details_db",Wr="fcm_token_object_Store";function Kt(R){return mr.apply(this,arguments)}function mr(){return mr=(0,L.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(qe=>qe.name).includes(or))return null;let O=null;return(yield(0,In.X3)(or,5,{upgrade:(ae=(0,L.Z)(function*(Pe,qe,ct,Jt){var Zn;if(qe<2||!Pe.objectStoreNames.contains(Wr))return;const Te=Jt.objectStore(Wr),_t=yield Te.index("fcmSenderId").get(R);if(yield Te.clear(),_t)if(2===qe){const Pt=_t;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;O={token:Pt.fcmToken,createTime:null!==(Zn=Pt.createTime)&&void 0!==Zn?Zn:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:hn(Pt.vapidKey)}}}else if(3===qe){const Pt=_t;O={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:hn(Pt.auth),p256dh:hn(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:hn(Pt.vapidKey)}}}else if(4===qe){const Pt=_t;O={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:hn(Pt.auth),p256dh:hn(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:hn(Pt.vapidKey)}}}}),function(qe,ct,Jt,Zn){return ae.apply(this,arguments)})})).close(),yield(0,In.Lj)(or),yield(0,In.Lj)("fcm_vapid_details_db"),yield(0,In.Lj)("undefined"),Qt(O)?O:null;var ae}),mr.apply(this,arguments)}function Qt(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:O}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const Je="firebase-messaging-store";let Ae=null;function tt(){return Ae||(Ae=(0,In.X3)("firebase-messaging-database",1,{upgrade:(R,O)=>{0===O&&R.createObjectStore(Je)}})),Ae}function bt(R){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,L.Z)(function*(R){const O=G(R),ae=yield(yield tt()).transaction(Je).objectStore(Je).get(O);if(ae)return ae;{const Pe=yield Kt(R.appConfig.senderId);if(Pe)return yield Ot(R,Pe),Pe}})).apply(this,arguments)}function Ot(R,O){return H.apply(this,arguments)}function H(){return(H=(0,L.Z)(function*(R,O){const K=G(R),Pe=(yield tt()).transaction(Je,"readwrite");return yield Pe.objectStore(Je).put(O,K),yield Pe.done,O})).apply(this,arguments)}function B(R){return N.apply(this,arguments)}function N(){return(N=(0,L.Z)(function*(R){const O=G(R),ae=(yield tt()).transaction(Je,"readwrite");yield ae.objectStore(Je).delete(O),yield ae.done})).apply(this,arguments)}function G({appConfig:R}){return R.appId}const ie=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ie(R,O){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,L.Z)(function*(R,O){var K;const ae=yield yn(R),Pe=cn(O),qe={method:"POST",headers:ae,body:JSON.stringify(Pe)};let ct;try{ct=yield(yield fetch(yt(R.appConfig),qe)).json()}catch(Jt){throw ie.create("token-subscribe-failed",{errorInfo:null===(K=Jt)||void 0===K?void 0:K.toString()})}if(ct.error)throw ie.create("token-subscribe-failed",{errorInfo:ct.error.message});if(!ct.token)throw ie.create("token-subscribe-no-token");return ct.token})).apply(this,arguments)}function ot(R,O){return ht.apply(this,arguments)}function ht(){return(ht=(0,L.Z)(function*(R,O){var K;const ae=yield yn(R),Pe=cn(O.subscriptionOptions),qe={method:"PATCH",headers:ae,body:JSON.stringify(Pe)};let ct;try{ct=yield(yield fetch(`${yt(R.appConfig)}/${O.token}`,qe)).json()}catch(Jt){throw ie.create("token-update-failed",{errorInfo:null===(K=Jt)||void 0===K?void 0:K.toString()})}if(ct.error)throw ie.create("token-update-failed",{errorInfo:ct.error.message});if(!ct.token)throw ie.create("token-update-no-token");return ct.token})).apply(this,arguments)}function xe(R,O){return Le.apply(this,arguments)}function Le(){return(Le=(0,L.Z)(function*(R,O){var K;const Pe={method:"DELETE",headers:yield yn(R)};try{const ct=yield(yield fetch(`${yt(R.appConfig)}/${O}`,Pe)).json();if(ct.error)throw ie.create("token-unsubscribe-failed",{errorInfo:ct.error.message})}catch(qe){throw ie.create("token-unsubscribe-failed",{errorInfo:null===(K=qe)||void 0===K?void 0:K.toString()})}})).apply(this,arguments)}function yt({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function yn(R){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,L.Z)(function*({appConfig:R,installations:O}){const K=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function cn({p256dh:R,auth:O,endpoint:K,vapidKey:ae}){const Pe={web:{endpoint:K,auth:O,p256dh:R}};return ae!==Or&&(Pe.web.applicationPubKey=ae),Pe}const Ti=6048e5;function Tn(R){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,L.Z)(function*(R){const O=yield Ht(R.swRegistration,R.vapidKey),K={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:O.endpoint,auth:hn(O.getKey("auth")),p256dh:hn(O.getKey("p256dh"))},ae=yield bt(R.firebaseDependencies);if(ae){if(jn(ae.subscriptionOptions,K))return Date.now()>=ae.createTime+Ti?Y(R,{token:ae.token,createTime:Date.now(),subscriptionOptions:K}):ae.token;try{yield xe(R.firebaseDependencies,ae.token)}catch(Pe){console.warn(Pe)}return Be(R.firebaseDependencies,K)}return Be(R.firebaseDependencies,K)})).apply(this,arguments)}function es(R){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,L.Z)(function*(R){const O=yield bt(R.firebaseDependencies);O&&(yield xe(R.firebaseDependencies,O.token),yield B(R.firebaseDependencies));const K=yield R.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function Y(R,O){return _e.apply(this,arguments)}function _e(){return(_e=(0,L.Z)(function*(R,O){try{const K=yield ot(R.firebaseDependencies,O),ae=Object.assign(Object.assign({},O),{token:K,createTime:Date.now()});return yield Ot(R.firebaseDependencies,ae),K}catch(K){throw yield es(R),K}})).apply(this,arguments)}function Be(R,O){return ut.apply(this,arguments)}function ut(){return(ut=(0,L.Z)(function*(R,O){const ae={token:yield Ie(R,O),createTime:Date.now(),subscriptionOptions:O};return yield Ot(R,ae),ae.token})).apply(this,arguments)}function Ht(R,O){return rn.apply(this,arguments)}function rn(){return(rn=(0,L.Z)(function*(R,O){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Un(O)})})).apply(this,arguments)}function jn(R,O){return O.vapidKey===R.vapidKey&&O.endpoint===R.endpoint&&O.auth===R.auth&&O.p256dh===R.p256dh}function fn(R){const O={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function zr(R,O){if(!O.notification)return;R.notification={};const K=O.notification.title;K&&(R.notification.title=K);const ae=O.notification.body;ae&&(R.notification.body=ae);const Pe=O.notification.image;Pe&&(R.notification.image=Pe);const qe=O.notification.icon;qe&&(R.notification.icon=qe)}(O,R),function yr(R,O){!O.data||(R.data=O.data)}(O,R),function _n(R,O){var K,ae,Pe,qe,ct;if(!(O.fcmOptions||null!==(K=O.notification)&&void 0!==K&&K.click_action))return;R.fcmOptions={};const Jt=null!==(Pe=null===(ae=O.fcmOptions)||void 0===ae?void 0:ae.link)&&void 0!==Pe?Pe:null===(qe=O.notification)||void 0===qe?void 0:qe.click_action;Jt&&(R.fcmOptions.link=Jt);const Zn=null===(ct=O.fcmOptions)||void 0===ct?void 0:ct.analytics_label;Zn&&(R.fcmOptions.analyticsLabel=Zn)}(O,R),O}function Ku(R){return"object"==typeof R&&!!R&&Dn in R}function Zu(R,O){const K=[];for(let ae=0;ae<R.length;ae++)K.push(R.charAt(ae)),ae<O.length&&K.push(O.charAt(ae));return K.join("")}function oa(R){return ie.create("missing-app-config-values",{valueName:R})}Zu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _s{constructor(O,K,ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Pe=function js(R){if(!R||!R.options)throw oa("App Configuration Object");if(!R.name)throw oa("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:K}=R;for(const ae of O)if(!K[ae])throw oa(ae);return{appName:R.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:Pe,installations:K,analyticsProvider:ae}}_delete(){return Promise.resolve()}}function ts(R){return Si.apply(this,arguments)}function Si(){return(Si=(0,L.Z)(function*(R){var O;try{R.swRegistration=yield navigator.serviceWorker.register(li,{scope:An}),R.swRegistration.update().catch(()=>{})}catch(K){throw ie.create("failed-service-worker-registration",{browserErrorMessage:null===(O=K)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function _r(R,O){return aa.apply(this,arguments)}function aa(){return(aa=(0,L.Z)(function*(R,O){if(!O&&!R.swRegistration&&(yield ts(R)),O||!R.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw ie.create("invalid-sw-registration");R.swRegistration=O}})).apply(this,arguments)}function Pr(R,O){return vr.apply(this,arguments)}function vr(){return(vr=(0,L.Z)(function*(R,O){O?R.vapidKey=O:R.vapidKey||(R.vapidKey=Or)})).apply(this,arguments)}function vs(){return(vs=(0,L.Z)(function*(R,O){if(!navigator)throw ie.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ie.create("permission-blocked");return yield Pr(R,O?.vapidKey),yield _r(R,O?.serviceWorkerRegistration),Tn(R)})).apply(this,arguments)}function Ba(R,O,K){return qr.apply(this,arguments)}function qr(){return(qr=(0,L.Z)(function*(R,O,K){const ae=cc(O);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(ae,{message_id:K[Dn],message_name:K[Pn],message_time:K[on],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cc(R){switch(R){case Nt.NOTIFICATION_CLICKED:return"notification_open";case Nt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Yu(){return(Yu=(0,L.Z)(function*(R,O){const K=O.data;if(!K.isFirebaseMessaging)return;R.onMessageHandler&&K.messageType===Nt.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(fn(K)):R.onMessageHandler.next(fn(K)));const ae=K.data;Ku(ae)&&"1"===ae[mt]&&(yield Ba(R,K.messageType,ae))})).apply(this,arguments)}const ja="@firebase/messaging",ar=R=>{const O=new _s(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function dc(R,O){return Yu.apply(this,arguments)}(O,K)),O},hc=R=>{const O=R.getProvider("messaging").getImmediate();return{getToken:ae=>function To(R,O){return vs.apply(this,arguments)}(O,ae)}};function Bi(){return fc.apply(this,arguments)}function fc(){return(fc=(0,L.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Fp(){(0,re._registerComponent)(new fe.wA("messaging",ar,"PUBLIC")),(0,re._registerComponent)(new fe.wA("messaging-internal",hc,"PRIVATE")),(0,re.registerVersion)(ja,"0.10.0"),(0,re.registerVersion)(ja,"0.10.0","esm2017")}();var ws=P(6148),Qu=P(4408),$a=P(7565);const ji=new class Fy extends $a.v{}(class Lp extends Qu.o{constructor(O,K){super(O,K),this.scheduler=O,this.work=K}schedule(O,K=0){return K>0?super.schedule(O,K):(this.delay=K,this.state=O,this.scheduler.flush(this),this)}execute(O,K){return K>0||this.closed?super.execute(O,K):this._execute(O,K)}requestAsyncId(O,K,ae=0){return null!=ae&&ae>0||null==ae&&this.delay>0?super.requestAsyncId(O,K,ae):O.flush(this)}});var Is=P(4986),Hs=P(8505),Ga=P(9468),Wa=P(5363);const Ju=new p.GfV("7.5.0"),Xu="__angularfire_symbol__analyticsIsSupportedValue",Cs="__angularfire_symbol__analyticsIsSupported",So="__angularfire_symbol__remoteConfigIsSupportedValue",Ao="__angularfire_symbol__remoteConfigIsSupported",kr="__angularfire_symbol__messagingIsSupportedValue",xo="__angularfire_symbol__messagingIsSupported";function Hn(R,O,K){if(O){if(1===O.length)return O[0];const qe=O.filter(ct=>ct.app===K);if(1===qe.length)return qe[0]}return K.container.getProvider(R).getImmediate({optional:!0})}globalThis[Cs]||(globalThis[Cs]=(0,ws.Gb)().then(R=>globalThis[Xu]=R).catch(()=>globalThis[Xu]=!1)),globalThis[xo]||(globalThis[xo]=Bi().then(R=>globalThis[kr]=R).catch(()=>globalThis[kr]=!1)),globalThis[Ao]||(globalThis[Ao]=Di().then(R=>globalThis[So]=R).catch(()=>globalThis[So]=!1));const qa=(R,O)=>{const K=O?[O]:(0,X.C6)(),ae=[];return K.forEach(Pe=>{Pe.container.getProvider(R).instances.forEach(ct=>{ae.includes(ct)||ae.push(ct)})}),ae};function Mo(){}class $s{constructor(O,K=ji){this.zone=O,this.delegate=K}now(){return this.delegate.now()}schedule(O,K,ae){const Pe=this.zone;return this.delegate.schedule(function(ct){Pe.runGuarded(()=>{O.apply(this,[ct])})},K,ae)}}class ci{constructor(O){this.zone=O,this.task=null}call(O,K){const ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mo,{},Mo,Mo)),K.pipe((0,Hs.b)({next:ae,complete:ae,error:ae})).subscribe(O).add(ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _c=(()=>{class R{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new $s(Zone.current)),this.insideAngular=K.run(()=>new $s(Zone.current,Is.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(K){return new(K||R)(p.LFG(p.R0b))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function di(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function el(R){return di(),function ns(R){return function(K){return(K=K.lift(new ci(R.ngZone))).pipe((0,Ga.R)(R.outsideAngular),(0,Wa.Q)(R.insideAngular))}}(di())(R)}},2090:(pt,Re,P)=>{P.d(Re,{$s:()=>tt,BH:()=>Rt,DV:()=>Nr,Dv:()=>hn,G6:()=>De,GJ:()=>Gr,L:()=>ge,LL:()=>ln,Pz:()=>Yt,Sg:()=>ze,UG:()=>be,UI:()=>Di,US:()=>fe,Wj:()=>Tt,Wl:()=>jt,Yr:()=>we,ZB:()=>z,ZR:()=>Rn,aH:()=>ft,b$:()=>le,cI:()=>Et,dS:()=>Kt,eu:()=>Ve,g5:()=>L,gK:()=>Un,gQ:()=>Dn,h$:()=>oe,hl:()=>Ge,hu:()=>X,jU:()=>Ze,lb:()=>Wr,m9:()=>Ot,ne:()=>Pn,p$:()=>$,pd:()=>Kn,r3:()=>Jn,ru:()=>ye,tV:()=>he,uI:()=>Ce,ug:()=>mr,vZ:()=>Ye,w1:()=>rt,w9:()=>bn,xO:()=>An,xb:()=>Xn,z$:()=>Oe,zI:()=>j,zd:()=>Or});const X=function(H,B){if(!H)throw L(B)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},re=function(H){const B=[];let N=0;for(let G=0;G<H.length;G++){let U=H.charCodeAt(G);U<128?B[N++]=U:U<2048?(B[N++]=U>>6|192,B[N++]=63&U|128):55296==(64512&U)&&G+1<H.length&&56320==(64512&H.charCodeAt(G+1))?(U=65536+((1023&U)<<10)+(1023&H.charCodeAt(++G)),B[N++]=U>>18|240,B[N++]=U>>12&63|128,B[N++]=U>>6&63|128,B[N++]=63&U|128):(B[N++]=U>>12|224,B[N++]=U>>6&63|128,B[N++]=63&U|128)}return B},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,G=[];for(let U=0;U<H.length;U+=3){const ie=H[U],Ie=U+1<H.length,Ke=Ie?H[U+1]:0,ot=U+2<H.length,ht=ot?H[U+2]:0;let yt=(15&Ke)<<2|ht>>6,yn=63&ht;ot||(yn=64,Ie||(yt=64)),G.push(N[ie>>2],N[(3&ie)<<4|Ke>>4],N[yt],N[yn])}return G.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(re(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let N=0,G=0;for(;N<H.length;){const U=H[N++];if(U<128)B[G++]=String.fromCharCode(U);else if(U>191&&U<224){const ie=H[N++];B[G++]=String.fromCharCode((31&U)<<6|63&ie)}else if(U>239&&U<365){const ot=((7&U)<<18|(63&H[N++])<<12|(63&H[N++])<<6|63&H[N++])-65536;B[G++]=String.fromCharCode(55296+(ot>>10)),B[G++]=String.fromCharCode(56320+(1023&ot))}else{const ie=H[N++],Ie=H[N++];B[G++]=String.fromCharCode((15&U)<<12|(63&ie)<<6|63&Ie)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const N=B?this.charToByteMapWebSafe_:this.charToByteMap_,G=[];for(let U=0;U<H.length;){const ie=N[H.charAt(U++)],Ke=U<H.length?N[H.charAt(U)]:0;++U;const ht=U<H.length?N[H.charAt(U)]:64;++U;const Le=U<H.length?N[H.charAt(U)]:64;if(++U,null==ie||null==Ke||null==ht||null==Le)throw Error();G.push(ie<<2|Ke>>4),64!==ht&&(G.push(Ke<<4&240|ht>>2),64!==Le&&G.push(ht<<6&192|Le))}return G},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},oe=function(H){const B=re(H);return fe.encodeByteArray(B,!0)},ge=function(H){return oe(H).replace(/\./g,"")},he=function(H){try{return fe.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function $(H){return z(void 0,H)}function z(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const N in B)!B.hasOwnProperty(N)||!J(N)||(H[N]=z(H[N],B[N]));return H}function J(H){return"__proto__"!==H}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ze(){return"object"==typeof self&&self.self===self}function ye(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function le(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){const H=Oe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function we(){return!1}function De(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ge(){return"object"==typeof indexedDB}function Ve(){return new Promise((H,B)=>{try{let N=!0;const G="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(G);U.onsuccess=()=>{U.result.close(),N||self.indexedDB.deleteDatabase(G),H(!0)},U.onupgradeneeded=()=>{N=!1},U.onerror=()=>{var ie;B((null===(ie=U.error)||void 0===ie?void 0:ie.message)||"")}}catch(N){B(N)}})}function j(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function ve(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&he(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},ft=()=>{var H;return null===(H=ne())||void 0===H?void 0:H.config},Yt=H=>{var B;return null===(B=ne())||void 0===B?void 0:B[`_${H}`]};class Rt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,N)=>{this.resolve=B,this.reject=N})}wrapCallback(B){return(N,G)=>{N?this.reject(N):this.resolve(G),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(N):B(N,G))}}}function ze(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const G=B||"demo-project",U=H.iat||0,ie=H.sub||H.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${G}`,aud:G,iat:U,exp:U+3600,auth_time:U,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ie)),""].join(".")}class Rn extends Error{constructor(B,N,G){super(N),this.code=B,this.customData=G,this.name="FirebaseError",Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}}class ln{constructor(B,N,G){this.service=B,this.serviceName=N,this.errors=G}create(B,...N){const G=N[0]||{},U=`${this.service}/${B}`,ie=this.errors[B],Ie=ie?function nn(H,B){return H.replace(qn,(N,G)=>{const U=B[G];return null!=U?String(U):`<${G}?>`})}(ie,G):"Error";return new Rn(U,`${this.serviceName}: ${Ie} (${U}).`,G)}}const qn=/\{\$([^}]+)}/g;function Et(H){return JSON.parse(H)}function jt(H){return JSON.stringify(H)}const $r=function(H){let B={},N={},G={},U="";try{const ie=H.split(".");B=Et(he(ie[0])||""),N=Et(he(ie[1])||""),U=ie[2],G=N.d||{},delete N.d}catch{}return{header:B,claims:N,data:G,signature:U}},bn=function(H){const N=$r(H).claims;return!!N&&"object"==typeof N&&N.hasOwnProperty("iat")},Gr=function(H){const B=$r(H).claims;return"object"==typeof B&&!0===B.admin};function Jn(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function Nr(H,B){if(Object.prototype.hasOwnProperty.call(H,B))return H[B]}function Xn(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function Di(H,B,N){const G={};for(const U in H)Object.prototype.hasOwnProperty.call(H,U)&&(G[U]=B.call(N,H[U],U,H));return G}function Ye(H,B){if(H===B)return!0;const N=Object.keys(H),G=Object.keys(B);for(const U of N){if(!G.includes(U))return!1;const ie=H[U],Ie=B[U];if(In(ie)&&In(Ie)){if(!Ye(ie,Ie))return!1}else if(ie!==Ie)return!1}for(const U of G)if(!N.includes(U))return!1;return!0}function In(H){return null!==H&&"object"==typeof H}function An(H){const B=[];for(const[N,G]of Object.entries(H))Array.isArray(G)?G.forEach(U=>{B.push(encodeURIComponent(N)+"="+encodeURIComponent(U))}):B.push(encodeURIComponent(N)+"="+encodeURIComponent(G));return B.length?"&"+B.join("&"):""}function Or(H){const B={};return H.replace(/^\?/,"").split("&").forEach(G=>{if(G){const[U,ie]=G.split("=");B[decodeURIComponent(U)]=decodeURIComponent(ie)}}),B}function Kn(H){const B=H.indexOf("?");if(!B)return"";const N=H.indexOf("#",B);return H.substring(B,N>0?N:void 0)}class Dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,N){N||(N=0);const G=this.W_;if("string"==typeof B)for(let Le=0;Le<16;Le++)G[Le]=B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3),N+=4;else for(let Le=0;Le<16;Le++)G[Le]=B[N]<<24|B[N+1]<<16|B[N+2]<<8|B[N+3],N+=4;for(let Le=16;Le<80;Le++){const yt=G[Le-3]^G[Le-8]^G[Le-14]^G[Le-16];G[Le]=4294967295&(yt<<1|yt>>>31)}let ht,xe,U=this.chain_[0],ie=this.chain_[1],Ie=this.chain_[2],Ke=this.chain_[3],ot=this.chain_[4];for(let Le=0;Le<80;Le++){Le<40?Le<20?(ht=Ke^ie&(Ie^Ke),xe=1518500249):(ht=ie^Ie^Ke,xe=1859775393):Le<60?(ht=ie&Ie|Ke&(ie|Ie),xe=2400959708):(ht=ie^Ie^Ke,xe=3395469782);const yt=(U<<5|U>>>27)+ht+ot+xe+G[Le]&4294967295;ot=Ke,Ke=Ie,Ie=4294967295&(ie<<30|ie>>>2),ie=U,U=yt}this.chain_[0]=this.chain_[0]+U&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+Ie&4294967295,this.chain_[3]=this.chain_[3]+Ke&4294967295,this.chain_[4]=this.chain_[4]+ot&4294967295}update(B,N){if(null==B)return;void 0===N&&(N=B.length);const G=N-this.blockSize;let U=0;const ie=this.buf_;let Ie=this.inbuf_;for(;U<N;){if(0===Ie)for(;U<=G;)this.compress_(B,U),U+=this.blockSize;if("string"==typeof B){for(;U<N;)if(ie[Ie]=B.charCodeAt(U),++Ie,++U,Ie===this.blockSize){this.compress_(ie),Ie=0;break}}else for(;U<N;)if(ie[Ie]=B[U],++Ie,++U,Ie===this.blockSize){this.compress_(ie),Ie=0;break}}this.inbuf_=Ie,this.total_+=N}digest(){const B=[];let N=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let U=this.blockSize-1;U>=56;U--)this.buf_[U]=255&N,N/=256;this.compress_(this.buf_);let G=0;for(let U=0;U<5;U++)for(let ie=24;ie>=0;ie-=8)B[G]=this.chain_[U]>>ie&255,++G;return B}}function Pn(H,B){const N=new on(H,B);return N.subscribe.bind(N)}class on{constructor(B,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{B(this)}).catch(G=>{this.error(G)})}next(B){this.forEachObserver(N=>{N.next(B)})}error(B){this.forEachObserver(N=>{N.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,N,G){let U;if(void 0===B&&void 0===N&&void 0===G)throw new Error("Missing Observer.");U=function at(H,B){if("object"!=typeof H||null===H)return!1;for(const N of B)if(N in H&&"function"==typeof H[N])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:N,complete:G},void 0===U.next&&(U.next=Nt),void 0===U.error&&(U.error=Nt),void 0===U.complete&&(U.complete=Nt);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),ie}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,B)}sendOne(B,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{N(this.observers[B])}catch(G){typeof console<"u"&&console.error&&console.error(G)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}const hn=function(H,B,N,G){let U;if(G<B?U="at least "+B:G>N&&(U=0===N?"none":"no more than "+N),U)throw new Error(H+" failed: Was called with "+G+(1===G?" argument.":" arguments.")+" Expects "+U+".")};function Un(H,B){return`${H} failed: ${B} argument `}function Tt(H,B,N,G){if((!G||N)&&"function"!=typeof N)throw new Error(Un(H,B)+"must be a valid function.")}function Wr(H,B,N,G){if((!G||N)&&("object"!=typeof N||null===N))throw new Error(Un(H,B)+"must be a valid context object.")}const Kt=function(H){const B=[];let N=0;for(let G=0;G<H.length;G++){let U=H.charCodeAt(G);if(U>=55296&&U<=56319){const ie=U-55296;G++,X(G<H.length,"Surrogate pair missing trail surrogate."),U=65536+(ie<<10)+(H.charCodeAt(G)-56320)}U<128?B[N++]=U:U<2048?(B[N++]=U>>6|192,B[N++]=63&U|128):U<65536?(B[N++]=U>>12|224,B[N++]=U>>6&63|128,B[N++]=63&U|128):(B[N++]=U>>18|240,B[N++]=U>>12&63|128,B[N++]=U>>6&63|128,B[N++]=63&U|128)}return B},mr=function(H){let B=0;for(let N=0;N<H.length;N++){const G=H.charCodeAt(N);G<128?B++:G<2048?B+=2:G>=55296&&G<=56319?(B+=4,N++):B+=3}return B};function tt(H,B=1e3,N=2){const G=B*Math.pow(N,H),U=Math.round(.5*G*(Math.random()-.5)*2);return Math.min(144e5,G+U)}function Ot(H){return H&&H._delegate?H._delegate:H}},7462:(pt,Re,P)=>{var p=P(4650);let X=null;function L(){return X}const oe=new p.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function he(){return(0,p.LFG)(z)}()},providedIn:"platform"}),n})();const $=new p.OlP("Location Initialized");let z=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Oe(){return new z((0,p.LFG)(oe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Ce(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(lt)},providedIn:"root"}),n})();const le=new p.OlP("appBaseHref");let lt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ce(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ze(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ze(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ge),p.LFG(le,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ce(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ze(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ze(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ge),p.LFG(le,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ze(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=Ce,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(p.LFG(ye))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function we(){return new Ne((0,p.LFG)(ye))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}function yr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class oa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _s=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new oa(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),ts(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ts(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ts(n,e){n.context.$implicit=e.item}let _r=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new aa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Pr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Pr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class aa{constructor(){this.$implicit=null,this.ngIf=null}}function Pr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let Cs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Kr(n){return"server"===n}let qa=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Mo((0,p.LFG)(oe),window)}),n})();class Mo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ci(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$s(this.window.history)||$s(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $s(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class di{}class rl extends class Hp extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){X||(X=n)}(new rl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Dh(){return Ya=Ya||document.querySelector("base"),Ya?Ya.getAttribute("href"):null}();return null==t?null:function Ai(n){Ir=Ir||document.createElement("a"),Ir.setAttribute("href",n);const e=Ir.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yr(document.cookie,e)}}let Ir,Ya=null;const kn=new p.OlP("TRANSITION_ID"),By=[{provide:p.ip1,useFactory:function $p(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[kn,oe,p.zs3],multi:!0}];let jy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const wc=new p.OlP("EventManagerPlugins");let Th=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(wc),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class il{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let sl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ha=(()=>{class n extends sl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Sh),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Sh))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Sh(n){L().remove(n)}const Ah={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wp=/%COMP%/g;function Ec(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ec(n,i,t):(i=i.replace(Wp,n),t.push(i))}return t}function zp(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ic=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Kp(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ec(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Th),p.LFG(ha),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Qa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ah[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ul(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ul(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ah[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ah[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zp(r)):this.eventManager.addEventListener(e,t,zp(r))}}function ul(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qp extends Qa{constructor(e,t,r,i){super(e),this.component=r;const a=Ec(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ol(n){return"_ngcontent-%COMP%".replace(Wp,n)}(i+"-"+r.id),this.hostAttr=function Mh(n){return"_nghost-%COMP%".replace(Wp,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Kp extends Qa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ec(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ll=(()=>{class n extends il{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const cl=["alt","control","meta","shift"],dl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ds={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let bc=(()=>{class n extends il{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),cl.forEach(w=>{const b=r.indexOf(w);b>-1&&(r.splice(b,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=l,y}static matchEventFullKeyCode(t,r){let i=dl[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),cl.forEach(l=>{l!==i&&(0,Ds[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Tc=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function Rh(){rl.makeCurrent()},multi:!0},{provide:oe,useFactory:function pl(){return(0,p.RDi)(document),document},deps:[]}]),Ja=new p.OlP(""),Yp=[{provide:p.rWj,useClass:class Gp{addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(y){l=l||y,a--,0==a&&r(l)};i.forEach(function(y){y.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],Xa=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function fl(){return new p.qLn},deps:[]},{provide:wc,useClass:ll,multi:!0,deps:[oe,p.R0b,p.Lbi]},{provide:wc,useClass:bc,multi:!0,deps:[oe]},{provide:Ic,useClass:Ic,deps:[Th,ha,p.AFp]},{provide:p.FYo,useExisting:Ic},{provide:sl,useExisting:ha},{provide:ha,useClass:ha,deps:[oe]},{provide:Th,useClass:Th,deps:[wc,p.R0b]},{provide:di,useClass:jy,deps:[]},[]];let Nh=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:kn,useExisting:p.AFp},By]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ja,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...Xa,...Yp],imports:[Cs,p.hGG]}),n})(),pa=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function eu(){return new pa((0,p.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Sn=P(8996),xi=P(7669);function vt(...n){const e=(0,xi.yG)(n);return(0,Sn.D)(n,e)}var is=P(7579);class $n extends is.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const wl=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Zr=P(9751);const{isArray:ko}=Array,{getPrototypeOf:Mc,prototype:Wy,keys:Vh}=Object;function El(n){if(1===n.length){const e=n[0];if(ko(e))return{args:e,keys:null};if(function ru(n){return n&&"object"==typeof n&&Mc(n)===Wy}(e)){const t=Vh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Qs=P(4671),it=P(4004);const{isArray:Uh}=Array;function Bh(n){return(0,it.U)(e=>function iu(n,e){return Uh(e)?n(...e):n(e)}(n,e))}function Rc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var wr=P(5403),zy=P(9672);function Nc(...n){const e=(0,xi.yG)(n),t=(0,xi.jO)(n),{args:r,keys:i}=El(n);if(0===r.length)return(0,Sn.D)([],e);const a=new Zr.y(function qy(n,e,t=Qs.y){return r=>{Oc(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let y=0;y<i;y++)Oc(e,()=>{const w=(0,Sn.D)(n[y],e);let b=!1;w.subscribe((0,wr.x)(r,D=>{a[y]=D,b||(b=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Rc(i,l):Qs.y));return t?a.pipe(Bh(t)):a}function Oc(n,e,t){n?(0,zy.f)(t,n,e):e()}var Il=P(8189);function Fo(...n){return function Cl(){return(0,Il.J)(1)}()((0,Sn.D)(n,(0,xi.yG)(n)))}var Pc=P(8421);function Ts(n){return new Zr.y(e=>{(0,Pc.Xf)(n()).subscribe(e)})}var jh=P(9635),su=P(576);function ma(n,e){const t=(0,su.m)(n)?n:()=>n,r=i=>i.error(t());return new Zr.y(e?i=>e.schedule(r,0,i):r)}var Js=P(515),kc=P(727),br=P(4482);function Xs(){return(0,br.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Lo extends Zr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,br.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kc.w0.EMPTY)}return e}refCount(){return Xs()(this)}}function lr(n,e){return(0,br.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,wr.x)(r,y=>{i?.unsubscribe();let w=0;const b=a++;(0,Pc.Xf)(n(y,b)).subscribe(i=(0,wr.x)(r,D=>r.next(e?e(y,D,b,w++):D),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Fn(n){return n<=0?()=>Js.E:(0,br.e)((e,t)=>{let r=0;e.subscribe((0,wr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bl(...n){const e=(0,xi.yG)(n);return(0,br.e)((t,r)=>{(e?Fo(n,t,e):Fo(n,t)).subscribe(r)})}function ei(n,e){return(0,br.e)((t,r)=>{let i=0;t.subscribe((0,wr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Lr=P(5577);function Vo(n){return(0,br.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Fc(n=Ky){return(0,br.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ky(){return new wl}function eo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ei((i,a)=>n(i,a,r)):Qs.y,Fn(1),t?Vo(e):Fc(()=>new wl))}function $i(n,e){return(0,su.m)(e)?(0,Lr.z)(n,e,1):(0,Lr.z)(n,1)}var cr=P(8505);function os(n){return(0,br.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,wr.x)(t,void 0,void 0,l=>{a=(0,Pc.Xf)(n(l,os(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Uo(n,e,t,r,i){return(a,l)=>{let h=t,y=e,w=0;a.subscribe((0,wr.x)(l,b=>{const D=w++;y=h?n(y,b,D):(h=!0,b),r&&l.next(y)},i&&(()=>{h&&l.next(y),l.complete()})))}}function to(n,e){return(0,br.e)(Uo(n,e,arguments.length>=2,!0))}function Dl(n){return n<=0?()=>Js.E:(0,br.e)((e,t)=>{let r=[];e.subscribe((0,wr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ei((i,a)=>n(i,a,r)):Qs.y,Dl(1),t?Vo(e):Fc(()=>new wl))}function Vc(n){return(0,br.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",Ss=Symbol("RouteTitle");class ou{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jo(n){return new ou(n)}function tE(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function As(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!$h(n[i],e[i]))return!1;return!0}function $h(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function tg(n){return Array.prototype.concat.apply([],n)}function ng(n){return n.length>0?n[n.length-1]:null}function dr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gi(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):vt(n)}const nE={exact:function ig(n,e,t){if(!ro(n.segments,e.segments)||!no(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ig(n.children[r],e.children[r],t))return!1;return!0},subset:ya},Wh={exact:function zh(n,e){return As(n,e)},subset:function sg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$h(n[t],e[t]))},ignored:()=>!0};function Yy(n,e,t){return nE[t.paths](n.root,e.root,t.matrixParams)&&Wh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ya(n,e,t){return Uc(n,e,e.segments,t)}function Uc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ro(i,t)||e.hasChildren()||!no(i,t,r))}if(n.segments.length===t.length){if(!ro(n.segments,t)||!no(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ya(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ro(n.segments,i)&&no(n.segments,i,r)&&n.children[qt])&&Uc(n.children[qt],e,a,r)}}function no(n,e,t){return e.every((r,i)=>Wh[t](n[i].parameters,r.parameters))}class _a{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return Hc.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,dr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $c(this)}}class Bc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=jo(this.parameters)),this._parameterMap}toString(){return ug(this)}}function ro(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new jc},providedIn:"root"}),n})();class jc{parse(e){const t=new wa(e);return new _a(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${va(e.root,!0)}`,r=function iE(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Sl(t)}=${Sl(i)}`).join("&"):`${Sl(t)}=${Sl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Qy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Hc=new jc;function $c(n){return n.segments.map(e=>ug(e)).join("/")}function va(n,e){if(!n.hasChildren())return $c(n);if(e){const t=n.children[qt]?va(n.children[qt],!1):"",r=[];return dr(n.children,(i,a)=>{a!==qt&&r.push(`${a}:${va(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function og(n,e){let t=[];return dr(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),dr(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[va(n.children[qt],!1)]:[`${i}:${va(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${$c(n)}/${t[0]}`:`${$c(n)}/(${t.join("//")})`}}function ag(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sl(n){return ag(n).replace(/%3B/gi,";")}function Wi(n){return ag(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ho(n){return decodeURIComponent(n)}function Kh(n){return Ho(n.replace(/\+/g,"%20"))}function ug(n){return`${Wi(n.path)}${function rE(n){return Object.keys(n).map(e=>`;${Wi(e)}=${Wi(n[e])}`).join("")}(n.parameters)}`}const sE=/^[^\/()?;=#]+/;function Zh(n){const e=n.match(sE);return e?e[0]:""}const lg=/^[^=?&#]+/,Jy=/^[^&#]+/;class wa{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new Xt(e,t)),r}parseSegment(){const e=Zh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,!1);return this.capture(e),new Bc(Ho(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Zh(this.remaining);i&&(r=i,this.capture(r))}e[Ho(t)]=Ho(r)}parseQueryParam(e){const t=function cg(n){const e=n.match(lg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function oE(n){const e=n.match(Jy);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Kh(t),a=Kh(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new p.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=qt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[qt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,!1)}}function au(n){return n.segments.length>0?new Xt([],{[qt]:n}):n}function Al(n){const e={};for(const r of Object.keys(n.children)){const a=Al(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function zi(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function as(n){return n instanceof _a}function aE(n,e,t,r,i){if(0===t.length)return $o(e.root,e.root,e.root,r,i);const a=function t_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new e_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return dr(a.outlets,(y,w)=>{h[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,y)=>{0==y&&"."===h||(0==y&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new e_(t,e,r)}(t);return a.toRoot()?$o(e.root,e.root,new Xt([],{}),r,i):function l(y){const w=function Yh(n,e,t,r){if(n.isAbsolute)return new Ea(e.root,!0,0);if(-1===r)return new Ea(t,t===e.root,0);return function pg(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new p.vHH(4005,!1);i=r.segments.length}return new Ea(r,!1,i-a)}(t,r+(Gc(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),b=w.processChildren?xs(w.segmentGroup,w.index,a.commands):lu(w.segmentGroup,w.index,a.commands);return $o(e.root,w.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function Gc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function io(n){return"object"==typeof n&&null!=n&&n.outlets}function $o(n,e,t,r,i){let l,a={};r&&dr(r,(y,w)=>{a[w]=Array.isArray(y)?y.map(b=>`${b}`):`${y}`}),l=n===e?t:Wc(n,e,t);const h=au(Al(l));return new _a(h,a,i)}function Wc(n,e,t){const r={};return dr(n.children,(i,a)=>{r[a]=i===e?t:Wc(i,e,t)}),new Xt(n.segments,r)}class e_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gc(r[0]))throw new p.vHH(4003,!1);const i=r.find(io);if(i&&i!==ng(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ea{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lu(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return xs(n,e,t);const r=function r_(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(io(h))break;const y=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!gg(y,w,l))return a;r+=2}else{if(!gg(y,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Xt(n.segments.slice(0,r.pathIndex),{});return a.children[qt]=new Xt(n.segments.slice(r.pathIndex),n.children),xs(a,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?xl(n,e,t):r.match?xs(n,0,i):xl(n,e,t)}function xs(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function n_(n){return io(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return dr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=lu(n.children[l],e,a))}),dr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Xt(n.segments,i)}}function xl(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(io(a)){const y=zc(a.outlets);return new Xt(r,y)}if(0===i&&Gc(t[0])){r.push(new Bc(n.segments[e].path,tr(t[0]))),i++;continue}const l=io(a)?a.outlets[qt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Gc(h)?(r.push(new Bc(l,tr(h))),i+=2):(r.push(new Bc(l,{})),i++)}return new Xt(r,{})}function zc(n){const e={};return dr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xl(new Xt([],{}),0,t))}),e}function tr(n){const e={};return dr(n,(t,r)=>e[r]=`${t}`),e}function gg(n,e,t){return n==t.path&&As(e,t.parameters)}class so{constructor(e,t){this.id=e,this.url=t}}class cu extends so{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Go extends so{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qc extends so{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mg extends so{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class i_ extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ml extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s_ extends so{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class o_ extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uE extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rl{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qh{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kc{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xh{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class du{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ti(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ti(e,this._root).map(t=>t.value)}}function vg(n,e){if(n===e.value)return e;for(const t of e.children){const r=vg(n,t);if(r)return r}return null}function ti(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ti(n,t);if(r.length)return r.unshift(e),r}return[]}class ni{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ef extends du{constructor(e,t){super(e),this.snapshot=t,ao(this,e)}toString(){return this.snapshot.toString()}}function Ms(n,e){const t=function tf(n,e){const l=new Mi([],{},{},"",{},qt,e,null,n.root,-1,{});return new fu("",new ni(l,[]))}(n,e),r=new $n([new Bc("",{})]),i=new $n({}),a=new $n({}),l=new $n({}),h=new $n(""),y=new oo(r,i,l,h,a,qt,e,t.root);return y.snapshot=t.root,new ef(new ni(y,[]),t)}class oo{constructor(e,t,r,i,a,l,h,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,it.U)(w=>w[Ss]))??vt(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>jo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>jo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function a_(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Mi{constructor(e,t,r,i,a,l,h,y,w,b,D,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.title=this.data?.[Ss],this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=b,this._correctedLastPathIndex=M??b,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=jo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=jo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fu extends du{constructor(e,t){super(t),this.url=e,ao(this,t)}toString(){return nf(this._root)}}function ao(n,e){e.value._routerState=n,e.children.forEach(t=>ao(n,t))}function nf(n){const e=n.children.length>0?` { ${n.children.map(nf).join(", ")} } `:"";return`${n.value}${e}`}function Nl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,As(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),As(e.params,t.params)||n.params.next(t.params),function eg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!As(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),As(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yc(n,e){const t=As(n.params,e.params)&&function Tl(n,e){return ro(n,e)&&n.every((t,r)=>As(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yc(n.parent,e.parent))}function zo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function qo(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return zo(n,r,i);return zo(n,r)})}(n,e,t);return new ni(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>zo(n,h)),l}}const r=function u_(n){return new oo(new $n(n.url),new $n(n.params),new $n(n.queryParams),new $n(n.fragment),new $n(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>zo(n,a));return new ni(r,i)}}const us="ngNavigationCancelingError";function pu(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=as(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function rf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[us]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ol(n){return wg(n)&&as(n.url)}function wg(n){return n&&n[us]}class Qc{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Pl,this.attachRef=null}}let Pl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qc,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kl=!1;let Fl=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=i||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,kl);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,kl);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,kl);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,kl);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,y=new l_(t,h,i.injector);if(r&&function _(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,y)}else this.activated=i.createComponent(l,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Pl),p.Y36(p.s_b),p.$8M("name"),p.Y36(p.sBO),p.Y36(p.lqb))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class l_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===oo?this.route:e===Pl?this.childContexts:this.parent.get(e,t)}}let f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[Fl],encapsulation:2}),n})();function m(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wt(n){const e=n.children&&n.children.map(wt),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=f),t}function gn(n){return n.outlet||qt}function qi(n,e){const t=n.filter(r=>gn(r)===e);return t.push(...n.filter(r=>gn(r)!==e)),t}function Ko(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Eg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Nl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Wo(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),dr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Wo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Wo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Xh(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Jh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Nl(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Nl(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Ko(i.snapshot),y=h?.get(p._Vd)??null;l.attachRef=null,l.route=i,l.resolver=y,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Ig{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ia{constructor(e,t){this.component=e,this.route=t}}function Cg(n,e,t){const r=n._root;return mu(r,e?e._root:null,t,[r.value])}function gu(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function mu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Wo(e);return n.children.forEach(l=>{(function d_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const y=function h_(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ro(n.url,e.url)||!As(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yc(n,e)||!As(n.queryParams,e.queryParams);default:return!Yc(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Ig(r)):(a.data=l.data,a._resolvedData=l._resolvedData),mu(n,e,a.component?h?h.children:null:t,r,i),y&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Ia(h.outlet.component,l))}else l&&Zo(e,h,i),i.canActivateChecks.push(new Ig(r)),mu(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),dr(a,(l,h)=>Zo(l,t.getContext(h),i)),i}function Zo(n,e,t){const r=Wo(n),i=n.value;dr(r,(a,l)=>{Zo(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Ia(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ca(n){return"function"==typeof n}function g_(n){return n instanceof wl||"EmptyError"===n?.name}const Dg=Symbol("INITIAL_VALUE");function Ll(){return lr(n=>Nc(n.map(e=>e.pipe(Fn(1),bl(Dg)))).pipe((0,it.U)(e=>{for(const t of e)if(!0!==t){if(t===Dg)return Dg;if(!1===t||t instanceof _a)return t}return!0}),ei(e=>e!==Dg),Fn(1)))}function fE(n){return(0,jh.z)((0,cr.b)(e=>{if(as(e))throw pu(0,e)}),(0,it.U)(e=>!0===e))}const ri={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tg(n,e,t,r,i){const a=Sg(n,e,t);return a.matched?function ET(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?vt(i.map(l=>{const h=gu(l,n);return Gi(function p_(n){return n&&Ca(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ll(),fE()):vt(!0)}(r=m(e,r),e,t).pipe((0,it.U)(l=>!0===l?a:{...ri})):vt(a)}function Sg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ri}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||tE)(t,n,e);if(!i)return{...ri};const a={};dr(i.posParams,(h,y)=>{a[y]=h.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Xc(n,e,t,r,i="corrected"){if(t.length>0&&function y_(n,e,t){return t.some(r=>Ag(n,e,r)&&gn(r)!==qt)}(n,t,r)){const l=new Xt(e,function sf(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&gn(a)!==qt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[gn(a)]=l}return i}(n,e,r,new Xt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function IT(n,e,t){return t.some(r=>Ag(n,e,r))}(n,t,r)){const l=new Xt(n.segments,function fi(n,e,t,r,i,a){const l={};for(const h of r)if(Ag(n,t,h)&&!i[gn(h)]){const y=new Xt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[gn(h)]=y}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Xt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ag(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function __(n,e,t,r){return!!(gn(n)===r||r!==qt&&Ag(e,t,n))&&("**"===n.path||Sg(e,n,t).matched)}function pE(n,e,t){return 0===e.length&&!n.children[t]}const af=!1;class xg{constructor(e){this.segmentGroup=e||null}}class v_{constructor(e){this.urlTree=e}}function uf(n){return ma(new xg(n))}function gE(n){return ma(new v_(n))}class ed{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Xc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,it.U)(a=>this.createUrlTree(Al(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(os(a=>{if(a instanceof v_)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof xg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,it.U)(i=>this.createUrlTree(Al(i),e.queryParams,e.fragment))).pipe(os(i=>{throw i instanceof xg?this.noMatchError(i):i}))}noMatchError(e){return new p.vHH(4002,af)}createUrlTree(e,t,r){const i=au(e);return new _a(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(a=>new Xt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Sn.D)(i).pipe($i(a=>{const l=r.children[a],h=qi(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,it.U)(y=>({segment:y,outlet:a})))}),to((a,l)=>(a[l.outlet]=l.segment,a),{}),Bo())}expandSegment(e,t,r,i,a,l){return(0,Sn.D)(r).pipe($i(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(os(w=>{if(w instanceof xg)return vt(null);throw w}))),eo(h=>!!h),os((h,y)=>{if(g_(h))return pE(t,i,a)?vt(new Xt([],{})):uf(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return __(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):uf(t):uf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?gE(a):this.lineralizeSegments(r,a).pipe((0,Lr.z)(l=>{const h=new Xt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:y,remainingSegments:w,positionalParamSegments:b}=Sg(t,i,a);if(!h)return uf(t);const D=this.applyRedirectCommands(y,i.redirectTo,b);return i.redirectTo.startsWith("/")?gE(D):this.lineralizeSegments(i,D).pipe((0,Lr.z)(M=>this.expandSegment(e,t,r,M.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=m(r,e),r.loadChildren?(r._loadedRoutes?vt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,it.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Xt(i,{})))):vt(new Xt(i,{}))):Tg(t,r,i,e).pipe(lr(({matched:l,consumedSegments:h,remainingSegments:y})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Lr.z)(b=>{const D=b.injector??e,M=b.routes,{segmentGroup:V,slicedSegments:W}=Xc(t,h,y,M),me=new Xt(V.segments,V.children);if(0===W.length&&me.hasChildren())return this.expandChildren(D,M,me).pipe((0,it.U)(Mt=>new Xt(h,Mt)));if(0===M.length&&0===W.length)return vt(new Xt(h,{}));const Me=gn(r)===a;return this.expandSegment(D,me,M,W,Me?qt:a,!0).pipe((0,it.U)(Ct=>new Xt(h.concat(Ct.segments),Ct.children)))})):uf(t)))}getChildConfig(e,t,r){return t.children?vt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?vt({routes:t._loadedRoutes,injector:t._loadedInjector}):function hE(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?vt(!0):vt(i.map(l=>{const h=gu(l,n);return Gi(function cE(n){return n&&Ca(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ll(),fE())}(e,t,r).pipe((0,Lr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,cr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function bT(n){return ma(rf(af,3))}())):vt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[qt])return ma(new p.vHH(4e3,af));i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new _a(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return dr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return dr(t.children,(h,y)=>{l[y]=this.createSegmentGroup(e,h,r,i)}),new Xt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new p.vHH(4001,af);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class TT{}class mE{constructor(e,t,r,i,a,l,h,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h,this.urlSerializer=y}recognize(){const e=Xc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,it.U)(t=>{if(null===t)return null;const r=new Mi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ni(r,t),a=new fu(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=hu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Sn.D)(Object.keys(r.children)).pipe($i(i=>{const a=r.children[i],l=qi(t,i);return this.processSegmentGroup(e,l,a,i)}),to((i,a)=>i&&a?(i.push(...a),i):null),function Lc(n,e=!1){return(0,br.e)((t,r)=>{let i=0;t.subscribe((0,wr.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),Vo(null),Bo(),(0,it.U)(i=>{if(null===i)return null;const a=Rg(i);return function dO(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Sn.D)(t).pipe($i(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),eo(l=>!!l),os(l=>{if(g_(l))return pE(r,i,a)?vt([]):vt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!__(t,r,i,a))return vt(null);let l;if("**"===t.path){const h=i.length>0?ng(i).parameters:{},y=yE(r)+i.length;l=vt({snapshot:new Mi(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_E(t),gn(t),t.component??t._loadedComponent??null,t,E_(r),y,vE(t),y),consumedSegments:[],remainingSegments:[]})}else l=Tg(r,t,i,e).pipe((0,it.U)(({matched:h,consumedSegments:y,remainingSegments:w,parameters:b})=>{if(!h)return null;const D=yE(r)+y.length;return{snapshot:new Mi(y,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_E(t),gn(t),t.component??t._loadedComponent??null,t,E_(r),D,vE(t),D),consumedSegments:y,remainingSegments:w}}));return l.pipe(lr(h=>{if(null===h)return vt(null);const{snapshot:y,consumedSegments:w,remainingSegments:b}=h;e=t._injector??e;const D=t._loadedInjector??e,M=function Yo(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:W}=Xc(r,w,b,M.filter(Me=>void 0===Me.redirectTo),this.relativeLinkResolution);if(0===W.length&&V.hasChildren())return this.processChildren(D,M,V).pipe((0,it.U)(Me=>null===Me?null:[new ni(y,Me)]));if(0===M.length&&0===W.length)return vt([new ni(y,[])]);const me=gn(t)===a;return this.processSegment(D,M,V,W,me?qt:a).pipe((0,it.U)(Me=>null===Me?null:[new ni(y,Me)]))}))}}function w_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rg(n){const e=[],t=new Set;for(const r of n){if(!w_(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Rg(r.children);e.push(new ni(r.value,i))}return e.filter(r=>!t.has(r))}function E_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function _E(n){return n.data||{}}function vE(n){return n.resolve||{}}function D_(n){return"string"==typeof n.title||null===n.title}function T_(n){return lr(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,it.U)(()=>e)):vt(e)})}let Ng=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[Ss]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(EE)},providedIn:"root"}),n})(),EE=(()=>{class n extends Ng{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pa))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class AT{}class MT extends class xT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lf=new p.OlP("",{providedIn:"root",factory:()=>({})}),Pg=new p.OlP("ROUTES");let cf=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return vt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Gi(t.loadComponent()).pipe((0,cr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Vc(()=>{this.componentLoaders.delete(t)})),i=new Lo(r,()=>new is.x).pipe(Xs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return vt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,it.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w,b=!1;Array.isArray(h)?w=h:(y=h.create(t).injector,w=tg(y.get(Pg,[],p.XFs.Self|p.XFs.Optional)));return{routes:w.map(wt),injector:y}}),Vc(()=>{this.childrenLoaders.delete(r)})),l=new Lo(a,()=>new is.x).pipe(Xs());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Gi(t()).pipe((0,Lr.z)(r=>r instanceof p.YKP||Array.isArray(r)?vt(r):(0,Sn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NT{}class OT{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function IE(n){throw n}function Vl(n,e,t){return e.parse("/")}const CE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function kT(){const n=(0,p.f3M)(qh),e=(0,p.f3M)(Pl),t=(0,p.f3M)(Ne),r=(0,p.f3M)(p.zs3),i=(0,p.f3M)(p.Sil),a=(0,p.f3M)(Pg,{optional:!0})??[],l=(0,p.f3M)(lf,{optional:!0})??{},h=(0,p.f3M)(EE),y=(0,p.f3M)(Ng,{optional:!0}),w=(0,p.f3M)(NT,{optional:!0}),b=(0,p.f3M)(AT,{optional:!0}),D=new Dr(null,n,e,t,r,i,tg(a));return w&&(D.urlHandlingStrategy=w),b&&(D.routeReuseStrategy=b),D.titleStrategy=y??h,function PT(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,D),D}let Dr=(()=>{class n{constructor(t,r,i,a,l,h,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new is.x,this.errorHandler=IE,this.malformedUriErrorHandler=Vl,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>vt(void 0),this.urlHandlingStrategy=new OT,this.routeReuseStrategy=new MT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(cf),this.configLoader.onLoadEndListener=M=>this.triggerEvent(new Qh(M)),this.configLoader.onLoadStartListener=M=>this.triggerEvent(new Rl(M)),this.ngModule=l.get(p.h0i),this.console=l.get(p.c2e);const D=l.get(p.R0b);this.isNgZoneEnabled=D instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function rg(){return new _a(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ms(this.currentUrlTree,this.rootComponentType),this.transitions=new $n({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ei(i=>0!==i.id),(0,it.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),lr(i=>{let a=!1,l=!1;return vt(i).pipe((0,cr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),lr(h=>{const y=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return S_(h.source)&&(this.browserUrlTree=h.extractedUrl),vt(h).pipe(lr(D=>{const M=this.transitions.getValue();return r.next(new cu(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?Js.E:Promise.resolve(D)}),function ba(n,e,t,r){return lr(i=>function DT(n,e,t,r,i){return new ed(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,it.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,cr.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function I_(n,e,t,r,i,a){return(0,Lr.z)(l=>function cO(n,e,t,r,i,a,l="emptyOnly",h="legacy"){return new mE(n,e,t,r,i,l,h,a).recognize().pipe(lr(y=>null===y?function lO(n){return new Zr.y(e=>e.error(n))}(new TT):vt(y)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,it.U)(h=>({...l,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,cr.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(V,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new i_(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(M)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:V,source:W,restoredState:me,extras:Me}=h,nt=new cu(M,this.serializeUrl(V),W,me);r.next(nt);const Ct=Ms(V,this.rootComponentType).snapshot;return vt(i={...h,targetSnapshot:Ct,urlAfterRedirects:V,extras:{...Me,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Js.E}),(0,cr.b)(h=>{const y=new Ml(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(y)}),(0,it.U)(h=>i={...h,guards:Cg(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function pT(n,e){return(0,Lr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?vt({...t,guardsResult:!0}):function gT(n,e,t,r){return(0,Sn.D)(n).pipe((0,Lr.z)(i=>function wT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?vt(a.map(h=>{const y=Ko(e)??i,w=gu(h,y);return Gi(function hT(n){return n&&Ca(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):y.runInContext(()=>w(n,e,t,r))).pipe(eo())})).pipe(Ll()):vt(!0)}(i.component,i.route,t,e,r)),eo(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Lr.z)(h=>h&&function lE(n){return"boolean"==typeof n}(h)?function mT(n,e,t,r){return(0,Sn.D)(e).pipe($i(i=>Fo(function m_(n,e){return null!==n&&e&&e(new yg(n)),vt(!0)}(i.route.parent,r),function yT(n,e){return null!==n&&e&&e(new Kc(n)),vt(!0)}(i.route,r),function vT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function c_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ts(()=>vt(l.guards.map(y=>{const w=Ko(l.node)??t,b=gu(y,w);return Gi(function f_(n){return n&&Ca(n.canActivateChild)}(b)?b.canActivateChild(r,n):w.runInContext(()=>b(r,n))).pipe(eo())})).pipe(Ll())));return vt(a).pipe(Ll())}(n,i.path,t),function _T(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(a=>Ts(()=>{const l=Ko(e)??t,h=gu(a,l);return Gi(function dE(n){return n&&Ca(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(eo())}));return vt(i).pipe(Ll())}(n,i.route,t))),eo(i=>!0!==i,!0))}(r,a,n,e):vt(h)),(0,it.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,cr.b)(h=>{if(i.guardsResult=h.guardsResult,as(h.guardsResult))throw pu(0,h.guardsResult);const y=new s_(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(y)}),ei(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),T_(h=>{if(h.guards.canActivateChecks.length)return vt(h).pipe((0,cr.b)(y=>{const w=new o_(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),lr(y=>{let w=!1;return vt(y).pipe(function C_(n,e){return(0,Lr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let a=0;return(0,Sn.D)(i).pipe($i(l=>function wE(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!D_(i)&&(a[Ss]=i.title),function hO(n,e,t,r){const i=function nd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return vt({});const a={};return(0,Sn.D)(i).pipe((0,Lr.z)(l=>function b_(n,e,t,r){const i=Ko(e)??r,a=gu(n,i);return Gi(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(eo(),(0,cr.b)(h=>{a[l]=h}))),Dl(1),function Hh(n){return(0,it.U)(()=>n)}(a),os(l=>g_(l)?Js.E:ma(l)))}(a,n,e,r).pipe((0,it.U)(l=>(n._resolvedData=l,n.data=hu(n,t).resolve,i&&D_(i)&&(n.data[Ss]=i.title),null)))}(l.route,r,n,e)),(0,cr.b)(()=>a++),Dl(1),(0,Lr.z)(l=>a===i.length?vt(t):Js.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,cr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,cr.b)(y=>{const w=new uE(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),T_(h=>{const y=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,cr.b)(D=>{w.component=D}),(0,it.U)(()=>{})));for(const D of w.children)b.push(...y(D));return b};return Nc(y(h.targetSnapshot.root)).pipe(Vo(),Fn(1))}),T_(()=>this.afterPreactivation()),(0,it.U)(h=>{const y=function hi(n,e,t){const r=zo(n,e._root,t?t._root:void 0);return new ef(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:y}}),(0,cr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new Eg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,cr.b)({next(){a=!0},complete(){a=!0}}),Vc(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),os(h=>{if(l=!0,wg(h)){Ol(h)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new qc(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(y),Ol(h)){const w=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||S_(i.source)};this.scheduleNavigation(w,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new mg(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Js.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const h={...a};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(wt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:y}=r,w=i||this.routerState.root,b=y?this.currentUrlTree.fragment:l;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...a};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),aE(w,this.currentUrlTree,t,D,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=as(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function FT(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...CE}:!1===r?{...bE}:r,as(t))return Yy(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Yy(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Go(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let h,y,w;l?(h=l.resolve,y=l.reject,w=l.promise):w=new Promise((M,V)=>{h=M,y=V});const b=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:b,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:h,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(M=>Promise.reject(M))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new qc(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:function(){return kT()},providedIn:"root"}),n})();function S_(n){return"imperative"!==n}class hf{}let M_=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ei(t=>t instanceof Go),$i(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,p.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,h=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,Sn.D)(i).pipe((0,Il.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):vt(null);const a=i.pipe((0,Lr.z)(l=>null===l?vt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Sn.D)([a,l]).pipe((0,Il.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Dr),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(hf),p.LFG(cf))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lg=new p.OlP("");let Vg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Go&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Zc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function rd(n,e){return{\u0275kind:n,\u0275providers:e}}function N_(n){return[{provide:Pg,multi:!0,useValue:n}]}function Ug(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(Dr),i=n.get(O_);1===n.get(TE)&&r.initialNavigation(),n.get(xE,null,p.XFs.Optional)?.setUpPreloading(),n.get(Lg,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const O_=new p.OlP("",{factory:()=>new is.x}),TE=new p.OlP("",{providedIn:"root",factory:()=>1});const xE=new p.OlP("");function BT(n){return rd(0,[{provide:xE,useExisting:M_},{provide:hf,useExisting:n}])}const ME=new p.OlP("ROUTER_FORROOT_GUARD"),HT=[Ne,{provide:qh,useClass:jc},{provide:Dr,useFactory:kT},Pl,{provide:oo,useFactory:function R_(n){return n.routerState.root},deps:[Dr]},cf];function $T(){return new p.PXZ("Router",Dr)}let RE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[HT,[],N_(t),{provide:ME,useFactory:zT,deps:[[Dr,new p.FiY,new p.tp0]]},{provide:lf,useValue:r||{}},r?.useHash?{provide:ye,useClass:rt}:{provide:ye,useClass:lt},{provide:Lg,useFactory:()=>{const n=(0,p.f3M)(Dr),e=(0,p.f3M)(qa),t=(0,p.f3M)(lf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Vg(n,e,t)}},r?.preloadingStrategy?BT(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:$T},r?.initialNavigation?$t(r):[],[{provide:P_,useFactory:Ug},{provide:p.tb,multi:!0,useExisting:P_}]]}}static forChild(t){return{ngModule:n,providers:[N_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ME,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[f]}),n})();function zT(n){return"guarded"}function $t(n){return["disabled"===n.initialNavigation?rd(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(Dr);return()=>{e.setUpLocationChangeListener()}}},{provide:TE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?rd(2,[{provide:TE,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get($,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(Dr),h=e.get(O_);(function i(a){e.get(Dr).events.pipe(ei(h=>h instanceof Go||h instanceof qc||h instanceof mg),(0,it.U)(h=>h instanceof Go||h instanceof qc&&(0===h.code||1===h.code)&&null),ei(h=>null!==h),Fn(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||h.closed?vt(void 0):h),l.initialNavigation()}))}}]).\u0275providers:[]]}const P_=new p.OlP("");var PE=P(4986),k_=P(6451),F_=P(3099);function kE(n,e=Qs.y){return n=n??FE,(0,br.e)((t,r)=>{let i,a=!0;t.subscribe((0,wr.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function FE(n,e){return n===e}var KT=P(5032),Gn=P(880),pi=P(2011),LE=(P(1277),P(3942)),uo=P(4859),Ee=P(5861),lo=P(9681),k=P(2090),Jo=P(1877);const YT="@firebase/database",VE="0.13.10";let jg="";function QT(n){jg=n}class JT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sd{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const UE=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new JT(e)}}catch{}return new sd},_u=UE("localStorage"),od=UE("sessionStorage"),ad=new Jo.Yd("@firebase/database"),L_=function(){let n=1;return function(){return n++}}(),BE=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},ff=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=ff.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let Ul=null,jE=!0;const HE=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ad.logLevel=Jo.in.VERBOSE,Ul=ad.log.bind(ad),e&&od.set("logging_enabled",!0)):"function"==typeof n?Ul=n:(Ul=null,od.remove("logging_enabled"))},Vr=function(...n){if(!0===jE&&(jE=!1,null===Ul&&!0===od.get("logging_enabled")&&HE(!0)),Ul){const e=ff.apply(null,n);Ul(e)}},pf=function(n){return function(...e){Vr(n,...e)}},Hg=function(...n){const e="FIREBASE INTERNAL ERROR: "+ff(...n);ad.error(e)},co=function(...n){const e=`FIREBASE FATAL ERROR: ${ff(...n)}`;throw ad.error(e),new Error(e)},Yr=function(...n){const e="FIREBASE WARNING: "+ff(...n);ad.warn(e)},ud=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vu="[MIN_NAME]",Ri="[MAX_NAME]",wu=function(n,e){if(n===e)return 0;if(n===vu||e===Ri)return-1;if(e===vu||n===Ri)return 1;{const t=j_(n),r=j_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},$E=function(n,e){return n===e?0:n<e?-1:1},Eu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},ls=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=ls(n[e[r]]);return t+="}",t},V_=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const $g=function(n){(0,k.hu)(!ud(n),"Invalid JSON number");const r=1023;let i,a,l,h,y;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(y=52;y;y-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(y=11;y;y-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const b=w.join("");let D="";for(y=0;y<64;y+=8){let M=parseInt(b.substr(y,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},B_=new RegExp("^-?(0*)\\d{1,10}$"),eS=-2147483648,Gg=2147483647,j_=function(n){if(B_.test(n)){const e=Number(n);if(e>=eS&&e<=Gg)return e}return null},Ta=function(n){try{n()}catch(e){setTimeout(()=>{throw Yr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Bl=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class H_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Yr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $_{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yr(e)}}let zg=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const tS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W_="websocket",ZE="long_polling";class gf{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_u.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_u.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rS(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===W_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==ZE)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function yO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Qr(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class _O{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const YE={},QE={};function JE(n){const e=n.toString();return YE[e]||(YE[e]=new _O),YE[e]}class wO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ta(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ho{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pf(e),this.stats_=JE(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),rS(t,ZE,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new wO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bu((...a)=>{const[l,h,y,w,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=y;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&tS.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ho.forceAllow_=!0}static forceDisallow(){ho.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ho.forceAllow_&&(ho.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=V_(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class bu{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=L_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=bu.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Vr("frame writing exception"),h.stack&&Vr(h.stack),Vr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let jl=null;typeof MozWebSocket<"u"?jl=MozWebSocket:typeof WebSocket<"u"&&(jl=WebSocket);let Xo=(()=>{class n{constructor(t,r,i,a,l,h,y){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pf(this.connId),this.stats_=JE(r),this.connURL=n.connectionURL_(r,h,y,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&tS.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),rS(t,W_,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_u.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${jg}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new jl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==jl&&!n.forceDisallow_}static previouslyFailed(){return _u.isInMemoryStorage||!0===_u.get("previous_websocket_failure")}markConnectionHealthy(){_u.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=V_(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),sI=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ho,Xo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Xo&&Xo.isAvailable();let i=r&&!Xo.previouslyFailed();if(t.webSocketOnly&&(r||Yr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Xo];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Ki{constructor(e,t,r,i,a,l,h,y,w,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=y,this.onKill_=w,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pf("c:"+this.id+":"),this.transportManager_=new sI(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Eu("t",e),r=Eu("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Eu("t",e),r=Eu("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Eu("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Hg("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hg("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Yr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Bl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_u.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tv{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class lI{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class nv extends lI{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nv}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new Cn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Du(n){return n.pieces_.length-n.pieceNum_}function Mn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function rv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function mf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function Wn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function en(n){return n.pieceNum_>=n.pieces_.length}function Ni(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return Ni(Mn(n),Mn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ea(n,e){const t=mf(n,0),r=mf(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=wu(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function yf(n,e){if(Du(n)!==Du(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Rs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Du(n)>Du(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class hS{constructor(e,t){this.errorPrefix_=t,this.parts_=mf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);pI(this)}}function pI(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hl(n))}function Hl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class iv extends lI{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new iv}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $l=1e3;let cd,Tu=(()=>{class n extends tv{constructor(t,r,i,a,l,h,y,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=y,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=pf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$l,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iv.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&nv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const y=h.d;"ok"===h.s?r.resolve(y):r.reject(y)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const y={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,y=>{const w=y.d,b=y.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",y),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Yr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Hg("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$l),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let y=!1,w=null;const b=function(){w?w.close():(y=!0,a())};t.realtime_={close:b,sendRequest:function(V){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,W]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);y?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=W&&W.token,w=new Ki(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,me=>{Yr(me+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(V){t.log_("Failed to get token: "+V),y||(t.repoInfo_.nodeAdmin&&Yr(V),b())}}})()}interrupt(t){Vr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ls(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Vr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+jg.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=nv.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class ov{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(vu,e),i=new dn(vu,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class gS extends ov{static get __EMPTY_NODE(){return cd}static set __EMPTY_NODE(e){cd=e}compare(e,t){return wu(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(Ri,cd)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,cd)}toString(){return".key"}}const fo=new gS;class _f{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let hd,Ns=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??gi.EMPTY_NODE,this.right=l??gi.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return gi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return gi.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class gi{constructor(e,t=gi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new gi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ns.BLACK,null,null))}remove(e){return new gi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ns.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _f(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _f(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _f(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _f(this.root_,null,this.comparator_,!0,e)}}function Sa(n,e){return wu(n.name,e.name)}function dd(n,e){return wu(n,e)}gi.EMPTY_NODE=new class mI{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ns(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yI=function(n){return"number"==typeof n?"number:"+$g(n):"string:"+n},tm=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===hd||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===hd||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let av,_I,pd,fd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),tm(this.priorityNode_)}static set __childrenNodeConstructor(t){av=t}static get __childrenNodeConstructor(){return av}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return en(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Du(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+yI(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?$g(this.value_):this.value_,this.lazyHash_=BE(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const zn=new class yS extends ov{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?wu(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(Ri,new fd("[PRIORITY-POST]",pd))}makePost(e,t){const r=_I(e);return new dn(t,new fd("[PRIORITY-POST]",r))}toString(){return".priority"}},_S=Math.log(2);class vS{constructor(e){this.count=parseInt(Math.log(e+1)/_S,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nm=function(n,e,t,r){n.sort(e);const i=function(y,w){const b=w-y;let D,M;if(0===b)return null;if(1===b)return D=n[y],M=t?t(D):D,new Ns(M,D.node,Ns.BLACK,null,null);{const V=parseInt(b/2,10)+y,W=i(y,V),me=i(V+1,w);return D=n[V],M=t?t(D):D,new Ns(M,D.node,Ns.BLACK,W,me)}},h=function(y){let w=null,b=null,D=n.length;const M=function(W,me){const Me=D-W,nt=D;D-=W;const Ct=i(Me+1,nt),Mt=n[Me],Ut=t?t(Mt):Mt;V(new Ns(Ut,Mt.node,me,null,Ct))},V=function(W){w?(w.left=W,w=W):(b=W,w=W)};for(let W=0;W<y.count;++W){const me=y.nextBitIsOne(),Me=Math.pow(2,y.count-(W+1));me?M(Me,Ns.BLACK):(M(Me,Ns.BLACK),M(Me,Ns.RED))}return b}(new vS(n.length));return new gi(r||e,h)};let uv;const Gl={};class po{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Gl&&zn,"ChildrenNode.ts has not been loaded"),uv=uv||new po({".priority":Gl},{".priority":zn}),uv}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof gi?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(dn.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?nm(r,e.getCompare()):Gl;const y=e.toString(),w=Object.assign({},this.indexSet_);w[y]=e;const b=Object.assign({},this.indexes_);return b[y]=h,new po(b,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===Gl){if(l.isDefinedOn(e.node)){const h=[],y=t.getIterator(dn.Wrap);let w=y.getNext();for(;w;)w.name!==e.name&&h.push(w),w=y.getNext();return h.push(e),nm(h,l.getCompare())}return Gl}{const h=t.get(e.name);let y=i;return h&&(y=y.remove(new dn(e.name,h))),y.insert(e,e.node)}});return new po(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Gl)return i;{const a=t.get(e.name);return a?i.remove(new dn(e.name,a)):i}});return new po(r,this.indexSet_)}}let wf,Bt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&tm(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return wf||(wf=new n(new gi(dd),null,po.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?wf:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Mn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?wf:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,k.hu)(".priority"!==sn(t)||1===Du(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Mn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(zn,(h,y)=>{r[h]=y.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const y in r)h[y]=r[y];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+yI(this.getPriority().val())+":"),this.forEachChild(zn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":BE(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new dn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,dn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ef?-1:0}withIndex(t){if(t===fo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(zn),a=r.getIterator(zn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===fo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Ef=new class wS extends Bt{constructor(){super(new gi(dd),Bt.EMPTY_NODE,po.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Bt.EMPTY_NODE}isEmpty(){return!1}};function nr(n,e=null){if(null===n)return Bt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fd(n,nr(e));if(n instanceof Array){let t=Bt.EMPTY_NODE;return Qr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=nr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(nr(e))}{const t=[];let r=!1;if(Qr(n,(l,h)=>{if("."!==l.substring(0,1)){const y=nr(h);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new dn(l,y)))}}),0===t.length)return Bt.EMPTY_NODE;const a=nm(t,Sa,l=>l.name,dd);if(r){const l=nm(t,zn.getCompare());return new Bt(a,nr(e),new po({".priority":l},{".priority":zn}))}return new Bt(a,nr(e),po.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(vu,Bt.EMPTY_NODE)},MAX:{value:new dn(Ri,Ef)}}),gS.__EMPTY_NODE=Bt.EMPTY_NODE,fd.__childrenNodeConstructor=Bt,function vf(n){hd=n}(Ef),function CO(n){pd=n}(Ef),function mS(n){_I=n}(nr);class lv extends ov{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!en(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?wu(e.name,t.name):a}makePost(e,t){const r=nr(e),i=Bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Bt.EMPTY_NODE.updateChild(this.indexPath_,Ef);return new dn(Ri,e)}toString(){return mf(this.indexPath_,0).join("/")}}const gd=new class IS extends ov{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?wu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=nr(e);return new dn(t,r)}toString(){return".value"}},Os="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",CS=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Os.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Os.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),rm=function(n){if(n===""+Gg)return"-";const e=j_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ri;const a=Os.charAt(Os.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},EI=function(n){if(n===""+eS)return vu;const e=j_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Gg:(delete t[t.length-1],t.join("")):(t[t.length-1]=Os.charAt(Os.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function go(n){return{type:"value",snapshotNode:n}}function ta(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Tr(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function mo(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Zi{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Tr(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ta(t,r)):l.trackChildChange(mo(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(zn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Tr(i,a))}),t.isLeafNode()||t.forEachChild(zn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(mo(i,a,l))}else r.trackChildChange(ta(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Bt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Wl{constructor(e){this.indexedFilter_=new Zi(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Wl.getStartPost_(e),this.endPost_=Wl.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new dn(t,r))||(r=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Bt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Bt.EMPTY_NODE);const a=this;return t.forEachChild(zn,(l,h)=>{a.matches(new dn(l,h))||(i=i.updateImmediateChild(l,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yd{constructor(e){this.rangedFilter_=new Wl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new dn(t,r))||(r=Bt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Bt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!y)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,y;if(i=t.withIndex(this.index_),i=i.updatePriority(Bt.EMPTY_NODE),this.reverse_){y=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(M,V)=>D(V,M)}else y=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,b=!1;for(;y.hasNext();){const D=y.getNext();!b&&h(a,D)<=0&&(b=!0),b&&w<this.limit_&&h(D,l)<=0?w++:i=i.updateImmediateChild(D.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const D=this.index_.getCompare();l=(M,V)=>D(V,M)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const y=new dn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(y);if(h.hasChild(t)){const D=h.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=M&&(M.name===t||h.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const V=null==M?1:l(M,y);if(b&&!r.isEmpty()&&V>=0)return a?.trackChildChange(mo(t,r,D)),h.updateImmediateChild(t,r);{a?.trackChildChange(Tr(t,D));const me=h.updateImmediateChild(t,Bt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(a?.trackChildChange(ta(M.name,M.node)),me.updateImmediateChild(M.name,M.node)):me}}return r.isEmpty()?e:b&&l(w,y)>=0?(null!=a&&(a.trackChildChange(Tr(w.name,w.node)),a.trackChildChange(ta(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Bt.EMPTY_NODE)):e}}class Aa{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ri}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===zn}copy(){const e=new Aa;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Su(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Au(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function If(n,e){const t=n.copy();return t.index_=e,t}function cv(n){const e={};if(n.isDefault())return e;let t;return n.index_===zn?t="$priority":n.index_===gd?t="$value":n.index_===fo?t="$key":((0,k.hu)(n.index_ instanceof lv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_&&(e.startAt=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function dv(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==zn&&(e.i=n.index_.toString()),e}class Cf extends tv{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=pf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Cf.getListenId_(e,r),h={};this.listens_[l]=h;const y=cv(e._queryParams);this.restRequest_(a+".json",y,(w,b)=>{let D=b;if(404===w&&(D=null,w=null),null===w&&this.onDataUpdate_(a,D,!1,r),(0,k.DV)(this.listens_,l)===h){let M;M=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(M,null)}})}unlisten(e,t){const r=Cf.getListenId_(e,t);delete this.listens_[r]}get(e){const t=cv(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let y=null;if(h.status>=200&&h.status<300){try{y=(0,k.cI)(h.responseText)}catch{Yr("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,y)}else 401!==h.status&&404!==h.status&&Yr("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class II{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function bf(){return{value:null,children:new Map}}function zl(n,e,t){if(en(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,bf()),zl(n.children.get(r),e=Mn(e),t)}}function sm(n,e){if(en(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(zn,(r,i)=>{zl(n,new Cn(r),i)}),sm(n,e)}}if(n.children.size>0){const t=sn(e);return e=Mn(e),n.children.has(t)&&sm(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function om(n,e,t){null!==n.value?t(e,n.value):function bS(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{om(i,new Cn(e.toString()+"/"+r),t)})}class DS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class fv{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new DS(e);const r=1e4+2e4*Math.random();Bl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Qr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Bl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Yi=(()=>{return(n=Yi||(Yi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Yi;var n})();function bd(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Dd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Yi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(en(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new Dd(vn(),t,this.revert)}}return(0,k.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new Dd(Mn(this.path),this.affectedTree,this.revert)}}class Df{constructor(e,t){this.source=e,this.path=t,this.type=Yi.LISTEN_COMPLETE}operationForChild(e){return en(this.path)?new Df(this.source,vn()):new Df(this.source,Mn(this.path))}}class xa{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Yi.OVERWRITE}operationForChild(e){return en(this.path)?new xa(this.source,vn(),this.snap.getImmediateChild(e)):new xa(this.source,Mn(this.path),this.snap)}}class xu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Yi.MERGE}operationForChild(e){if(en(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new xa(this.source,vn(),t.value):new xu(this.source,vn(),t)}return(0,k.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xu(this.source,Mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ma{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(en(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class bI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Td(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,y)=>function mv(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,y)),l.forEach(h=>{const y=function DI(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(y,n.query_))})})}function Tf(n,e){return{eventCache:n,serverCache:e}}function Sf(n,e,t,r){return Tf(new Ma(e,t,r),n.serverCache)}function yv(n,e,t,r){return Tf(n.eventCache,new Ma(e,t,r))}function Af(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Mu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let am;class Ln{constructor(e,t=(()=>(am||(am=new gi($E)),am))()){this.value=e,this.children=t}static fromObject(e){let t=new Ln(null);return Qr(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(en(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Mn(e),t);return null!=a?{path:Wn(new Cn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(en(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Mn(e)):new Ln(null)}}set(e,t){if(en(e))return new Ln(t,this.children);{const r=sn(e),a=(this.children.get(r)||new Ln(null)).set(Mn(e),t),l=this.children.insert(r,a);return new Ln(this.value,l)}}remove(e){if(en(e))return this.children.isEmpty()?new Ln(null):new Ln(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Mn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Ln(null):new Ln(this.value,a)}return this}}get(e){if(en(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Mn(e)):null}}setTree(e,t){if(en(e))return t;{const r=sn(e),a=(this.children.get(r)||new Ln(null)).setTree(Mn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Ln(this.value,l)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Wn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(en(e))return null;{const a=sn(e),l=this.children.get(a);return l?l.findOnPath_(Mn(e),Wn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(en(e))return this;{this.value&&r(t,this.value);const i=sn(e),a=this.children.get(i);return a?a.foreachOnPath_(Mn(e),Wn(t,i),r):new Ln(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class yo{constructor(e){this.writeTree_=e}static empty(){return new yo(new Ln(null))}}function ql(n,e,t){if(en(e))return new yo(new Ln(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ni(i,e);return a=a.updateChild(l,t),new yo(n.writeTree_.set(i,a))}{const i=new Ln(t),a=n.writeTree_.setTree(e,i);return new yo(a)}}}function xf(n,e,t){let r=n;return Qr(t,(i,a)=>{r=ql(r,Wn(e,i),a)}),r}function _v(n,e){if(en(e))return yo.empty();{const t=n.writeTree_.setTree(e,new Ln(null));return new yo(t)}}function um(n,e){return null!=Ru(n,e)}function Ru(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ni(t.path,e)):null}function vv(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(zn,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function Ra(n,e){if(en(e))return n;{const t=Ru(n,e);return new yo(null!=t?new Ln(t):n.writeTree_.subtree(e))}}function lm(n){return n.writeTree_.isEmpty()}function Kl(n,e){return wv(vn(),n.writeTree_,e)}function wv(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=wv(Wn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Wn(n,".priority"),r)),t}}function Ev(n,e){return NI(e,n)}function Ur(n,e){if(n.snap)return Rs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Rs(Wn(n.path,t),e))return!0;return!1}function RS(n){return n.visible}function AI(n,e,t){let r=yo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Rs(t,l)?(h=Ni(t,l),r=ql(r,h,a.snap)):Rs(l,t)&&(h=Ni(l,t),r=ql(r,vn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Rs(t,l))h=Ni(t,l),r=xf(r,h,a.children);else if(Rs(l,t))if(h=Ni(l,t),en(h))r=xf(r,vn(),a.children);else{const y=(0,k.DV)(a.children,sn(h));if(y){const w=y.getChild(Mn(h));r=ql(r,vn(),w)}}}}}return r}function Iv(n,e,t,r,i){if(r||i){const a=Ra(n.visibleWrites,e);return!i&&lm(a)?t:i||null!=t||um(a,vn())?Kl(AI(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Rs(w.path,e)||Rs(e,w.path))},e),t||Bt.EMPTY_NODE):null}{const a=Ru(n.visibleWrites,e);if(null!=a)return a;{const l=Ra(n.visibleWrites,e);return lm(l)?t:null!=t||um(l,vn())?Kl(l,t||Bt.EMPTY_NODE):null}}}function Mf(n,e,t,r){return Iv(n.writeTree,n.treePath,e,t,r)}function Cv(n,e){return function NS(n,e,t){let r=Bt.EMPTY_NODE;const i=Ru(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Ra(n.visibleWrites,e);return t.forEachChild(zn,(l,h)=>{const y=Kl(Ra(a,new Cn(l)),h);r=r.updateImmediateChild(l,y)}),vv(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return vv(Ra(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function bv(n,e,t,r){return function xI(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Wn(e,t);if(um(n.visibleWrites,a))return null;{const l=Ra(n.visibleWrites,a);return lm(l)?i.getChild(t):Kl(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Dv(n,e){return function Sd(n,e){return Ru(n.visibleWrites,e)}(n.writeTree,Wn(n.treePath,e))}function Rf(n,e,t){return function MI(n,e,t,r){const i=Wn(e,t),a=Ru(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Kl(Ra(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function _o(n,e){return NI(Wn(n.treePath,e),n.writeTree)}function NI(n,e){return{treePath:n,writeTree:e}}class kS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,mo(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Tr(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,ta(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,mo(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Ps=new class na{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class cs{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ma(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rf(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mu(this.viewCache_),a=function RI(n,e,t,r,i,a){return function OS(n,e,t,r,i,a,l){let h;const y=Ra(n.visibleWrites,e),w=Ru(y,vn());if(null!=w)h=w;else{if(null==t)return[];h=Kl(y,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const b=[],D=l.getCompare(),M=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let V=M.getNext();for(;V&&b.length<i;)0!==D(V,r)&&b.push(V),V=M.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function kI(n,e,t,r,i,a){const l=e.eventCache;if(null!=Dv(r,t))return e;{let h,y;if(en(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Mu(e),D=Cv(r,w instanceof Bt?w:Bt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const w=Mf(r,Mu(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=sn(t);if(".priority"===w){(0,k.hu)(1===Du(t),"Can't have a priority with additional path components");const b=l.getNode();y=e.serverCache.getNode();const D=bv(r,t,b,y);h=null!=D?n.filter.updatePriority(b,D):l.getNode()}else{const b=Mn(t);let D;if(l.isCompleteForChild(w)){y=e.serverCache.getNode();const M=bv(r,t,l.getNode(),y);D=null!=M?l.getNode().getImmediateChild(w).updateChild(b,M):l.getNode().getImmediateChild(w)}else D=Rf(r,w,e.serverCache);h=null!=D?n.filter.updateChild(l.getNode(),w,D,b,i,a):l.getNode()}}return Sf(e,h,l.isFullyInitialized()||en(t),n.filter.filtersNodes())}}function cm(n,e,t,r,i,a,l,h){const y=e.serverCache;let w;const b=l?n.filter:n.filter.getIndexedFilter();if(en(t))w=b.updateFullNode(y.getNode(),r,null);else if(b.filtersNodes()&&!y.isFiltered()){const V=y.getNode().updateChild(t,r);w=b.updateFullNode(y.getNode(),V,null)}else{const V=sn(t);if(!y.isCompleteForPath(t)&&Du(t)>1)return e;const W=Mn(t),Me=y.getNode().getImmediateChild(V).updateChild(W,r);w=".priority"===V?b.updatePriority(y.getNode(),Me):b.updateChild(y.getNode(),V,Me,W,Ps,null)}const D=yv(e,w,y.isFullyInitialized()||en(t),b.filtersNodes());return kI(n,D,t,i,new cs(i,D,a),h)}function Nf(n,e,t,r,i,a,l){const h=e.eventCache;let y,w;const b=new cs(i,e,a);if(en(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),y=Sf(e,w,!0,n.filter.filtersNodes());else{const D=sn(t);if(".priority"===D)w=n.filter.updatePriority(e.eventCache.getNode(),r),y=Sf(e,w,h.isFullyInitialized(),h.isFiltered());else{const M=Mn(t),V=h.getNode().getImmediateChild(D);let W;if(en(M))W=r;else{const me=b.getCompleteChild(D);W=null!=me?".priority"===rv(M)&&me.getChild(hI(M)).isEmpty()?me:me.updateChild(M,r):Bt.EMPTY_NODE}y=V.equals(W)?e:Sf(e,n.filter.updateChild(h.getNode(),D,W,M,b,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return y}function Ad(n,e){return n.eventCache.isCompleteForChild(e)}function Tv(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Sv(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,y=e;w=en(t)?r:new Ln(null).setTree(t,r);const b=e.serverCache.getNode();return w.children.inorderTraversal((D,M)=>{if(b.hasChild(D)){const W=Tv(0,e.serverCache.getNode().getImmediateChild(D),M);y=cm(n,y,new Cn(D),W,i,a,l,h)}}),w.children.inorderTraversal((D,M)=>{const V=!e.serverCache.isCompleteForChild(D)&&null===M.value;if(!b.hasChild(D)&&!V){const me=Tv(0,e.serverCache.getNode().getImmediateChild(D),M);y=cm(n,y,new Cn(D),me,i,a,l,h)}}),y}class US{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Zi(r.getIndex()),a=function _d(n){return n.loadsAllData()?new Zi(n.getIndex()):n.hasLimit()?new yd(n):new Wl(n)}(r);this.processor_=function OI(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,y=i.updateFullNode(Bt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Bt.EMPTY_NODE,h.getNode(),null),b=new Ma(y,l.isFullyInitialized(),i.filtersNodes()),D=new Ma(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Tf(D,b),this.eventGenerator_=new bI(this.query_)}get query(){return this.query_}}function Av(n,e){const t=Mu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!en(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function Of(n){return 0===n.eventRegistrations_.length}function Mv(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Rv(n,e,t,r){e.type===Yi.MERGE&&null!==e.source.queryId&&((0,k.hu)(Mu(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(Af(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function FS(n,e,t,r,i){const a=new kS;let l,h;if(t.type===Yi.OVERWRITE){const w=t;w.source.fromUser?l=Nf(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!en(w.path),l=cm(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Yi.MERGE){const w=t;w.source.fromUser?l=function VS(n,e,t,r,i,a,l){let h=e;return r.foreach((y,w)=>{const b=Wn(t,y);Ad(e,sn(b))&&(h=Nf(n,h,b,w,i,a,l))}),r.foreach((y,w)=>{const b=Wn(t,y);Ad(e,sn(b))||(h=Nf(n,h,b,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=Sv(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Yi.ACK_USER_WRITE){const w=t;l=w.revert?function dm(n,e,t,r,i,a){let l;if(null!=Dv(r,t))return e;{const h=new cs(r,e,i),y=e.eventCache.getNode();let w;if(en(t)||".priority"===sn(t)){let b;if(e.serverCache.isFullyInitialized())b=Mf(r,Mu(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof Bt,"serverChildren would be complete if leaf node"),b=Cv(r,D)}w=n.filter.updateFullNode(y,b,a)}else{const b=sn(t);let D=Rf(r,b,e.serverCache);null==D&&e.serverCache.isCompleteForChild(b)&&(D=y.getImmediateChild(b)),w=null!=D?n.filter.updateChild(y,b,D,Mn(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(y,b,Bt.EMPTY_NODE,Mn(t),h,a):y,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Mf(r,Mu(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=Dv(r,vn()),Sf(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function FI(n,e,t,r,i,a,l){if(null!=Dv(i,t))return e;const h=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(en(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return cm(n,e,t,y.getNode().getChild(t),i,a,h,l);if(en(t)){let w=new Ln(null);return y.getNode().forEachChild(fo,(b,D)=>{w=w.set(new Cn(b),D)}),Sv(n,e,t,w,i,a,h,l)}return e}{let w=new Ln(null);return r.foreach((b,D)=>{const M=Wn(t,b);y.isCompleteForPath(M)&&(w=w.set(b,y.getNode().getChild(M)))}),Sv(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Yi.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function LI(n,e,t,r,i){const a=e.serverCache;return kI(n,yv(e,a.getNode(),a.isFullyInitialized()||en(t),a.isFiltered()),t,r,Ps,i)}(n,e,t.path,r,a)}const y=a.getChanges();return function LS(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Af(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(go(Af(e)))}}(e,l,y),{viewCache:l,changes:y}}(n.processor_,i,e,t,r);return function PI(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Nv(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Nv(n,e,t,r){return function gv(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function im(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Td(n,i,"child_removed",e,r,t),Td(n,i,"child_added",e,r,t),Td(n,i,"child_moved",a,r,t),Td(n,i,"child_changed",e,r,t),Td(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Pf,fm;class Ov{constructor(){this.views=new Map}}function Pv(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Rv(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(Rv(l,e,t,r));return a}}function HI(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=Mf(t,i?r:null),y=!1;h?y=!0:r instanceof Bt?(h=Cv(t,r),y=!1):(h=Bt.EMPTY_NODE,y=!1);const w=Tf(new Ma(h,y,!1),new Ma(r,i,!1));return new US(e,w)}return l}function $I(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Nu(n,e){let t=null;for(const r of n.views.values())t=t||Av(r,e);return t}function GI(n,e){return e._queryParams.loadsAllData()?hm(n):n.views.get(e._queryIdentifier)}function WI(n,e){return null!=GI(n,e)}function Ou(n){return null!=hm(n)}function hm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let zS=1;class zI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ln(null),this.pendingWriteTree_=function PS(){return{visibleWrites:yo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kv(n,e,t,r,i){return function AS(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=ql(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Md(n,new xa({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Na(n,e,t=!1){const r=function TI(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function MS(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Ur(h,r.path)?i=!1:Rs(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function SI(n){n.visibleWrites=AI(n.allWrites,RS,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=_v(n.visibleWrites,r.path):Qr(r.children,y=>{n.visibleWrites=_v(n.visibleWrites,Wn(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let a=new Ln(null);return null!=r.snap?a=a.set(vn(),!0):Qr(r.children,l=>{a=a.set(new Cn(l),!0)}),Md(n,new Dd(r.path,a,t))}return[]}function xd(n,e,t){return Md(n,new xa({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function kf(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||WI(l,e))){const y=function $S(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Ou(n);if("default"===i)for(const[y,w]of n.views.entries())l=l.concat(Mv(w,t,r)),Of(w)&&(n.views.delete(y),w.query._queryParams.loadsAllData()||a.push(w.query));else{const y=n.views.get(i);y&&(l=l.concat(Mv(y,t,r)),Of(y)&&(n.views.delete(i),y.query._queryParams.loadsAllData()||a.push(y.query)))}return h&&!Ou(n)&&a.push(new(function BS(){return(0,k.hu)(Pf,"Reference.ts has not been loaded"),Pf}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function jS(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=y.removed;if(h=y.events,!i){const b=-1!==w.findIndex(M=>M._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(a,(M,V)=>Ou(V));if(b&&!D){const M=n.syncPointTree_.subtree(a);if(!M.isEmpty()){const V=function xt(n){return n.fold((e,t,r)=>{if(t&&Ou(t))return[hm(t)];{let i=[];return t&&(i=$I(t)),Qr(r,(a,l)=>{i=i.concat(l)}),i}})}(M);for(let W=0;W<V.length;++W){const me=V[W],Me=me.query,nt=qS(n,me);n.listenProvider_.startListening(Lf(Me),Ql(n,Me),nt.hashFn,nt.onComplete)}}}!D&&w.length>0&&!r&&(b?n.listenProvider_.stopListening(Lf(e),null):w.forEach(M=>{const V=n.queryToTagMap.get(Lv(M));n.listenProvider_.stopListening(Lf(M),V)}))}!function KS(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Lv(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function Fv(n,e,t,r){const i=gm(n,r);if(null!=i){const a=mm(i),l=a.path,h=a.queryId,y=Ni(l,e);return XI(n,l,new xa(bd(h),y,t))}return[]}function pm(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(M,V)=>{const W=Ni(M,i);a=a||Nu(V,W),l=l||Ou(V)});let y,h=n.syncPointTree_.get(i);h?(l=l||Ou(h),a=a||Nu(h,vn())):(h=new Ov,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?y=!0:(y=!1,a=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((V,W)=>{const me=Nu(W,vn());me&&(a=a.updateImmediateChild(V,me))}));const w=WI(h,e);if(!w&&!e._queryParams.loadsAllData()){const M=Lv(e);(0,k.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const V=function ZS(){return zS++}();n.queryToTagMap.set(M,V),n.tagToQueryMap.set(V,M)}let D=function HS(n,e,t,r,i,a){const l=HI(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function xv(n,e){n.eventRegistrations_.push(e)}(l,t),function BI(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(zn,(a,l)=>{r.push(ta(a,l))}),t.isFullyInitialized()&&r.push(go(t.getNode())),Nv(n,r,t.getNode(),e)}(l,t)}(h,e,t,Ev(n.pendingWriteTree_,i),a,y);if(!w&&!l&&!r){const M=GI(h,e);D=D.concat(function Rd(n,e,t){const r=e._path,i=Ql(n,e),a=qS(n,t),l=n.listenProvider_.startListening(Lf(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Ou(h.value),"If we're adding a query, it shouldn't be shadowed");else{const y=h.fold((w,b,D)=>{if(!en(w)&&b&&Ou(b))return[hm(b).query];{let M=[];return b&&(M=M.concat($I(b).map(V=>V.query))),Qr(D,(V,W)=>{M=M.concat(W)}),M}});for(let w=0;w<y.length;++w){const b=y[w];n.listenProvider_.stopListening(Lf(b),Ql(n,b))}}return l}(n,e,M))}return D}function Ff(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Nu(h,Ni(l,e));if(w)return w});return Iv(i,e,a,t,!0)}function Md(n,e){return JI(e,n.syncPointTree_,null,Ev(n.pendingWriteTree_,vn()))}function JI(n,e,t,r){if(en(n.path))return Yl(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=Nu(i,vn()));let a=[];const l=sn(n.path),h=n.operationForChild(l),y=e.children.get(l);if(y&&h){const w=t?t.getImmediateChild(l):null,b=_o(r,l);a=a.concat(JI(h,y,w,b))}return i&&(a=a.concat(Pv(i,n,r,t))),a}}function Yl(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=Nu(i,vn()));let a=[];return e.children.inorderTraversal((l,h)=>{const y=t?t.getImmediateChild(l):null,w=_o(r,l),b=n.operationForChild(l);b&&(a=a.concat(Yl(b,h,y,w)))}),i&&(a=a.concat(Pv(i,n,r,t))),a}function qS(n,e){const t=e.query,r=Ql(n,t);return{hashFn:()=>(function VI(n){return n.viewCache_.serverCache.getNode()}(e)||Bt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function YI(n,e,t){const r=gm(n,t);if(r){const i=mm(r),a=i.path,l=i.queryId,h=Ni(a,e);return XI(n,a,new Df(bd(l),h))}return[]}(n,t._path,r):function ZI(n,e){return Md(n,new Df({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function GE(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return kf(n,t,null,a)}}}}function Ql(n,e){const t=Lv(e);return n.queryToTagMap.get(t)}function Lv(n){return n._path.toString()+"$"+n._queryIdentifier}function gm(n,e){return n.tagToQueryMap.get(e)}function mm(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function XI(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Pv(r,t,Ev(n.pendingWriteTree_,e),null)}function Lf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function WS(){return(0,k.hu)(fm,"Reference.ts has not been loaded"),fm}())(n._repo,n._path):n}class Vv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Vv(t)}node(){return this.node_}}class Nd{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wn(this.path_,e);return new Nd(this.syncTree_,t)}node(){return Ff(this.syncTree_,this.path_)}}const rr=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?bO(n[".sv"],e,t):"object"==typeof n[".sv"]?eC(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},bO=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},eC=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},Uv=function(n,e,t,r){return _m(e,new Nd(t,n),r)},Bv=function(n,e,t){return _m(n,new Vv(e),t)};function _m(n,e,t){const r=n.getPriority().val(),i=rr(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=rr(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new fd(h,nr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new fd(i))),l.forEachChild(zn,(h,y)=>{const w=_m(y,e.getImmediateChild(h),t);w!==y&&(a=a.updateImmediateChild(h,w))}),a}}class vm{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Vf(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=sn(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new vm(i,r,a),t=Mn(t),i=sn(t)}return r}function Pu(n){return n.node.value}function jv(n,e){n.node.value=e,Od(n)}function tC(n){return n.node.childCount>0}function ku(n,e){Qr(n.node.children,(t,r)=>{e(new vm(t,n,r))})}function nC(n,e,t,r){t&&!r&&e(n),ku(n,i=>{nC(i,e,!0,r)}),t&&r&&e(n)}function Uf(n){return new Cn(null===n.parent?n.name:Uf(n.parent)+"/"+n.name)}function Od(n){null!==n.parent&&function rC(n,e,t){const r=function YS(n){return void 0===Pu(n)&&!tC(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Od(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Od(n))}(n.parent,n.name,n)}const iC=/[\[\].#$\/\u0000-\u001F\u007F]/,sC=/[\[\].#$\u0000-\u001F\u007F]/,Hv=10485760,Fu=function(n){return"string"==typeof n&&0!==n.length&&!iC.test(n)},Pd=function(n){return"string"==typeof n&&0!==n.length&&!sC.test(n)},Bf=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ud(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},ra=function(n,e,t,r){r&&void 0===e||kd((0,k.gK)(n,"value"),e,t)},kd=function(n,e,t){const r=t instanceof Cn?new hS(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Hl(r));if("function"==typeof e)throw new Error(n+"contains a function "+Hl(r)+" with contents = "+e.toString());if(ud(e))throw new Error(n+"contains "+e.toString()+" "+Hl(r));if("string"==typeof e&&e.length>Hv/3&&(0,k.ug)(e)>Hv)throw new Error(n+"contains a string greater than "+Hv+" utf8 bytes "+Hl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Qr(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Fu(l)))throw new Error(n+" contains an invalid key ("+l+") "+Hl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function IO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),pI(n)})(r,l),kd(n,h,r),function fI(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Hl(r)+" in addition to actual children.")}},$v=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Qr(e,(l,h)=>{const y=new Cn(l);if(kd(i,h,Wn(t,y)),".priority"===rv(y)&&!Bf(h))throw new Error(i+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=mf(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Fu(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(ea);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Rs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Gv=function(n,e,t){if(!t||void 0!==e){if(ud(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Bf(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fd=function(n,e,t,r){if(!(r&&void 0===t||Fu(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},jf=function(n,e,t,r){if(!(r&&void 0===t||Pd(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vo=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},eA=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Fu(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Pd(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class DO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wv(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!yf(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function zv(n,e,t){Wv(n,t),aC(n,r=>yf(r,e))}function mi(n,e,t){Wv(n,t),aC(n,r=>Rs(r,e)||Rs(e,r))}function aC(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(tA(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function tA(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ul&&Vr("event: "+t.toString()),Ta(r)}}}const qv="repo_interrupt";class nA{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new DO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bf(),this.transactionQueueTree_=new vm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uC(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function $f(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:uC(n)})}function lC(n,e,t,r,i){n.dataUpdateCount++;const a=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const y=(0,k.UI)(t,w=>nr(w));l=function QI(n,e,t,r){const i=gm(n,r);if(i){const a=mm(i),l=a.path,h=a.queryId,y=Ni(l,e),w=Ln.fromObject(t);return XI(n,l,new xu(bd(h),y,w))}return[]}(n.serverSyncTree_,a,y,i)}else{const y=nr(t);l=Fv(n.serverSyncTree_,a,y,i)}else if(r){const y=(0,k.UI)(t,w=>nr(w));l=function KI(n,e,t){const r=Ln.fromObject(t);return Md(n,new xu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,y)}else{const y=nr(t);l=xd(n.serverSyncTree_,a,y)}let h=a;l.length>0&&(h=Vd(n,a)),mi(n.eventQueue_,h,l)}function Kv(n,e){Zv(n,"connected",e),!1===e&&function cC(n){Ld(n,"onDisconnectEvents");const e=$f(n),t=bf();om(n.onDisconnect_,vn(),(i,a)=>{const l=Uv(i,a,n.serverSyncTree_,e);zl(t,i,l)});let r=[];om(t,vn(),(i,a)=>{r=r.concat(xd(n.serverSyncTree_,i,a));const l=tw(n,i);Vd(n,l)}),n.onDisconnect_=bf(),mi(n.eventQueue_,vn(),r)}(n)}function Zv(n,e,t){const r=new Cn("/.info/"+e),i=nr(t);n.infoData_.updateSnapshot(r,i);const a=xd(n.infoSyncTree_,r,i);mi(n.eventQueue_,r,a)}function Oa(n){return n.nextWriteId_++}function wm(n,e,t,r,i){Ld(n,"set",{path:e.toString(),value:t,priority:r});const a=$f(n),l=nr(t,r),h=Ff(n.serverSyncTree_,e),y=Bv(l,h,a),w=Oa(n),b=kv(n.serverSyncTree_,e,y,w,!0);Wv(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(M,V)=>{const W="ok"===M;W||Yr("set at "+e+" failed: "+M);const me=Na(n.serverSyncTree_,w,!W);mi(n.eventQueue_,e,me),Lu(0,i,M,V)});const D=tw(n,e);Vd(n,D),mi(n.eventQueue_,D,[])}function aA(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&sm(n.onDisconnect_,e),Lu(0,t,r,i)})}function Yv(n,e,t,r){const i=nr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&zl(n.onDisconnect_,e,i),Lu(0,r,a,l)})}function Em(n,e,t){let r;r=".info"===sn(e._path)?kf(n.infoSyncTree_,e,t):kf(n.serverSyncTree_,e,t),zv(n.eventQueue_,e._path,r)}function Jv(n){n.persistentConnection_&&n.persistentConnection_.interrupt(qv)}function Ld(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vr(t,...e)}function Lu(n,e,t,r){e&&Ta(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function ew(n,e,t){return Ff(n.serverSyncTree_,e,t)||Bt.EMPTY_NODE}function Gf(n,e=n.transactionQueueTree_){if(e||Im(n,e),Pu(e)){const t=hC(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function dA(n,e,t){const r=t.map(w=>w.currentWriteId),i=ew(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const b=t[w];(0,k.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const D=Ni(e,b.path);a=a.updateChild(D,b.currentOutputSnapshotRaw)}const h=a.val(!0),y=e;n.server_.put(y.toString(),h,w=>{Ld(n,"transaction put response",{path:y.toString(),status:w});let b=[];if("ok"===w){const D=[];for(let M=0;M<t.length;M++)t[M].status=2,b=b.concat(Na(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&D.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();Im(n,Vf(n.transactionQueueTree_,e)),Gf(n,n.transactionQueueTree_),mi(n.eventQueue_,e,b);for(let M=0;M<D.length;M++)Ta(D[M])}else{if("datastale"===w)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Yr("transaction at "+y.toString()+" failed: "+w);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=w}Vd(n,e)}},l)}(n,Uf(e),t)}else tC(e)&&ku(e,t=>{Gf(n,t)})}function Vd(n,e){const t=dC(n,e),r=Uf(t);return function hA(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const y=e[h],w=Ni(t,y.path);let D,b=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)b=!0,D=y.abortReason,i=i.concat(Na(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)b=!0,D="maxretry",i=i.concat(Na(n.serverSyncTree_,y.currentWriteId,!0));else{const M=ew(n,y.path,l);y.currentInputSnapshot=M;const V=e[h].update(M.val());if(void 0!==V){kd("transaction failed: Data returned ",V,y.path);let W=nr(V);"object"==typeof V&&null!=V&&(0,k.r3)(V,".priority")||(W=W.updatePriority(M.getPriority()));const Me=y.currentWriteId,nt=$f(n),Ct=Bv(W,M,nt);y.currentOutputSnapshotRaw=W,y.currentOutputSnapshotResolved=Ct,y.currentWriteId=Oa(n),l.splice(l.indexOf(Me),1),i=i.concat(kv(n.serverSyncTree_,y.path,Ct,y.currentWriteId,y.applyLocally)),i=i.concat(Na(n.serverSyncTree_,Me,!0))}else b=!0,D="nodata",i=i.concat(Na(n.serverSyncTree_,y.currentWriteId,!0))}mi(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}Im(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Ta(r[h]);Gf(n,n.transactionQueueTree_)}(n,hC(n,t),r),r}function dC(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Pu(r);)r=Vf(r,t),t=sn(e=Mn(e));return r}function hC(n,e){const t=[];return fC(n,e,t),t.sort((r,i)=>r.order-i.order),t}function fC(n,e,t){const r=Pu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ku(e,i=>{fC(n,i,t)})}function Im(n,e){const t=Pu(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,jv(e,t.length>0?t:void 0)}ku(e,r=>{Im(n,r)})}function tw(n,e){const t=Uf(dC(n,e)),r=Vf(n.transactionQueueTree_,e);return function QS(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Cm(n,i)}),Cm(n,r),nC(r,i=>{Cm(n,i)}),t}function Cm(n,e){const t=Pu(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Na(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?jv(e,void 0):t.length=a+1,mi(n.eventQueue_,Uf(e),i);for(let l=0;l<r.length;l++)Ta(r[l])}}const nw=function(n,e){const t=gC(n),r=t.namespace;return"firebase.com"===t.domain&&co(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&co("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gf(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Cn(t.pathString)}},gC=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",y=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let b=n.indexOf("/");-1===b&&(b=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(b,D)),b<D&&(i=function pC(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,D)));const M=function fA(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Yr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,y=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const W=e.indexOf(".");r=e.substring(0,W).toLowerCase(),t=e.substring(W+1),a=r}"ns"in M&&(a=M.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class mC{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class yC{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bm{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return aA(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){vo("OnDisconnect.remove",this._path);const e=new k.BH;return Yv(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){vo("OnDisconnect.set",this._path),ra("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return Yv(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){vo("OnDisconnect.setWithPriority",this._path),ra("OnDisconnect.setWithPriority",e,this._path,!1),Gv("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function uA(n,e,t,r,i){const a=nr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&zl(n.onDisconnect_,e,a),Lu(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){vo("OnDisconnect.update",this._path),$v("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function Qv(n,e,t,r){if((0,k.xb)(t))return Vr("onDisconnect().update() called with empty data.  Don't do anything."),void Lu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Qr(t,(l,h)=>{const y=nr(h);zl(n.onDisconnect_,Wn(e,l),y)}),Lu(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class yi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return en(this._path)?null:rv(this._path)}get ref(){return new ks(this._repo,this._path)}get _queryIdentifier(){const e=dv(this._queryParams),t=ls(e);return"{}"===t?"default":t}get _queryObject(){return dv(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof yi))return!1;const t=this._repo===e._repo,r=yf(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function dI(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Wf(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ia(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===fo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==vu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ri)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===zn){if(null!=e&&!Bf(e)||null!=t&&!Bf(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof lv||n.getIndex()===gd,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Dm(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ks extends yi{constructor(e,t){super(e,t,new Aa,!1)}get parent(){const e=hI(this._path);return null===e?null:new ks(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pa{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=Fs(this.ref,e);return new Pa(this._node.getChild(t),r,zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Pa(i,Fs(this.ref,r),zn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _C(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Fs(n._root,e):n._root}function iw(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=nw(e,n._repo.repoInfo_.nodeAdmin);eA("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&co("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),_C(n,t.path.toString())}function Fs(n,e){return null===sn((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jf("child","path",t,!1)):jf("child","path",e,!1),new ks(n._repo,Wn(n._path,e));var t}function Tm(n,e){n=(0,k.m9)(n),vo("set",n._path),ra("set",e,n._path,!1);const t=new k.BH;return wm(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ow(n,e){$v("update",e,n._path,!1);const t=new k.BH;return function oA(n,e,t,r){Ld(n,"update",{path:e.toString(),value:t});let i=!0;const a=$f(n),l={};if(Qr(t,(h,y)=>{i=!1,l[h]=Uv(Wn(e,h),nr(y),n.serverSyncTree_,a)}),i)Vr("update() called with empty data.  Don't do anything."),Lu(0,r,"ok",void 0);else{const h=Oa(n),y=function qI(n,e,t,r){!function xS(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=xf(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Ln.fromObject(t);return Md(n,new xu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);Wv(n.eventQueue_,y),n.server_.merge(e.toString(),t,(w,b)=>{const D="ok"===w;D||Yr("update at "+e+" failed: "+w);const M=Na(n.serverSyncTree_,h,!D),V=M.length>0?Vd(n,e):e;mi(n.eventQueue_,V,M),Lu(0,r,w,b)}),Qr(t,w=>{const b=tw(n,Wn(e,w));Vd(n,b)}),mi(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yA(n){n=(0,k.m9)(n);const e=new rw(()=>{}),t=new Ud(e);return function sA(n,e,t){const r=function Zl(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,b)=>{const D=Ni(w,t);r=r||Nu(b,D)});let i=n.syncPointTree_.get(t);i?r=r||Nu(i,vn()):(i=new Ov,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Ma(r,!0,!1):null;return function UI(n){return Af(n.viewCache_)}(HI(i,e,Ev(n.pendingWriteTree_,e._path),a?l.getNode():Bt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=nr(i).withIndex(e._queryParams.getIndex());let l;if(pm(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=xd(n.serverSyncTree_,e._path,a);else{const h=Ql(n.serverSyncTree_,e);l=Fv(n.serverSyncTree_,e._path,a,h)}return mi(n.eventQueue_,e._path,l),kf(n.serverSyncTree_,e,t,null,!0),a},i=>(Ld(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Pa(r,new ks(n._repo,n._path),n._queryParams.getIndex()))}class Ud{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new mC("value",this,new Pa(e.snapshotNode,new ks(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yC(this,e,t):null}matches(e){return e instanceof Ud&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Bd{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yC(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Fs(new ks(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new mC(e.type,this,new Pa(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Bd&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jd(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const y=t,w=(b,D)=>{Em(n._repo,n,h),y(b,D)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new rw(t,a||void 0),h="value"===e?new Ud(l):new Bd(e,l);return function lA(n,e,t){let r;r=".info"===sn(e._path)?pm(n.infoSyncTree_,e,t):pm(n.serverSyncTree_,e,t),zv(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Em(n._repo,n,h)}function Sm(n,e,t,r){return jd(n,"value",e,t,r)}function aw(n,e,t,r){return jd(n,"child_added",e,t,r)}function uw(n,e,t,r){return jd(n,"child_changed",e,t,r)}function vC(n,e,t,r){return jd(n,"child_moved",e,t,r)}function wC(n,e,t,r){return jd(n,"child_removed",e,t,r)}function EC(n,e,t){let r=null;const i=t?new rw(t):null;"value"===e?r=new Ud(i):e&&(r=new Bd(e,i)),Em(n._repo,n,r)}class wo{}class lw extends wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ra("endAt",this._value,e._path,!0);const t=Au(e._queryParams,this._value,this._key);if(Dm(t),ia(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yi(e._repo,e._path,t,e._orderByCalled)}}class IC extends wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ra("endBefore",this._value,e._path,!1);const t=function Id(n,e,t){let r,i;return n.index_===fo?("string"==typeof e&&(e=EI(e)),i=Au(n,e,t)):(r=null==t?vu:EI(t),i=Au(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Dm(t),ia(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new yi(e._repo,e._path,t,e._orderByCalled)}}class CC extends wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ra("startAt",this._value,e._path,!0);const t=Su(e._queryParams,this._value,this._key);if(Dm(t),ia(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new yi(e._repo,e._path,t,e._orderByCalled)}}class xO extends wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ra("startAfter",this._value,e._path,!1);const t=function Ed(n,e,t){let r;if(n.index_===fo)"string"==typeof e&&(e=rm(e)),r=Su(n,e,t);else{let i;i=null==t?Ri:rm(t),r=Su(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Dm(t),ia(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new yi(e._repo,e._path,t,e._orderByCalled)}}class wA extends wo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new yi(e._repo,e._path,function vd(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class IA extends wo{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new yi(e._repo,e._path,function wd(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class bA extends wo{constructor(e){super(),this._path=e}_apply(e){Wf(e,"orderByChild");const t=new Cn(this._path);if(en(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new lv(t),i=If(e._queryParams,r);return ia(i),new yi(e._repo,e._path,i,!0)}}class TA extends wo{_apply(e){Wf(e,"orderByKey");const t=If(e._queryParams,fo);return ia(t),new yi(e._repo,e._path,t,!0)}}class AA extends wo{_apply(e){Wf(e,"orderByPriority");const t=If(e._queryParams,zn);return ia(t),new yi(e._repo,e._path,t,!0)}}class MA extends wo{_apply(e){Wf(e,"orderByValue");const t=If(e._queryParams,gd);return ia(t),new yi(e._repo,e._path,t,!0)}}class bC extends wo{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ra("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lw(this._value,this._key)._apply(new CC(this._value,this._key)._apply(e))}}function Ls(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function jI(n){(0,k.hu)(!Pf,"__referenceConstructor has already been defined"),Pf=n})(ks),function GS(n){(0,k.hu)(!fm,"__referenceConstructor has already been defined"),fm=n}(ks);const Am={};function NA(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||co("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,w,l=nw(a,i),h=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(y=!0,a=`http://${w}?ns=${h.namespace}`,l=nw(a,i),h=l.repoInfo):y=!l.repoInfo.secure;const b=i&&y?new zg(zg.OWNER):new $_(n.name,n.options,e);eA("Invalid Firebase Database URL",l),en(l.path)||co("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function PA(n,e,t,r){let i=Am[e.name];i||(i={},Am[e.name]=i);let a=i[n.toURLString()];return a&&co("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new nA(n,false,t,r),i[n.toURLString()]=a,a}(h,n,b,new H_(n.name,t));return new FA(D,n)}class FA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rA(n,e,t){if(n.stats_=JE(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Cf(n.repoInfo_,(r,i,a,l)=>{lC(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Kv(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Tu(n.repoInfo_,e,(r,i,a,l)=>{lC(n,r,i,a,l)},r=>{Kv(n,r)},r=>{!function iA(n,e){Qr(e,(t,r)=>{Zv(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function vO(n,e){const t=n.toString();return QE[t]||(QE[t]=e()),QE[t]}(n.repoInfo_,()=>new fv(n.stats_,n.server_)),n.infoData_=new II,n.infoSyncTree_=new zI({startListening:(r,i,a,l)=>{let h=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(h=xd(n.infoSyncTree_,r._path,y),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Zv(n,"connected",!1),n.serverSyncTree_=new zI({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,y)=>{const w=l(h,y);mi(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ks(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function OA(n,e){const t=Am[e];(!t||t[n.key]!==n)&&co(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Jv(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&co("Cannot call "+e+" on a deleted database.")}}function AC(){sI.IS_TRANSPORT_INITIALIZED&&Yr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qf(){AC(),ho.forceDisallow()}function LA(){AC(),Xo.forceDisallow(),ho.forceAllow()}function Kf(n,e){HE(n,e)}const BA={".sv":"timestamp"};class Mm{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Tu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Tu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function UA(n){QT(lo.SDK_VERSION),(0,lo._registerComponent)(new uo.wA("database",(e,{instanceIdentifier:t})=>NA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,lo.registerVersion)(YT,VE,n),(0,lo.registerVersion)(YT,VE,"esm2017")}();const RC=new Jo.Yd("@firebase/database-compat"),NC=function(n){RC.warn("FIREBASE WARNING: "+n)};class hw{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,NC("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class fw{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ka{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),jf("DataSnapshot.child","path",e,!1),new ka(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),jf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ka(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Oi(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Br{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Br.getCancelAndContextArgs_("Query.on",r,i),h=(w,b)=>{t.call(l.context,new ka(this.database,w),b)};h.userCallback=t,h.context=l.context;const y=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return Sm(this._delegate,h,y),t;case"child_added":return aw(this._delegate,h,y),t;case"child_removed":return wC(this._delegate,h,y),t;case"child_changed":return uw(this._delegate,h,y),t;case"child_moved":return vC(this._delegate,h,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,EC(this._delegate,e,i)}else EC(this._delegate,e)}get(){return yA(this._delegate).then(e=>new ka(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Br.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(w,b)=>{const D=new ka(this.database,w);t&&t.call(a.context,D,b),l.resolve(D)};h.userCallback=t,h.context=a.context;const y=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":Sm(this._delegate,h,y,{onlyOnce:!0});break;case"child_added":aw(this._delegate,h,y,{onlyOnce:!0});break;case"child_removed":wC(this._delegate,h,y,{onlyOnce:!0});break;case"child_changed":uw(this._delegate,h,y,{onlyOnce:!0});break;case"child_moved":vC(this._delegate,h,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Br(this.database,Ls(this._delegate,function EA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new wA(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Br(this.database,Ls(this._delegate,function CA(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new IA(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Br(this.database,Ls(this._delegate,function DA(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return jf("orderByChild","path",n,!1),new bA(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Br(this.database,Ls(this._delegate,function SA(){return new TA}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Br(this.database,Ls(this._delegate,function xA(){return new AA}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Br(this.database,Ls(this._delegate,function zf(){return new MA}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Br(this.database,Ls(this._delegate,function AO(n=null,e){return Fd("startAt","key",e,!0),new CC(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Br(this.database,Ls(this._delegate,function vA(n,e){return Fd("startAfter","key",e,!0),new xO(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Br(this.database,Ls(this._delegate,function SO(n,e){return Fd("endAt","key",e,!0),new lw(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Br(this.database,Ls(this._delegate,function _A(n,e){return Fd("endBefore","key",e,!0),new IC(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Br(this.database,Ls(this._delegate,function DC(n,e){return Fd("equalTo","key",e,!0),new bC(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Br))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Oi(this.database,new ks(this._delegate._repo,this._delegate._path))}}class Oi extends Br{constructor(e,t){super(e,new yi(t._repo,t._path,new Aa,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Oi(this.database,Fs(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Oi(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Oi(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=Tm(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,NC("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vo("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=ow(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function mA(n,e,t){if(vo("setWithPriority",n._path),ra("setWithPriority",e,n._path,!1),Gv("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return wm(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function TO(n){return vo("remove",n._path),Tm(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function HA(n,e,t){var r;if(n=(0,k.m9)(n),vo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,h=Sm(n,()=>{});return function Xv(n,e,t,r,i,a){Ld(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:L_(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=ew(n,e,void 0);l.currentInputSnapshot=h;const y=l.update(h.val());if(void 0===y)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{kd("transaction failed: Data returned ",y,l.path),l.status=0;const w=Vf(n.transactionQueueTree_,e),b=Pu(w)||[];let D;b.push(l),jv(w,b),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(D=(0,k.DV)(y,".priority"),(0,k.hu)(Bf(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(Ff(n.serverSyncTree_,e)||Bt.EMPTY_NODE).getPriority().val();const M=$f(n),V=nr(y,D),W=Bv(V,h,M);l.currentOutputSnapshotRaw=V,l.currentOutputSnapshotResolved=W,l.currentWriteId=Oa(n);const me=kv(n.serverSyncTree_,e,W,l.currentWriteId,l.applyLocally);mi(n.eventQueue_,e,me),Gf(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,w,b)=>{let D=null;y?a.reject(y):(D=new Pa(b,new ks(n._repo,n._path),zn),a.resolve(new Mm(w,D)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new fw(a.committed,new ka(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function sw(n,e){n=(0,k.m9)(n),vo("setPriority",n._path),Gv("setPriority",e,!1);const t=new k.BH;return wm(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function gA(n,e){n=(0,k.m9)(n),vo("push",n._path),ra("push",e,n._path,!0);const t=uC(n._repo),r=CS(t),i=Fs(n,r),a=Fs(n,r);let l;return l=null!=e?Tm(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Oi(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Oi(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return vo("Reference.onDisconnect",this._delegate._path),new hw(new bm(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Zf{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qf,forceLongPolling:LA}}useEmulator(e,t,r={}){!function Eo(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&co("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&co('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new zg(zg.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new zg(l)}!function RA(n,e,t,r){n.repoInfo_=new gf(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Oi){const t=iw(this._delegate,e.toString());return new Oi(this,t)}{const t=_C(this._delegate,e);return new Oi(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=iw(this._delegate,e);return new Oi(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function VA(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),Jv(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function cw(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function cA(n){n.persistentConnection_&&n.persistentConnection_.resume(qv)}(n._repo)}(this._delegate)}}Zf.ServerValue={TIMESTAMP:function jA(){return BA}(),increment:n=>function xm(n){return{".sv":{increment:n}}}(n)};var zA=Object.freeze({__proto__:null,initStandalone:function WA({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){QT(t);const l=new uo.zt("auth-internal",new uo.H0("database-standalone"));return l.setComponent(new uo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Zf(NA(n,l,void 0,e,a),n),namespace:i}}});const qA=Zf.ServerValue;!function OC(n){n.INTERNAL.registerComponent(new uo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Zf(i,r)},"PUBLIC").setServiceProps({Reference:Oi,Query:Br,Database:Zf,DataSnapshot:ka,enableLogging:Kf,INTERNAL:zA,ServerValue:qA}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(LE.Z);var Hd=P(5363),PC=P(6063);class KA extends is.x{constructor(e=1/0,t=1/0,r=PC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let y=1;y<r.length&&r[y]<=l;y+=2)h=y;h&&r.splice(0,h+1)}}}function pw(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,F_.B)({connector:()=>new KA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function gw(n,e){return(0,su.m)(e)?lr(()=>n,e):lr(()=>n)}var mw=P(9468),Rm=P(5867);const FC=new Map,nx={activated:!1,tokenObservers:[]},rx={initialized:!1,enabled:!1};function Sr(n){return FC.get(n)||nx}function ds(n,e){FC.set(n,e)}function Jf(){return rx}class Gd{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function ix(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const si=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jC(n){if(!Sr(n).activated)throw si.create("use-before-activation",{appName:n.name})}function vw(n,e){return ww.apply(this,arguments)}function ww(){return(ww=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const V=yield l.getHeartbeatsHeader();V&&(a["X-Firebase-Client"]=V)}const h={method:"POST",body:JSON.stringify(e),headers:a};let y,w;try{y=yield fetch(n,h)}catch(V){throw si.create("fetch-network-error",{originalErrorMessage:null===(r=V)||void 0===r?void 0:r.message})}if(200!==y.status)throw si.create("fetch-status-error",{httpStatus:y.status});try{w=yield y.json()}catch(V){throw si.create("fetch-parse-error",{originalErrorMessage:null===(i=V)||void 0===i?void 0:i.message})}const b=w.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const D=1e3*Number(b[1]),M=Date.now();return{token:w.token,expireTimeMillis:M+D,issuedAtTimeMillis:M}})).apply(this,arguments)}function sx(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Xf="firebase-app-check-store";let ep=null;function KC(){return ep||(ep=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(si.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Xf,{keyPath:"compositeKey"})}}catch(r){e(si.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ep)}function Ew(){return(Ew=(0,Ee.Z)(function*(n,e){const r=(yield KC()).transaction(Xf,"readwrite"),a=r.objectStore(Xf).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=y=>{l()},r.onerror=y=>{var w;h(si.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const km=new Jo.Yd("@firebase/app-check");function tb(n,e){return(0,k.hl)()?function YC(n,e){return function XC(n,e){return Ew.apply(this,arguments)}(function ax(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{km.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ux(){return Jf().enabled}function tp(){return rb.apply(this,arguments)}function rb(){return(rb=(0,Ee.Z)(function*(){const n=Jf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fm={error:"UNKNOWN_ERROR"};function sb(n){return k.US.encodeString(JSON.stringify(n),!1)}function np(n){return ob.apply(this,arguments)}function ob(){return(ob=(0,Ee.Z)(function*(n,e=!1){const t=n.app;jC(t);const r=Sr(t);let a,i=r.token;if(i&&!ip(i)&&(ds(t,Object.assign(Object.assign({},r),{token:void 0})),i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(ip(y)?i=y:yield tb(t,void 0))}if(!e&&i&&ip(i))return{token:i.token};let h,l=!1;if(ux()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vw(sx(t,yield tp()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const y=yield r.exchangeTokenPromise;return yield tb(t,y),ds(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?km.warn(y.message):km.error(y),a=y}return i?a?h=ip(i)?{token:i.token,internalError:a}:lb(a):(h={token:i.token},ds(t,Object.assign(Object.assign({},r),{token:i})),yield tb(t,i)):h=lb(a),l&&lx(t,h),h})).apply(this,arguments)}function Lm(n,e){const t=Sr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ds(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ab(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function ub(n){const{app:e}=n;return new Gd((0,Ee.Z)(function*(){let r;if(r=Sr(e).token?yield np(n,!0):yield np(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ds(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lx(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ip(n){return n.expireTimeMillis-Date.now()>0}function lb(n){return{token:sb(Fm),error:n}}class cx{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)Lm(this.app,t.next);return Promise.resolve()}}const bw="app-check-internal";!function _x(){(0,lo._registerComponent)(new uo.wA("app-check",n=>function Vm(n,e){return new cx(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bw).initialize()})),(0,lo._registerComponent)(new uo.wA(bw,n=>function dx(n){return{getToken:e=>np(n,e),addTokenListener:e=>function rp(n,e,t,r){const{app:i}=n,a=Sr(i),l={next:t,error:r,type:e};if(ds(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&ip(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),ab(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ab(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,lo.registerVersion)("@firebase/app-check","0.5.16")}();class Wd{constructor(){return(0,Gn.vb)("app-check")}}typeof window<"u"&&window;var YO=P(127);const Gm=new p.OlP("angularfire2.auth.use-emulator"),Wm=new p.OlP("angularfire2.auth.settings"),zm=new p.OlP("angularfire2.auth.tenant-id"),qm=new p.OlP("angularfire2.auth.langugage-code"),Km=new p.OlP("angularfire2.auth.use-device-language"),zd=new p.OlP("angularfire.auth.persistence"),qd=(n,e,t,r,i,a,l,h)=>(0,pi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),l)for(const[w,b]of Object.entries(l))y.settings[w]=b;return h&&y.setPersistence(h),y},[t,r,i,a,l,h]);let Zm=(()=>{class n{constructor(t,r,i,a,l,h,y,w,b,D,M,V){const W=new is.x,me=vt(void 0).pipe((0,Hd.Q)(l.outsideAngular),lr(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,1277)))),(0,it.U)(()=>(0,pi.on)(t,a,r)),(0,it.U)(Me=>qd(Me,a,h,w,b,D,y,M)),pw({bufferSize:1,refCount:!1}));if(Kr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{me.pipe(eo()).subscribe();const nt=me.pipe(lr(Ut=>Ut.getRedirectResult().then(Gt=>Gt,()=>null)),Gn.iC,pw({bufferSize:1,refCount:!1})),Ct=me.pipe(lr(Ut=>new Zr.y(Gt=>({unsubscribe:a.runOutsideAngular(()=>Ut.onAuthStateChanged(an=>Gt.next(an),an=>Gt.error(an),()=>Gt.complete()))})))),Mt=me.pipe(lr(Ut=>new Zr.y(Gt=>({unsubscribe:a.runOutsideAngular(()=>Ut.onIdTokenChanged(an=>Gt.next(an),an=>Gt.error(an),()=>Gt.complete()))}))));this.authState=nt.pipe(gw(Ct),(0,mw.R)(l.outsideAngular),(0,Hd.Q)(l.insideAngular)),this.user=nt.pipe(gw(Mt),(0,mw.R)(l.outsideAngular),(0,Hd.Q)(l.insideAngular)),this.idToken=this.user.pipe(lr(Ut=>Ut?(0,Sn.D)(Ut.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(lr(Ut=>Ut?(0,Sn.D)(Ut.getIdTokenResult()):vt(null))),this.credential=(0,k_.T)(nt,W,this.authState.pipe(ei(Ut=>!Ut))).pipe((0,it.U)(Ut=>Ut?.user?Ut:null),(0,mw.R)(l.outsideAngular),(0,Hd.Q)(l.insideAngular))}return(0,pi.pX)(this,me,a,{spy:{apply:(Me,nt,Ct)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&Ct.then(Mt=>W.next(Mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pi.Dh),p.LFG(pi.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gn.HU),p.LFG(Gm,8),p.LFG(Wm,8),p.LFG(zm,8),p.LFG(qm,8),p.LFG(Km,8),p.LFG(zd,8),p.LFG(Wd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function _b(n){return null==n}function vb(n){return"function"==typeof n.set}function bx(n,e){return vb(e)?e:n.ref(e)}function Dx(n,e){if(function mb(n){return"string"==typeof n}(n))return e.stringCase();if(vb(n))return e.firebaseCase();if(function yb(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Kd(n,e,t="on",r=PE.z){return new Zr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,it.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,F_.B)())}function wb(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function JO(n,e){const{payload:t,prevKey:r,key:i}=e,a=wb(n,i),l=function Sx(n,e){if(_b(e))return 0;{const t=wb(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(y=>{const w={payload:y,type:"value",prevKey:h,key:y.key};return h=y.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function Ax(n){return(_b(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function xx(n,e,t){return function Tx(n,e,t){return Kd(n,"value","once",t).pipe(lr(r=>{const i=[vt(r)];return e.forEach(a=>i.push(Kd(n,a,"on",t))),(0,k_.T)(...i).pipe(to(JO,[]))}),kE())}(n,e=Ax(e),t)}function Mx(n,e,t){const r=(e=Ax(e)).map(i=>Kd(n,i,"on",t));return(0,k_.T)(...r)}function Eb(n,e){return function(r,i){return Dx(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Nx(n){return function(t){return t?Dx(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Vu(n,e){return function(){return Kd(n,"value","on",e)}}const Aw=new p.OlP("angularfire2.realtimeDatabaseURL"),xw=new p.OlP("angularfire2.database.use-emulator");let Ox=(()=>{class n{constructor(t,r,i,a,l,h,y,w,b,D,M,V,W,me,Me){this.schedulers=h;const nt=y,Ct=(0,pi.on)(t,l,r);w&&qd(Ct,l,b,M,V,W,D,me),this.database=(0,pi.cc)(`${Ct.name}.database.${i}`,"AngularFireDatabase",Ct.name,()=>{const Mt=l.runOutsideAngular(()=>Ct.database(i||void 0));return nt&&Mt.useEmulator(...nt),Mt},[nt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>bx(this.database,t));let a=i;return r&&(a=r(i)),function Ib(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Eb(r,"update"),set:Eb(r,"set"),push:i=>r.push(i),remove:Nx(r),snapshotChanges:i=>xx(n,i,t).pipe(Gn.iC),stateChanges:i=>Mx(n,i,t).pipe(Gn.iC),auditTrail:i=>function XO(n,e,t){return function Ym(n,e,t){return function Rx(n,e){return Kd(n,"value","on",e).pipe((0,it.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function ZT(...n){const e=(0,xi.jO)(n);return(0,br.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let y=0;y<i;y++)(0,Pc.Xf)(n[y]).subscribe((0,wr.x)(r,w=>{a[y]=w,!h&&!l[y]&&(l[y]=!0,(h=l.every(Qs.y))&&(l=null))},KT.Z));t.subscribe((0,wr.x)(r,y=>{if(h){const w=[y,...a];r.next(e?e(...w):w)}}))})}(e),(0,it.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(y=>y.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function gO(n){return(0,br.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,wr.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,it.U)(i=>i.actions))}(n,Mx(n,e).pipe(to((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Gn.iC),valueChanges:(i,a)=>xx(n,i,t).pipe((0,it.U)(h=>h.map(y=>a&&a.idField?Object.assign(Object.assign({},y.payload.val()),{[a.idField]:y.key}):y.payload.val())),Gn.iC)}}(a,this)}object(t){return function Cb(n,e){return{query:n,snapshotChanges:()=>Vu(n,e.schedulers.outsideAngular)().pipe(Gn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Vu(n,e.schedulers.outsideAngular)().pipe(Gn.iC,(0,it.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>bx(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pi.Dh),p.LFG(pi.xv,8),p.LFG(Aw,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gn.HU),p.LFG(xw,8),p.LFG(Zm,8),p.LFG(Gm,8),p.LFG(Wm,8),p.LFG(zm,8),p.LFG(qm,8),p.LFG(Km,8),p.LFG(zd,8),p.LFG(Wd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Qm=(()=>{class n{constructor(t){this.db=t,this.baseUrl="https://tacobellapp-aad01-default-rtdb.firebaseio.com/",this.cardsEndPoint="products"}getProducts(){return this.db.list("products").valueChanges}addProduct(t){this.db.list("products").push(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ox))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Px=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n}),n})(),Zd=(()=>{class n extends Px{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,features:[p.qOj]}),n})();const La=new p.OlP("NgValueAccessor"),kx={provide:La,useExisting:(0,p.Gpc)(()=>Xm),multi:!0},Lx=new p.OlP("CompositionEventMode");let Xm=(()=>{class n extends Px{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Fx(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(Lx,8))},n.\u0275dir=p.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&p.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[p._Bn([kx]),p.qOj]}),n})();const _i=new p.OlP("NgValidators"),Uu=new p.OlP("NgAsyncValidators");function ey(n){return function Va(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function ty(n){return null}function Rb(n){return null!=n}function jx(n){return(0,p.QGY)(n)?(0,Sn.D)(n):n}function Hx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function $x(n,e){return e.map(t=>t(n))}function Gx(n){return n.map(e=>function tP(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ob(n){return null!=n?function Nb(n){if(!n)return null;const e=n.filter(Rb);return 0==e.length?null:function(t){return Hx($x(t,e))}}(Gx(n)):null}function Pb(n){return null!=n?function Wx(n){if(!n)return null;const e=n.filter(Rb);return 0==e.length?null:function(t){return function Jm(...n){const e=(0,xi.jO)(n),{args:t,keys:r}=El(n),i=new Zr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let y=l,w=l;for(let b=0;b<l;b++){let D=!1;(0,Pc.Xf)(t[b]).subscribe((0,wr.x)(a,M=>{D||(D=!0,w--),h[b]=M},()=>y--,void 0,()=>{(!y||!D)&&(w||a.next(r?Rc(r,h):h),a.complete())}))}});return e?i.pipe(Bh(e)):i}($x(t,e).map(jx)).pipe((0,it.U)(Hx))}}(Gx(n)):null}function zx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function s(n){return n?Array.isArray(n)?n:[n]:[]}function o(n,e){return Array.isArray(n)?n.includes(e):n===e}function u(n,e){const t=s(e);return s(n).forEach(i=>{o(t,i)||t.push(i)}),t}function c(n,e){return s(e).filter(t=>!o(n,t))}class d{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ob(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class g extends d{get formDirective(){return null}get path(){return null}}class v extends d{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class I{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let A=(()=>{class n extends I{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(v,2))},n.\u0275dir=p.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[p.qOj]}),n})(),F=(()=>{class n extends I{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(g,10))},n.\u0275dir=p.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&p.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[p.qOj]}),n})();const Xl="VALID",Qd="INVALID",Bu="PENDING",Lw="DISABLED";function Zx(n){return(kb(n)?n.validators:n)||null}function nP(n){return Array.isArray(n)?Ob(n):n||null}function Yx(n,e){return(kb(e)?e.asyncValidators:n)||null}function rP(n){return Array.isArray(n)?Pb(n):n||null}function kb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class oP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nP(this._rawValidators),this._composedAsyncValidatorFn=rP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xl}get invalid(){return this.status===Qd}get pending(){return this.status==Bu}get disabled(){return this.status===Lw}get enabled(){return this.status!==Lw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nP(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rP(e)}addValidators(e){this.setValidators(u(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(u(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c(e,this._rawAsyncValidators))}hasValidator(e){return o(this._rawValidators,e)}hasAsyncValidator(e){return o(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xl||this.status===Bu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lw:Xl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bu,this._hasOwnPendingAsyncValidator=!0;const t=jx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Lw:this.errors?Qd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bu)?Bu:this._anyControlsHaveStatus(Qd)?Qd:Xl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Qx extends oP{constructor(e,t,r){super(Zx(t),Yx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function sP(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new p.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function iP(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new p.vHH(1e3,"");if(!r[t])throw new p.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function Vw(n,e){Jx(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function LV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aP(n,e)})}(n,e),function UV(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function VV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aP(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function FV(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Vb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jx(n,e){const t=function qx(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(zx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Kx(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(zx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Vb(e._rawValidators,i),Vb(e._rawAsyncValidators,i)}function aP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const GV={provide:g,useExisting:(0,p.Gpc)(()=>Bw)},Uw=(()=>Promise.resolve(null))();let Bw=(()=>{class n extends g{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new Qx({},Ob(t),Pb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Uw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Vw(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Uw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Uw.then(()=>{const r=this._findContainer(t.path),i=new Qx({});(function uP(n,e){Jx(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Uw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Uw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function cP(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(_i,10),p.Y36(Uu,10))},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&p.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([GV]),p.qOj]}),n})();function dP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function hP(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const fP=class extends oP{constructor(e=null,t,r){super(Zx(t),Yx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kb(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=hP(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){hP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},qV={provide:v,useExisting:(0,p.Gpc)(()=>tM)},mP=(()=>Promise.resolve(null))();let tM=(()=>{class n extends v{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new fP,this._registered=!1,this.update=new p.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function eM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Xm?t=a:function HV(n){return Object.getPrototypeOf(n.constructor)===Zd}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Xx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,p.D6c)(r);mP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Fb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(g,9),p.Y36(_i,10),p.Y36(Uu,10),p.Y36(La,10),p.Y36(p.sBO,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([qV]),p.qOj,p.TTD]}),n})(),nM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),_P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();const rM=new p.OlP("NgModelWithFormControlWarning");let op=(()=>{class n{constructor(){this._validator=ty}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ty,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,features:[p.TTD]}),n})();const dU={provide:_i,useExisting:(0,p.Gpc)(()=>Bb),multi:!0};let Bb=(()=>{class n extends op{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=p.D6c,this.createValidator=t=>ey}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275dir=p.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&p.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([dU]),p.qOj]}),n})(),kP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[_P]}),n})(),yU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[kP]}),n})(),_U=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[kP]}),n})(),wU=(()=>{class n{constructor(t){this.cs=t}ngOnInit(){}addProduct(t){console.log("You clicked add product"),console.log(t),this.cs.addProduct(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Qm))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-add-product"]],decls:27,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-8"],[3,"ngSubmit"],["postform","ngForm"],[1,"input-group"],[1,"input-group-text"],["type","text","required","","ngModel","","name","card_img",1,"form-control"],["type","text","required","","ngModel","","name","card_title",1,"form-control"],["type","text","required","","ngModel","","name","card_msg",1,"form-control"],["type","text","required","","ngModel","","name","subtext",1,"form-control"],["type","text","required","","ngModel","","name","button_phrase",1,"form-control"],["type","submit",1,"btn","btn-dark"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3,4),p.NdJ("ngSubmit",function(){p.CHM(i);const l=p.MAs(4);return p.KtG(r.addProduct(l.value))}),p.TgZ(5,"div",5)(6,"span",6),p._uU(7,"Image Path"),p.qZA(),p._UZ(8,"input",7),p.qZA(),p.TgZ(9,"div",5)(10,"span",6),p._uU(11,"Title"),p.qZA(),p._UZ(12,"input",8),p.qZA(),p.TgZ(13,"div",5)(14,"span",6),p._uU(15,"Message"),p.qZA(),p._UZ(16,"input",9),p.qZA(),p.TgZ(17,"div",5)(18,"span",6),p._uU(19,"Subtext"),p.qZA(),p._UZ(20,"input",10),p.qZA(),p.TgZ(21,"div",5)(22,"span",6),p._uU(23,"Button Phrase"),p.qZA(),p._UZ(24,"input",11),p.qZA(),p.TgZ(25,"button",12),p._uU(26,"Add Product"),p.qZA()()()()()}},dependencies:[nM,Xm,A,F,Bb,tM,Bw]}),n})(),EU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-delivery-layout"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"LJKADSJDFAJKFADKJLJKLDFASFSKFSAKDFSAFDSJKdelivery-layout works!"),p.qZA(),p._UZ(2,"router-outlet"))},dependencies:[Fl]}),n})(),IU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["fm-tacobellmenu"]],decls:3,vars:0,consts:[[1,"d-flex","justify-content-center"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"h1"),p._uU(2,"TACO BELL MENU"),p.qZA()())}}),n})(),CU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-gift-card-layout"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"ALK;SDFJA;LKSDJF;ALKSFLKDSFJgift-card-layout works!"),p.qZA(),p._UZ(2,"router-outlet"))},dependencies:[Fl]}),n})();const bU=[{card_img:"./assets/mexicanpizza.jpg",card_title:"MEXICAN PIZZA FOREVER",card_msg:"The time has come. It's officially back for good.",button_phrase:"ORDER NOW",subtext:"At participating U.S. Taco Bell\xae locations while supplies last. Contact local restaurant for hours and participation, which vary."},{card_img:"./assets/beefwithuspack.jpg",card_title:"BEEF WITH US",card_msg:"Enjoy the seasoned beef inside the Grilled Cheese Burrito as part of your next Deluxe Cravings Box order.",button_phrase:"ORDER NOW",subtext:"At participating U.S. Taco Bell\xae locations while supplies last. Contact local restaurant for hours and participation, which vary."},{card_img:"./assets/livemasscholarship.jpg",card_title:"VOTING IS WIDE OPEN",card_msg:"Live M\xe1s September Student Section of the Month voting is now live on our app.",button_phrase:"VOTE NOW",subtext:"NO PURCHASE NECESSARY. Round 1 voting begins 09/24/2022 at 12:00:01 AM PT, ends 09/29/2022 at 11:59:59 PM PT. Open to legal residents of the 50 U.S. & D.C., 16+ who are Taco Bell Rewards Program account holders and logged into the Taco Bell mobile app. Limit 1 vote per person/account per round. Eligible participants who vote for the winning student section will receive 1 free crunchy taco in their Taco Bell Reward interface in the Taco Bell app. Taco reward is valid for 7 days from issuance, is not transferable, has no cash value, and cannot be redeemed with other rewards. Reward redeemable only via the Taco Bell app for in-store/drive-thru pickup orders, at participating U.S. Taco Bell locations, while supplies last. Reward not available for web pay-ahead, pickup or delivery order. Must be a registered Taco Bell app user in order to redeem. No product or ingredient substitutions, upgrades or add-ons. Subject to complete terms and conditions. Void where prohibited. "}];let DU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-footer"]],decls:11,vars:0,consts:[[1,"text-center","text-lg-start","bg-light","text-muted"],[1,"d-flex","justify-content-center","justify-content-lg-between","p-4","border-bottom"],[1,"me-5","d-none","d-lg-block"],["src","/assets/facebook.png","alt",":("],["src","/assets/instagram.png","alt",":("],["src","/assets/twitter.png","alt",":("],["src","/assets/tiktok.png","alt",":("],["src","/assets/youtube.png","alt",":("],["src","/assets/linkedin.png","alt",":("]],template:function(t,r){1&t&&(p.TgZ(0,"footer",0)(1,"section",1)(2,"div",2)(3,"p"),p._uU(4,"Stay Connected "),p._UZ(5,"img",3)(6,"img",4)(7,"img",5)(8,"img",6)(9,"img",7)(10,"img",8),p.qZA()()()())},styles:["me-5[_ngcontent-%COMP%]   d-none[_ngcontent-%COMP%]   d-lg-block[_ngcontent-%COMP%]{text-align:center}"]}),n})(),TU=(()=>{class n{constructor(){this.card_img="no image",this.card_title="empty title",this.card_msg="",this.button_phrase="empty",this.subtext="empty"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-card"]],inputs:{card_img:"card_img",card_title:"card_title",card_msg:"card_msg",button_phrase:"button_phrase",subtext:"subtext"},decls:11,vars:5,consts:[[1,"card",2,"width","32rem","align-items","center","margin-left","auto","margin-right","0px"],["alt","dang",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text",2,"text-align","center"],["href","#",1,"btn","btn-primary",2,"background-color","blueviolet"],[2,"font-size","x-small","text-align","center"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"div",2)(3,"h5",3),p._uU(4),p.qZA(),p.TgZ(5,"p",4),p._uU(6),p.qZA(),p.TgZ(7,"a",5),p._uU(8),p.qZA(),p.TgZ(9,"p",6),p._uU(10),p.qZA()()()),2&t&&(p.xp6(1),p.s9C("src",r.card_img,p.LSH),p.xp6(3),p.hij('"',r.card_title,'"'),p.xp6(2),p.Oqu(r.card_msg),p.xp6(2),p.Oqu(r.button_phrase),p.xp6(2),p.Oqu(r.subtext))},styles:["h5[_ngcontent-%COMP%]{font-family:BrandonGrotesqueWeb-Black,Arial Black,Arial,Helvetica,sans-serif;font-size:24px;line-height:1;text-align:center;text-transform:uppercase}"]}),n})(),SU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-news-container"]],decls:9,vars:0,consts:[[1,"card","bg-dark","text-black"],["src","/assets/nachofriesareback.jpg","alt","...",1,"card-img"],[1,"card-img-overlay"],[1,"card-title"],[1,"card-text"],[1,"text-white"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0),p._UZ(1,"img",1),p.TgZ(2,"div",2)(3,"h5",3),p._uU(4,"BOLD IS BACK IN SEASON."),p.qZA(),p.TgZ(5,"p",4),p._uU(6,"Dip into your nacho cheese sauce cravings with the epic return of golden, boldly seasoned Nacho Fries."),p.qZA(),p.TgZ(7,"p",5),p._uU(8,"At participating U.S. Taco Bell\xae locations for a limited time only, while supplies last. "),p.qZA()()())}}),n})();function AU(n,e){if(1&n&&(p.TgZ(0,"div")(1,"app-card",1),p._uU(2,"loading"),p.qZA()()),2&n){const t=e.$implicit;p.xp6(1),p.s9C("card_img",t.card_img),p.s9C("card_title",t.card_title),p.s9C("card_msg",t.card_msg),p.s9C("button_phrase",t.button_phrase),p.s9C("subtext",t.subtext)}}const xU=[{path:"",component:(()=>{class n{constructor(t){for(var r of(this.cardService=t,this.title="hello-world-app",this.cards=[],bU))console.log(r),this.cards.push(r)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Qm))},n.\u0275cmp=p.Xpm({type:n,selectors:[["fm-home"]],decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"card_img","card_title","card_msg","button_phrase","subtext"]],template:function(t,r){1&t&&(p.TgZ(0,"app-news-container"),p._uU(1,"test"),p.qZA(),p.YNc(2,AU,3,5,"div",0),p.TgZ(3,"app-footer"),p._uU(4,"loading"),p.qZA()),2&t&&(p.xp6(2),p.Q6J("ngForOf",r.cards))},dependencies:[_s,DU,TU,SU]}),n})()},{path:"food",component:IU},{path:"locations",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-location-layout"]],decls:2,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"location-layout works!TESTINGTESTINTESITNTSEITNISNETISNTINISNISNTINSTINSIT"),p.qZA())}}),n})()},{path:"delivery",component:EU},{path:"rewards",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-rewards-layout"]],decls:2,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"ASDFLJIORHAVULIEURHLVIUERrewards-layout works!"),p.qZA())}}),n})()},{path:"nutrition",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-nutrition-layout"]],decls:3,vars:0,template:function(t,r){1&t&&(p.TgZ(0,"p"),p._uU(1,"LAJFEOIAJWEFIOAJWFOEIJAFJEAOPIEJFAOIFJEOIFJEWnutrition-layout works!"),p.qZA(),p._UZ(2,"router-outlet"))},dependencies:[Fl]}),n})()},{path:"gift-cards",component:CU},{path:"admin",component:wU}];let MU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[RE.forRoot(xU),RE]}),n})(),RU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-topnavbar"]],decls:24,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-white"],[1,"container-fluid"],[1,"search_for_food"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-zoom-in"],["fill-rule","evenodd","d","M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"],["d","M10.344 11.742c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1 6.538 6.538 0 0 1-1.398 1.4z"],["fill-rule","evenodd","d","M6.5 3a.5.5 0 0 1 .5.5V6h2.5a.5.5 0 0 1 0 1H7v2.5a.5.5 0 0 1-1 0V7H3.5a.5.5 0 0 1 0-1H6V3.5a.5.5 0 0 1 .5-.5z"],["type","search","placeholder","SEARCH OUR FOOD MENU","aria-label","Search",1,"rounded-pill"],["type","button",1,"btn","btn-startorder",2,"background-color","darkviolet"],[2,"color","white","text-align","center"],["type","button",1,"btn","btn-outline-dark"],[1,"d-flex",2,"height","30px"],[1,"vr"],[1,"btn","btn-default"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-gift-fill"],["d","M3 2.5a2.5 2.5 0 0 1 5 0 2.5 2.5 0 0 1 5 0v.006c0 .07 0 .27-.038.494H15a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2.038A2.968 2.968 0 0 1 3 2.506V2.5zm1.068.5H7v-.5a1.5 1.5 0 1 0-3 0c0 .085.002.274.045.43a.522.522 0 0 0 .023.07zM9 3h2.932a.56.56 0 0 0 .023-.07c.043-.156.045-.345.045-.43a1.5 1.5 0 0 0-3 0V3zm6 4v7.5a1.5 1.5 0 0 1-1.5 1.5H9V7h6zM2.5 16A1.5 1.5 0 0 1 1 14.5V7h6v9H2.5z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag"],["d","M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"form",2),p.O4$(),p.TgZ(3,"svg",3),p._UZ(4,"path",4)(5,"path",5)(6,"path",6),p.qZA(),p.kcU(),p._UZ(7,"input",7),p.qZA(),p.TgZ(8,"button",8)(9,"p",9),p._uU(10," START YOUR ORDER "),p.qZA()(),p.TgZ(11,"button",10)(12,"p"),p._uU(13,"LOG IN"),p.qZA()(),p.TgZ(14,"div",11),p._UZ(15,"div",12),p.qZA(),p.TgZ(16,"button",13),p.O4$(),p.TgZ(17,"svg",14),p._UZ(18,"path",15),p.qZA()(),p.kcU(),p.TgZ(19,"div",11),p._UZ(20,"div",12),p.qZA(),p.TgZ(21,"button",13),p.O4$(),p.TgZ(22,"svg",16),p._UZ(23,"path",17),p.qZA()()()())},dependencies:[nM,F,Bw],styles:[".line_divider[_ngcontent-%COMP%]{border-top:1px solid #333;width:100%;height:1px;display:block}"]}),n})();class FP{}class LP{}class ec{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ec?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ec;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ec?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class NU{encodeKey(e){return VP(e)}encodeValue(e){return VP(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const PU=/%(\d[a-f0-9])/gi,kU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VP(n){return encodeURIComponent(n).replace(PU,(e,t)=>kU[t]??e)}function jb(n){return`${n}`}class Jd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new NU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function OU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],y=t.get(l)||[];y.push(h),t.set(l,y)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(jb):[jb(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Jd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(jb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(jb(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class FU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function UP(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BP(n){return typeof Blob<"u"&&n instanceof Blob}function jP(n){return typeof FormData<"u"&&n instanceof FormData}class jw{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function LU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ec),this.context||(this.context=new FU),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Jd,this.urlWithParams=t}serializeBody(){return null===this.body?null:UP(this.body)||BP(this.body)||jP(this.body)||function VU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jP(this.body)?null:BP(this.body)?this.body.type||null:UP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((D,M)=>D.set(M,e.setHeaders[M]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((D,M)=>D.set(M,e.setParams[M]),w)),new jw(t,r,a,{params:w,headers:y,context:b,reportProgress:h,responseType:i,withCredentials:l})}}var Jr=(()=>((Jr=Jr||{})[Jr.Sent=0]="Sent",Jr[Jr.UploadProgress=1]="UploadProgress",Jr[Jr.ResponseHeader=2]="ResponseHeader",Jr[Jr.DownloadProgress=3]="DownloadProgress",Jr[Jr.Response=4]="Response",Jr[Jr.User=5]="User",Jr))();class lM{constructor(e,t=200,r="OK"){this.headers=e.headers||new ec,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class cM extends lM{constructor(e={}){super(e),this.type=Jr.ResponseHeader}clone(e={}){return new cM({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Hb extends lM{constructor(e={}){super(e),this.type=Jr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Hb({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class HP extends lM{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function dM(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let $P=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof jw)a=t;else{let y,w;y=i.headers instanceof ec?i.headers:new ec(i.headers),i.params&&(w=i.params instanceof Jd?i.params:new Jd({fromObject:i.params})),a=new jw(t,r,void 0!==i.body?i.body:null,{headers:y,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=vt(a).pipe($i(y=>this.handler.handle(y)));if(t instanceof jw||"events"===i.observe)return l;const h=l.pipe(ei(y=>y instanceof Hb));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,it.U)(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return h.pipe((0,it.U)(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return h.pipe((0,it.U)(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return h.pipe((0,it.U)(y=>y.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Jd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,dM(i,r))}post(t,r,i={}){return this.request("POST",t,dM(i,r))}put(t,r,i={}){return this.request("PUT",t,dM(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(FP))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class GP{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const WP=new p.OlP("HTTP_INTERCEPTORS");let UU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const BU=/^\)\]\}',?\n/;let zP=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Zr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,W)=>i.setRequestHeader(V,W.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const V=i.statusText||"OK",W=new ec(i.getAllResponseHeaders()),me=function jU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new cM({headers:W,status:i.status,statusText:V,url:me}),l},y=()=>{let{headers:V,status:W,statusText:me,url:Me}=h(),nt=null;204!==W&&(nt=typeof i.response>"u"?i.responseText:i.response),0===W&&(W=nt?200:0);let Ct=W>=200&&W<300;if("json"===t.responseType&&"string"==typeof nt){const Mt=nt;nt=nt.replace(BU,"");try{nt=""!==nt?JSON.parse(nt):null}catch(Ut){nt=Mt,Ct&&(Ct=!1,nt={error:Ut,text:nt})}}Ct?(r.next(new Hb({body:nt,headers:V,status:W,statusText:me,url:Me||void 0})),r.complete()):r.error(new HP({error:nt,headers:V,status:W,statusText:me,url:Me||void 0}))},w=V=>{const{url:W}=h(),me=new HP({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:W||void 0});r.error(me)};let b=!1;const D=V=>{b||(r.next(h()),b=!0);let W={type:Jr.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(W.total=V.total),"text"===t.responseType&&!!i.responseText&&(W.partialText=i.responseText),r.next(W)},M=V=>{let W={type:Jr.UploadProgress,loaded:V.loaded};V.lengthComputable&&(W.total=V.total),r.next(W)};return i.addEventListener("load",y),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",D),null!==a&&i.upload&&i.upload.addEventListener("progress",M)),i.send(a),r.next({type:Jr.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",y),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",D),null!==a&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(di))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const hM=new p.OlP("XSRF_COOKIE_NAME"),fM=new p.OlP("XSRF_HEADER_NAME");class qP{}let HU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=yr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(oe),p.LFG(p.Lbi),p.LFG(hM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),pM=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(qP),p.LFG(fM))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),$U=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(WP,[]);this.chain=r.reduceRight((i,a)=>new GP(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(LP),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),GU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:pM,useClass:UU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:hM,useValue:t.cookieName}:[],t.headerName?{provide:fM,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[pM,{provide:WP,useExisting:pM,multi:!0},{provide:qP,useClass:HU},{provide:hM,useValue:"XSRF-TOKEN"},{provide:fM,useValue:"X-XSRF-TOKEN"}]}),n})(),WU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[$P,{provide:FP,useClass:$U},zP,{provide:LP,useExisting:zP}],imports:[GU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();function zU(n,e){1&n&&(p.TgZ(0,"p"),p._uU(1,"failed to get info"),p.qZA())}function qU(n,e){if(1&n&&(p.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div",3),p._uU(4),p.qZA(),p.TgZ(5,"div",3),p._uU(6),p.qZA(),p.TgZ(7,"div",3),p._uU(8),p.qZA()()()()),2&n){const t=p.oxw();p.xp6(4),p.AsE(" User: ",t.myInfo.Firstname," ",t.myInfo.LastName," "),p.xp6(2),p.hij(" Mix ID: ",t.myInfo.mix_id," "),p.xp6(2),p.hij(" Github: ",t.myInfo.Github," ")}}let KU=(()=>{class n{constructor(t){this.http=t}ngOnInit(){console.log("SENDING GET REQUEST TO SERVER"),this.getUserInfo(),console.log("REGISTERING showUserInfo as a subscriber"),this.showUserInfo()}getUserInfo(){return this.http.get("https://tacobellapp-aad01-default-rtdb.firebaseio.com/my-info.json")}showUserInfo(){this.getUserInfo().subscribe(t=>{console.log(t),this.myInfo=t})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36($P))},n.\u0275cmp=p.Xpm({type:n,selectors:[["tacobell-user-info"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"container-fluid"],[1,"d-flex","flex-row","justify-content-between"],[1,"flex-column"]],template:function(t,r){1&t&&(p.YNc(0,zU,2,0,"p",0),p.YNc(1,qU,9,4,"div",0)),2&t&&(p.Q6J("ngIf",null==r.myInfo),p.xp6(1),p.Q6J("ngIf",null!=r.myInfo))},dependencies:[_r]}),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ZU=(()=>{class n{constructor(){this.title="hello-world-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"d-inline-flex","flex-rowjustify-content-between"],[1,"flex-column"]],template:function(t,r){1&t&&(p.TgZ(0,"tacobell-user-info"),p._uU(1,"load user"),p.qZA(),p.TgZ(2,"div",0),p._UZ(3,"div",1),p.TgZ(4,"div",1)(5,"app-topnavbar"),p._uU(6," Testing the top"),p.qZA()()(),p._UZ(7,"router-outlet"))},dependencies:[Fl,RU,KU]}),n})();var YU=P(6148);const KP_firebase={projectId:"tacobellapp-aad01",appId:"1:378789450906:web:7bbf6b52da570ac728bb23",databaseURL:"https://tacobellapp-aad01-default-rtdb.firebaseio.com",storageBucket:"tacobellapp-aad01.appspot.com",apiKey:"AIzaSyDXZkzfvSEXNkAVl0gdvDU6y0XjZpIKqNk",authDomain:"tacobellapp-aad01.firebaseapp.com",messagingSenderId:"378789450906",measurementId:"G-FSWFXFDW9H"},JU=(0,Rm.ZF)({apiKey:"AIzaSyDXZkzfvSEXNkAVl0gdvDU6y0XjZpIKqNk",authDomain:"tacobellapp-aad01.firebaseapp.com",databaseURL:"https://tacobellapp-aad01-default-rtdb.firebaseio.com",projectId:"tacobellapp-aad01",storageBucket:"tacobellapp-aad01.appspot.com",messagingSenderId:"378789450906",appId:"1:378789450906:web:7bbf6b52da570ac728bb23",measurementId:"G-FSWFXFDW9H"});function gM(){return(0,br.e)((n,e)=>{let t,r=!1;n.subscribe((0,wr.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}(0,YU.IH)(JU);var It,XU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tc={},mM=mM||{},Wt=XU||self;function $b(){}function Gb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var yM="closure_uid_"+(1e9*Math.random()>>>0),tB=0;function nB(n,e,t){return n.call.apply(n.bind,arguments)}function rB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Qi(n,e,t){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nB:rB).apply(null,arguments)}function Wb(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Xd(){this.s=this.s,this.o=this.o}Xd.prototype.s=!1,Xd.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function eB(n){Object.prototype.hasOwnProperty.call(n,yM)&&n[yM]||(n[yM]=++tB)}(this)},Xd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ZP=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function _M(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function YP(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Gb(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ji(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ji.prototype.h=function(){this.defaultPrevented=!0};var sB=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",$b,e),Wt.removeEventListener("test",$b,e)}catch{}return n}();function zb(n){return/^[\s\xa0]*$/.test(n)}var QP=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function vM(n,e){return n<e?-1:n>e?1:0}function qb(){var n=Wt.navigator;return n&&(n=n.userAgent)?n:""}function ju(n){return-1!=qb().indexOf(n)}function wM(n){return wM[" "](n),n}wM[" "]=$b;var Kb,n,aB=ju("Opera"),ry=ju("Trident")||ju("MSIE"),JP=ju("Edge"),EM=JP||ry,XP=ju("Gecko")&&!(-1!=qb().toLowerCase().indexOf("webkit")&&!ju("Edge"))&&!(ju("Trident")||ju("MSIE"))&&!ju("Edge"),uB=-1!=qb().toLowerCase().indexOf("webkit")&&!ju("Edge");function ek(){var n=Wt.document;return n?n.documentMode:void 0}e:{var IM="",CM=(n=qb(),XP?/rv:([^\);]+)(\)|;)/.exec(n):JP?/Edge\/([\d\.]+)/.exec(n):ry?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uB?/WebKit\/(\S+)/.exec(n):aB?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(CM&&(IM=CM?CM[1]:""),ry){var bM=ek();if(null!=bM&&bM>parseFloat(IM)){Kb=String(bM);break e}}Kb=IM}var lB={};var dB=Wt.document&&ry&&(ek()||parseInt(Kb,10))||void 0;function $w(n,e){if(Ji.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(XP){e:{try{wM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hB[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$w.X.h.call(this)}}Pi($w,Ji);var hB={2:"touch",3:"pen",4:"mouse"};$w.prototype.h=function(){$w.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gw="closure_listenable_"+(1e6*Math.random()|0),fB=0;function pB(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++fB,this.ba=this.ea=!1}function Zb(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function TM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function nk(n){const e={};for(const t in n)e[t]=n[t];return e}const rk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ik(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<rk.length;a++)t=rk[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Yb(n){this.src=n,this.g={},this.h=0}function SM(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ZP(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Zb(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function AM(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Yb.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=AM(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new pB(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var xM="closure_lm_"+(1e6*Math.random()|0),MM={};function sk(n,e,t,r,i){if(r&&r.once)return ak(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)sk(n,e[a],t,r,i);return null}return t=PM(t),n&&n[Gw]?n.N(e,t,Hw(r)?!!r.capture:!!r,i):ok(n,e,t,!1,r,i)}function ok(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Hw(i)?!!i.capture:!!i,h=NM(n);if(h||(n[xM]=h=new Yb(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function gB(){const e=mB;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)sB||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(lk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ak(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)ak(n,e[a],t,r,i);return null}return t=PM(t),n&&n[Gw]?n.O(e,t,Hw(r)?!!r.capture:!!r,i):ok(n,e,t,!0,r,i)}function uk(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)uk(n,e[a],t,r,i);else r=Hw(r)?!!r.capture:!!r,t=PM(t),n&&n[Gw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=AM(a=n.g[e],t,r,i))&&(Zb(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=NM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=AM(e,t,r,i)),(t=-1<n?e[n]:null)&&RM(t))}function RM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Gw])SM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=NM(e))?(SM(t,n),0==t.h&&(t.src=null,e[xM]=null)):Zb(n)}}}function lk(n){return n in MM?MM[n]:MM[n]="on"+n}function mB(n,e){if(n.ba)n=!0;else{e=new $w(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&RM(n),n=t.call(r,e)}return n}function NM(n){return(n=n[xM])instanceof Yb?n:null}var OM="__closure_events_fn_"+(1e9*Math.random()>>>0);function PM(n){return"function"==typeof n?n:(n[OM]||(n[OM]=function(e){return n.handleEvent(e)}),n[OM])}function vi(){Xd.call(this),this.i=new Yb(this),this.P=this,this.I=null}function ki(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ji(e,n);else if(e instanceof Ji)e.target=e.target||n;else{var i=e;ik(e=new Ji(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Qb(l,r,!0,e)&&i}if(i=Qb(l=e.g=n,r,!0,e)&&i,i=Qb(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Qb(l=e.g=t[a],r,!1,e)&&i}function Qb(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,y=l.ha||l.src;l.ea&&SM(n.i,l),i=!1!==h.call(y,r)&&i}}return i&&!r.defaultPrevented}Pi(vi,Xd),vi.prototype[Gw]=!0,vi.prototype.removeEventListener=function(n,e,t,r){uk(this,n,e,t,r)},vi.prototype.M=function(){if(vi.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zb(t[r]);delete n.g[e],n.h--}}this.I=null},vi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},vi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var kM=Wt.JSON.stringify;function yB(){var n=hk;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var FM,ck=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new vB,n=>n.reset());class vB{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wB(n){Wt.setTimeout(()=>{throw n},0)}function dk(n,e){FM||function EB(){var n=Wt.Promise.resolve(void 0);FM=function(){n.then(IB)}}(),LM||(FM(),LM=!0),hk.add(n,e)}var LM=!1,hk=new class _B{constructor(){this.h=this.g=null}add(e,t){const r=ck.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function IB(){for(var n;n=yB();){try{n.h.call(n.g)}catch(t){wB(t)}var e=ck;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}LM=!1}function Jb(n,e){vi.call(this),this.h=n||1,this.g=e||Wt,this.j=Qi(this.lb,this),this.l=Date.now()}function VM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function UM(n,e,t){if("function"==typeof n)t&&(n=Qi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wt.setTimeout(n,e||0)}function fk(n){n.g=UM(()=>{n.g=null,n.i&&(n.i=!1,fk(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(Jb,vi),(It=Jb.prototype).ca=!1,It.R=null,It.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ki(this,"tick"),this.ca&&(VM(this),this.start()))}},It.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){Jb.X.M.call(this),VM(this),delete this.g};class CB extends Xd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fk(this)}M(){super.M(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ww(n){Xd.call(this),this.h=n,this.g={}}Pi(Ww,Xd);var pk=[];function gk(n,e,t,r){Array.isArray(t)||(t&&(pk[0]=t.toString()),t=pk);for(var i=0;i<t.length;i++){var a=sk(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function mk(n){TM(n.g,function(e,t){this.g.hasOwnProperty(t)&&RM(e)},n),n.g={}}function Xb(){this.g=!0}function iy(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function SB(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return kM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ww.prototype.M=function(){Ww.X.M.call(this),mk(this)},Ww.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xb.prototype.Aa=function(){this.g=!1},Xb.prototype.info=function(){};var ap={},yk=null;function eD(){return yk=yk||new vi}function _k(n){Ji.call(this,ap.Pa,n)}function zw(n){const e=eD();ki(e,new _k(e))}function vk(n,e){Ji.call(this,ap.STAT_EVENT,n),this.stat=e}function fs(n){const e=eD();ki(e,new vk(e,n))}function wk(n,e){Ji.call(this,ap.Qa,n),this.size=e}function qw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},e)}ap.Pa="serverreachability",Pi(_k,Ji),ap.STAT_EVENT="statevent",Pi(vk,Ji),ap.Qa="timingevent",Pi(wk,Ji);var tD={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ek={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function BM(){}function Ck(){}BM.prototype.h=null;var $M,Kw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jM(){Ji.call(this,"d")}function HM(){Ji.call(this,"c")}function nD(){}function Zw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ww(this),this.O=AB,this.T=new Jb(n=EM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new bk}function bk(){this.i=null,this.g="",this.h=!1}Pi(jM,Ji),Pi(HM,Ji),Pi(nD,BM),nD.prototype.g=function(){return new XMLHttpRequest},nD.prototype.i=function(){return{}},$M=new nD;var AB=45e3,GM={},rD={};function WM(n,e,t){n.K=1,n.v=aD(nc(e)),n.s=t,n.P=!0,Dk(n,null)}function Dk(n,e){n.F=Date.now(),Yw(n),n.A=nc(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),kk(t.i,"t",r),n.C=0,t=n.l.H,n.h=new bk,n.g=s1(n.l,t?e:null,!n.s),0<n.N&&(n.L=new CB(Qi(n.La,n,n.g),n.N)),gk(n.S,n.g,"readystatechange",n.ib),e=n.H?nk(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),zw(),function bB(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),y=0;y<h.length;y++){var w=h[y].split("=");if(1<w.length){var b=w[0];w=w[1];var D=b.split("_");l=2<=D.length&&"type"==D[1]?l+(b+"=")+w+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Tk(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Sk(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=xB(n,t),i==rD){4==e&&(n.o=4,fs(14),r=!1),iy(n.j,n.m,null,"[Incomplete Response]");break}if(i==GM){n.o=4,fs(15),iy(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}iy(n.j,n.m,i,null),zM(n,i)}Tk(n)&&i!=rD&&i!=GM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,fs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),eR(e),e.K=!0,fs(11))):(iy(n.j,n.m,t,"[Invalid Chunked Response]"),up(n),Qw(n))}function xB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?rD:(t=Number(e.substring(t,r)),isNaN(t)?GM:(r+=1)+t>e.length?rD:(e=e.substr(r,t),n.C=r+t,e))}function Yw(n){n.V=Date.now()+n.O,Ak(n,n.O)}function Ak(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=qw(Qi(n.gb,n),e)}function iD(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function Qw(n){0==n.l.G||n.I||t1(n.l,n)}function up(n){iD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,VM(n.T),mk(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function zM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||qM(t.h,n)))if(!n.J&&qM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;fD(t),dD(t)}XM(t),fs(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=qw(Qi(t.cb,t),6e3));if(1>=Vk(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else cp(t,11)}else if((n.J||t.g==n)&&fD(t),!zb(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const b=w[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const D=w[4];null!=D&&(t.Ca=D,t.j.info("SVER="+t.Ca));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(t.J=r=1.5*M,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const W=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var a=r.h;a.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(KM(a,a.h),a.h=null))}if(r.D){const me=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;me&&(r.za=me,hr(r.F,r.D,me))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=i1(r,r.H?r.ka:null,r.V),l.J){Uk(r.h,l);var h=l,y=r.J;y&&h.setTimeout(y),h.B&&(iD(h),Yw(h)),r.g=l}else Xk(r);0<t.i.length&&hD(t)}else"stop"!=w[0]&&"close"!=w[0]||cp(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?cp(t,7):JM(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}zw()}catch{}}function xk(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Gb(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function RB(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Gb(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function MB(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Gb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(It=Zw.prototype).setTimeout=function(n){this.O=n},It.ib=function(n){n=n.target;const e=this.L;e&&3==rc(n)?e.l():this.La(n)},It.La=function(n){try{if(n==this.g)e:{const b=rc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||EM||this.g&&(this.h.h||this.g.fa()||qk(this.g)))){this.I||4!=b||7==e||zw(),iD(this);var t=this.g.aa();this.Y=t;t:if(Tk(this)){var r=qk(this.g);n="";var i=r.length,a=4==rc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){up(this),Qw(this);var l="";break t}this.h.i=new Wt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function DB(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,y=this.g;if((h=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zb(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,fs(12),up(this),Qw(this);break e}iy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zM(this,t)}this.P?(Sk(this,b,l),EM&&this.i&&3==b&&(gk(this.S,this.T,"tick",this.hb),this.T.start())):(iy(this.j,this.m,l,null),zM(this,l)),4==b&&up(this),this.i&&!this.I&&(4==b?t1(this.l,this):(this.i=!1,Yw(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,fs(12)):(this.o=0,fs(13)),up(this),Qw(this)}}}catch{}},It.hb=function(){if(this.g){var n=rc(this.g),e=this.g.fa();this.C<e.length&&(iD(this),Sk(this,n,e),this.i&&4!=n&&Yw(this))}},It.cancel=function(){this.I=!0,up(this)},It.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function TB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(zw(),fs(17)),up(this),this.o=2,Qw(this)):Ak(this,this.V-n)};var Mk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lp(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lp){this.h=void 0!==e?e:n.h,sD(this,n.j),this.s=n.s,this.g=n.g,oD(this,n.m),this.l=n.l,e=n.i;var t=new e0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Rk(this,t),this.o=n.o}else n&&(t=String(n).match(Mk))?(this.h=!!e,sD(this,t[1]||"",!0),this.s=Jw(t[2]||""),this.g=Jw(t[3]||"",!0),oD(this,t[4]),this.l=Jw(t[5]||"",!0),Rk(this,t[6]||"",!0),this.o=Jw(t[7]||"")):(this.h=!!e,this.i=new e0(null,this.h))}function nc(n){return new lp(n)}function sD(n,e,t){n.j=t?Jw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function oD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Rk(n,e,t){e instanceof e0?(n.i=e,function VB(n,e){e&&!n.j&&(eh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Ok(this,r),kk(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Xw(e,FB)),n.i=new e0(e,n.h))}function hr(n,e,t){n.i.set(e,t)}function aD(n){return hr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,OB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function OB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xw(e,Nk,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xw(e,Nk,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xw(t,"/"==t.charAt(0)?kB:PB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xw(t,LB)),n.join("")};var Nk=/[#\/\?@]/g,PB=/[#\?:]/g,kB=/[#\?]/g,FB=/[#\?@]/g,LB=/#/g;function e0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function eh(n){n.g||(n.g=new Map,n.h=0,n.i&&function NB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ok(n,e){eh(n),e=sy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Pk(n,e){return eh(n),e=sy(n,e),n.g.has(e)}function kk(n,e,t){Ok(n,e),0<t.length&&(n.i=null,n.g.set(sy(n,e),_M(t)),n.h+=t.length)}function sy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Fk(n){this.l=n||BB,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ga&&Wt.g.Ga()&&Wt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=e0.prototype).add=function(n,e){eh(this),this.i=null,n=sy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){eh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},It.oa=function(){eh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},It.W=function(n){eh(this);let e=[];if("string"==typeof n)Pk(this,n)&&(e=e.concat(this.g.get(sy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},It.set=function(n,e){return eh(this),this.i=null,Pk(this,n=sy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var BB=10;function Lk(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Vk(n){return n.h?1:n.g?n.g.size:0}function qM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function KM(n,e){n.g?n.g.add(e):n.h=e}function Uk(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Bk(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _M(n.i)}function ZM(){}function jB(){this.g=new ZM}function HB(n,e,t){const r=t||"";try{xk(n,function(i,a){let l=i;Hw(i)&&(l=kM(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function uD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function t0(n){this.l=n.ac||null,this.j=n.jb||!1}function lD(n,e){vi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=YM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Fk.prototype.cancel=function(){if(this.i=Bk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ZM.prototype.stringify=function(n){return Wt.JSON.stringify(n,void 0)},ZM.prototype.parse=function(n){return Wt.JSON.parse(n,void 0)},Pi(t0,BM),t0.prototype.g=function(){return new lD(this.l,this.j)},t0.prototype.i=function(n){return function(){return n}}({}),Pi(lD,vi);var YM=0;function jk(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function n0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,r0(n)}function r0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=lD.prototype).open=function(n,e){if(this.readyState!=YM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,r0(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Wt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,n0(this)),this.readyState=YM},It.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,r0(this)),this.g&&(this.readyState=3,r0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jk(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},It.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?n0(this):r0(this),3==this.readyState&&jk(this)}},It.Va=function(n){this.g&&(this.response=this.responseText=n,n0(this))},It.Ua=function(n){this.g&&(this.response=n,n0(this))},It.ga=function(){this.g&&n0(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var GB=Wt.JSON.parse;function Ar(n){vi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hk,this.K=this.L=!1}Pi(Ar,vi);var Hk="",WB=/^https?$/i,zB=["POST","PUT"];function $k(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Gk(n),cD(n)}function Gk(n){n.D||(n.D=!0,ki(n,"complete"),ki(n,"error"))}function Wk(n){if(n.h&&typeof mM<"u"&&(!n.C[1]||4!=rc(n)||2!=n.aa()))if(n.v&&4==rc(n))UM(n.Ha,0,n);else if(ki(n,"readystatechange"),4==rc(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Mk)[1]||null;if(!i&&Wt.self&&Wt.self.location){var a=Wt.self.location.protocol;i=a.substr(0,a.length-1)}r=!WB.test(i?i.toLowerCase():"")}t=r}if(t)ki(n,"complete"),ki(n,"success");else{n.m=6;try{var l=2<rc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Gk(n)}}finally{cD(n)}}}function cD(n,e){if(n.g){zk(n);const t=n.g,r=n.C[0]?$b:null;n.g=null,n.C=null,e||ki(n,"ready");try{t.onreadystatechange=r}catch{}}}function zk(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function rc(n){return n.g?n.g.readyState:0}function qk(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Hk:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Kk(n){let e="";return TM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function QM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Kk(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):hr(n,e,t))}function s0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Zk(n){this.Ca=0,this.i=[],this.j=new Xb,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=s0("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=s0("baseRetryDelayMs",5e3,n),this.bb=s0("retryDelaySeedMs",1e4,n),this.$a=s0("forwardChannelMaxRetries",2,n),this.ta=s0("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Fk(n&&n.concurrentRequestLimit),this.Fa=new jB,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function JM(n){if(Yk(n),3==n.G){var e=n.U++,t=nc(n.F);hr(t,"SID",n.I),hr(t,"RID",e),hr(t,"TYPE","terminate"),o0(n,t),(e=new Zw(n,n.j,e,void 0)).K=2,e.v=aD(nc(t)),t=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(t=Wt.navigator.sendBeacon(e.v.toString(),"")),!t&&Wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=s1(e.l,null),e.g.da(e.v)),e.F=Date.now(),Yw(e)}r1(n)}function dD(n){n.g&&(eR(n),n.g.cancel(),n.g=null)}function Yk(n){dD(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),fD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function hD(n){Lk(n.h)||n.m||(n.m=!0,dk(n.Ja,n),n.C=0)}function Qk(n,e){var t;t=e?e.m:n.U++;const r=nc(n.F);hr(r,"SID",n.I),hr(r,"RID",t),hr(r,"AID",n.T),o0(n,r),n.o&&n.s&&QM(r,n.o,n.s),t=new Zw(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Jk(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),KM(n.h,t),WM(t,r,e)}function o0(n,e){n.ia&&TM(n.ia,function(t,r){hr(e,r,t)}),n.l&&xk({},function(t,r){hr(e,r,t)})}function Jk(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Qi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let y=0;y<t;y++){let w=i[y].h;const b=i[y].g;if(w-=a,0>w)a=Math.max(0,i[y].h-100),h=!1;else try{HB(b,l,"req"+w+"_")}catch{r&&r(b)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Xk(n){n.g||n.u||(n.Z=1,dk(n.Ia,n),n.A=0)}function XM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=qw(Qi(n.Ia,n),n1(n,n.A)),n.A++,0))}function eR(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function e1(n){n.g=new Zw(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=nc(n.sa);hr(e,"RID","rpc"),hr(e,"SID",n.I),hr(e,"CI",n.L?"0":"1"),hr(e,"AID",n.T),hr(e,"TYPE","xmlhttp"),o0(n,e),n.o&&n.s&&QM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=aD(nc(e)),t.s=null,t.P=!0,Dk(t,n)}function fD(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function t1(n,e){var t=null;if(n.g==e){fD(n),eR(n),n.g=null;var r=2}else{if(!qM(n.h,e))return;t=e.D,Uk(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ki(r=eD(),new wk(r,t)),hD(n)}else Xk(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function KB(n,e){return!(Vk(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=qw(Qi(n.Ja,n,e),n1(n,n.C)),n.C++,0)))}(n,e)||2==r&&XM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:cp(n,5);break;case 4:cp(n,10);break;case 3:cp(n,6);break;default:cp(n,2)}}function n1(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function cp(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Qi(n.kb,n);t||(t=new lp("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||sD(t,"https"),aD(t)),function $B(n,e){const t=new Xb;if(Wt.Image){const r=new Image;r.onload=Wb(uD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Wb(uD,t,r,"TestLoadImage: error",!1,e),r.onabort=Wb(uD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wb(uD,t,r,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fs(2);n.G=0,n.l&&n.l.va(e),r1(n),Yk(n)}function r1(n){if(n.G=0,n.la=[],n.l){const e=Bk(n.h);(0!=e.length||0!=n.i.length)&&(YP(n.la,e),YP(n.la,n.i),n.h.i.length=0,_M(n.i),n.i.length=0),n.l.ua()}}function i1(n,e,t){var r=t instanceof lp?nc(t):new lp(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),oD(r,r.m);else{var i=Wt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new lp(null,void 0);r&&sD(a,r),e&&(a.g=e),i&&oD(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&hr(r,t,e),hr(r,"VER",n.ma),o0(n,r),r}function s1(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ar(t&&n.Da&&!n.ra?new t0({jb:!0}):n.ra)).Ka(n.H),e}function o1(){}function pD(){if(ry&&!(10<=Number(dB)))throw Error("Environmental error: no available transport.")}function Co(n,e){vi.call(this),this.g=new Zk(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!zb(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zb(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oy(this)}function a1(n){jM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function u1(){HM.call(this),this.status=1}function oy(n){this.g=n}(It=Ar.prototype).Ka=function(n){this.L=n},It.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$M.g(),this.C=function Ik(n){return n.h||(n.h=n.i())}(this.u?this.u:$M),this.g.onreadystatechange=Qi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void $k(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Wt.FormData&&n instanceof Wt.FormData,!(0<=ZP(zB,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zk(this),0<this.B&&((this.K=function qB(n){return ry&&function cB(){return function oB(n){var e=lB;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=QP(String(Kb)).split("."),t=QP("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=vM(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||vM(0==i[2].length,0==a[2].length)||vM(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qi(this.qa,this)):this.A=UM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){$k(this,a)}},It.qa=function(){typeof mM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ki(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ki(this,"complete"),ki(this,"abort"),cD(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cD(this,!0)),Ar.X.M.call(this)},It.Ha=function(){this.s||(this.F||this.v||this.l?Wk(this):this.fb())},It.fb=function(){Wk(this)},It.aa=function(){try{return 2<rc(this)?this.g.status:-1}catch{return-1}},It.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},It.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),GB(e)}},It.Ea=function(){return this.m},It.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=Zk.prototype).ma=8,It.G=1,It.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Zw(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=nk(a),ik(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Jk(this,i,e),hr(t=nc(this.F),"RID",n),hr(t,"CVER",22),this.D&&hr(t,"X-HTTP-Session-Id",this.D),o0(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Kk(a)))+"&"+e:this.o&&QM(t,this.o,a)),KM(this.h,i),this.Ya&&hr(t,"TYPE","init"),this.O?(hr(t,"$req",e),hr(t,"SID","null"),i.Z=!0,WM(i,t,null)):WM(i,t,e),this.G=2}}else 3==this.G&&(n?Qk(this,n):0==this.i.length||Lk(this.h)||Qk(this))},It.Ia=function(){if(this.u=null,e1(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=qw(Qi(this.eb,this),n)}},It.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,fs(10),dD(this),e1(this))},It.cb=function(){null!=this.v&&(this.v=null,dD(this),XM(this),fs(19))},It.kb=function(n){n?(this.j.info("Successfully pinged google.com"),fs(2)):(this.j.info("Failed to ping google.com"),fs(1))},(It=o1.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Ra=function(){},pD.prototype.g=function(n,e){return new Co(n,e)},Pi(Co,vi),Co.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;fs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=i1(n,null,n.V),hD(n)},Co.prototype.close=function(){JM(this.g)},Co.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=kM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&hD(e)},Co.prototype.M=function(){this.g.l=null,delete this.j,JM(this.g),delete this.g,Co.X.M.call(this)},Pi(a1,jM),Pi(u1,HM),Pi(oy,o1),oy.prototype.xa=function(){ki(this.g,"a")},oy.prototype.wa=function(n){ki(this.g,new a1(n))},oy.prototype.va=function(n){ki(this.g,new u1)},oy.prototype.ua=function(){ki(this.g,"b")},pD.prototype.createWebChannel=pD.prototype.g,Co.prototype.send=Co.prototype.u,Co.prototype.open=Co.prototype.m,Co.prototype.close=Co.prototype.close,tD.NO_ERROR=0,tD.TIMEOUT=8,tD.HTTP_ERROR=6,Ek.COMPLETE="complete",Ck.EventType=Kw,Kw.OPEN="a",Kw.CLOSE="b",Kw.ERROR="c",Kw.MESSAGE="d",vi.prototype.listen=vi.prototype.N,Ar.prototype.listenOnce=Ar.prototype.O,Ar.prototype.getLastError=Ar.prototype.Oa,Ar.prototype.getLastErrorCode=Ar.prototype.Ea,Ar.prototype.getStatus=Ar.prototype.aa,Ar.prototype.getResponseJson=Ar.prototype.Sa,Ar.prototype.getResponseText=Ar.prototype.fa,Ar.prototype.send=Ar.prototype.da,Ar.prototype.setWithCredentials=Ar.prototype.Ka;var ZB=tc.createWebChannelTransport=function(){return new pD},YB=tc.getStatEventTarget=function(){return eD()},tR=tc.ErrorCode=tD,QB=tc.EventType=Ek,JB=tc.Event=ap,l1=tc.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},XB=tc.FetchXmlHttpFactory=t0,gD=tc.WebChannel=Ck,e2=tc.XhrIo=Ar;const c1="@firebase/firestore";class wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wi.UNAUTHENTICATED=new wi(null),wi.GOOGLE_CREDENTIALS=new wi("google-credentials-uid"),wi.FIRST_PARTY=new wi("first-party-uid"),wi.MOCK_USER=new wi("mock-user");let ay="9.13.0";const th=new Jo.Yd("@firebase/firestore");function nR(){return th.logLevel}function $e(n,...e){if(th.logLevel<=Jo.in.DEBUG){const t=e.map(rR);th.debug(`Firestore (${ay}): ${n}`,...t)}}function jr(n,...e){if(th.logLevel<=Jo.in.ERROR){const t=e.map(rR);th.error(`Firestore (${ay}): ${n}`,...t)}}function dp(n,...e){if(th.logLevel<=Jo.in.WARN){const t=e.map(rR);th.warn(`Firestore (${ay}): ${n}`,...t)}}function rR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${ay}) INTERNAL ASSERTION FAILED: `+n;throw jr(e),new Error(e)}function Lt(n,e){n||gt()}function et(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class d1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class r2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wi.UNAUTHENTICATED))}shutdown(){}}class i2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class s2{constructor(e){this.t=e,this.currentUser=wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new oi,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new oi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new d1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new wi(e)}}class o2{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=wi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Lt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class a2{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new o2(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u2{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,$e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.A=t.token,new h1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function l2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class f1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=l2(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function zt(n,e){return n<e?-1:n>e?1:0}function uy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function p1(n){return n+"\0"}class fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new fr(0,0))}static max(){return new Vt(new fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class a0{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===a0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof a0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends a0{construct(e,t,r){return new wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const c2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends a0{construct(e,t,r){return new xr(e,t,r)}static isValidIdentifier(e){return c2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Fe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Fe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Fe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(t)}static emptyPath(){return new xr([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(wn.fromString(e))}static fromName(e){return new Xe(wn.fromString(e).popFirst(5))}static empty(){return new Xe(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new wn(e.slice()))}}class mD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function iR(n){return n.fields.find(e=>2===e.kind)}function hp(n){return n.fields.filter(e=>2!==e.kind)}mD.UNKNOWN_ID=-1;class yD{constructor(e,t){this.fieldPath=e,this.kind=t}}class u0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new u0(0,bo.min())}}function g1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new fr(t+1,0):new fr(t,r));return new bo(i,Xe.empty(),e)}function m1(n){return new bo(n.readTime,n.key,-1)}class bo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bo(Vt.min(),Xe.empty(),-1)}static max(){return new bo(Vt.max(),Xe.empty(),-1)}}function sR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:zt(n.largestBatchId,e.largestBatchId))}const y1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nh(n){return oR.apply(this,arguments)}function oR(){return oR=(0,Ee.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==y1)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),oR.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},y=>r(y))}),l=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(b=>{l[w]=b,++h,h===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class _D{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new oi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new l0(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=aR(r.target.error);this.P.reject(new l0(e,i))}}static open(e,t,r,i){try{return new _D(t,e.transaction(i,r))}catch(a){throw new l0(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new p2(t)}}class Ua{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ua.D((0,k.z$)())&&jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),fp(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,k.hl)())return!1;if(Ua.N())return!0;const e=(0,k.z$)(),t=Ua.D(e),r=0<t&&t<10,i=Ua.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new l0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Fe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Fe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new l0(e,h))},a.onupgradeneeded=l=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const y=_D.open(a.db,e,l?"readonly":"readwrite",r),w=i(y).next(b=>(y.V(),b)).catch(b=>(y.abort(b),ue.reject(b))).toPromise();return w.catch(()=>{}),yield y.v,w}catch(y){const w=y,b="FirebaseError"!==w.name&&h<3;if($e("SimpleDb","Transaction failed with error:",w.message,"Retrying:",b),a.close(),!b)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class f2{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return fp(this.U.delete())}}class l0 extends Fe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rh(n){return"IndexedDbTransactionError"===n.name}class p2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fp(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),fp(this.store.add(e))}get(e){return fp(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),fp(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),fp(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const l=aR(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new ue((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const y=new f2(h),w=t(h.primaryKey,h.value,y);if(w instanceof ue){const b=w.catch(D=>(y.done(),ue.reject(D)));r.push(b)}y.isDone?i():null===y.G?h.continue():h.continue(y.G)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fp(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=aR(r.target.error);t(i)}})}let v1=!1;function aR(n){const e=Ua.D((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return v1||(v1=!0,setTimeout(()=>{throw r},0)),r}}return n}class g2{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){rh(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield nh(r)}yield t.nt(6e4)}))}}class m2{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return $e("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>($e("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=m1(a);sR(l,r)>0&&(r=l)}),new bo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function w1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pp(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Vs.at=-1;class Mr{constructor(e,t){this.comparator=e,this.root=t||Fi.EMPTY}insert(e,t){return new Mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fi.BLACK,null,null))}remove(e){return new Mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vD(this.root,e,this.comparator,!1)}getReverseIterator(){return new vD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vD(this.root,e,this.comparator,!0)}}class vD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Fi.RED,this.left=i??Fi.EMPTY,this.right=a??Fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Fi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Fi.EMPTY=null,Fi.RED=!0,Fi.BLACK=!1,Fi.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Fi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new Mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new I1(this.data.getIterator())}getIteratorFrom(e){return new I1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class I1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ly(n){return n.hasNext()?n.getNext():void 0}class Do{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new Do([])}unionWith(e){let t=new Vn(xr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Do(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ai(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const _2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ih(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=_2.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(n.seconds),nanos:Rr(n.nanos)}}function Rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gp(n){return"string"==typeof n?ai.fromBase64String(n):ai.fromUint8Array(n)}function uR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function C1(n){const e=n.mapValue.fields.__previous_value__;return uR(e)?C1(e):e}function c0(n){const e=ih(n.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}class v2{constructor(e,t,r,i,a,l,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=y}}class sh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof sh&&e.projectId===this.projectId&&e.database===this.database}}function d0(n){return null==n}function h0(n){return 0===n&&1/n==-1/0}function b1(n){return"number"==typeof n&&Number.isInteger(n)&&!h0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wD={nullValue:"NULL_VALUE"};function mp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uR(n)?4:A1(n)?9007199254740991:10:gt()}function Hu(n,e){if(n===e)return!0;const t=mp(n);if(t!==mp(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return c0(n).isEqual(c0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ih(r.timestampValue),l=ih(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,gp(n.bytesValue).isEqual(gp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Rr(r.geoPointValue.latitude)===Rr(i.geoPointValue.latitude)&&Rr(r.geoPointValue.longitude)===Rr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Rr(r.integerValue)===Rr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Rr(r.doubleValue),l=Rr(i.doubleValue);return a===l?h0(a)===h0(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return uy(n.arrayValue.values||[],e.arrayValue.values||[],Hu);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(w1(a)!==w1(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Hu(a[h],l[h])))return!1;return!0}(n,e);default:return gt()}var i}function f0(n,e){return void 0!==(n.values||[]).find(t=>Hu(t,e))}function ah(n,e){if(n===e)return 0;const t=mp(n),r=mp(e);if(t!==r)return zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Rr(i.integerValue||i.doubleValue),h=Rr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return D1(n.timestampValue,e.timestampValue);case 4:return D1(c0(n),c0(e));case 5:return zt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=gp(i),h=gp(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let y=0;y<l.length&&y<h.length;y++){const w=zt(l[y],h[y]);if(0!==w)return w}return zt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=zt(Rr(i.latitude),Rr(a.latitude));return 0!==l?l:zt(Rr(i.longitude),Rr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let y=0;y<l.length&&y<h.length;++y){const w=ah(l[y],h[y]);if(w)return w}return zt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===oh.mapValue&&a===oh.mapValue)return 0;if(i===oh.mapValue)return 1;if(a===oh.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),y=a.fields||{},w=Object.keys(y);h.sort(),w.sort();for(let b=0;b<h.length&&b<w.length;++b){const D=zt(h[b],w[b]);if(0!==D)return D;const M=ah(l[h[b]],y[w[b]]);if(0!==M)return M}return zt(h.length,w.length)}(n.mapValue,e.mapValue);default:throw gt()}}function D1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return zt(n,e);const t=ih(n),r=ih(e),i=zt(t.seconds,r.seconds);return 0!==i?i:zt(t.nanos,r.nanos)}function cy(n){return lR(n)}function lR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ih(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gp(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=lR(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${lR(r.fields[h])}`;return a+"}"}(n.mapValue):gt();var e}function yp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cR(n){return!!n&&"integerValue"in n}function p0(n){return!!n&&"arrayValue"in n}function T1(n){return!!n&&"nullValue"in n}function S1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ED(n){return!!n&&"mapValue"in n}function g0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pp(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=g0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=g0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function A1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function w2(n){return"nullValue"in n?wD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yp(sh.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function E2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yp(sh.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oh:gt()}function x1(n,e){const t=ah(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function M1(n,e){const t=ah(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ED(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=g0(t)}setAll(e){let t=xr.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=g0(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ED(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ED(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pp(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Li(g0(this.value))}}function R1(n){const e=[];return pp(n.fields,(t,r)=>{const i=new xr([t]);if(ED(r)){const a=R1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Do(e)}class Qn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Qn(e,0,Vt.min(),Vt.min(),Li.empty(),0)}static newFoundDocument(e,t,r){return new Qn(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new Qn(e,2,t,Vt.min(),Li.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,Vt.min(),Li.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class I2{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function N1(n,e=null,t=[],r=[],i=null,a=null,l=null){return new I2(n,e,t,r,i,a,l)}function _p(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+cy(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),d0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cy(r)).join(",")),e.ht=t}return e.ht}function m0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!R2(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Hu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!L1(n.startAt,e.startAt)&&L1(n.endAt,e.endAt)}function ID(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function CD(n,e){return n.filters.filter(t=>t instanceof Vi&&t.field.isEqual(e))}function O1(n,e,t){let r=wD,i=!0;for(const a of CD(n,e)){let l=wD,h=!0;switch(a.op){case"<":case"<=":l=w2(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=wD}x1({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];x1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function P1(n,e,t){let r=oh,i=!0;for(const a of CD(n,e)){let l=oh,h=!0;switch(a.op){case">=":case">":l=E2(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=oh}M1({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];M1({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Vi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new b2(e,t,r):"array-contains"===t?new S2(e,r):"in"===t?new A2(e,r):"not-in"===t?new x2(e,r):"array-contains-any"===t?new M2(e,r):new Vi(e,t,r)}static lt(e,t,r){return"in"===t?new D2(e,r):new T2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ah(t,this.value)):null!==t&&mp(this.value)===mp(t)&&this.ft(ah(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class b2 extends Vi{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.ft(t)}}class D2 extends Vi{constructor(e,t){super(e,"in",t),this.keys=k1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class T2 extends Vi{constructor(e,t){super(e,"not-in",t),this.keys=k1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function k1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class S2 extends Vi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return p0(t)&&f0(t.arrayValue,this.value)}}class A2 extends Vi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&f0(this.value.arrayValue,t)}}class x2 extends Vi{constructor(e,t){super(e,"not-in",t)}matches(e){if(f0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!f0(this.value.arrayValue,t)}}class M2 extends Vi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!p0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>f0(this.value.arrayValue,r))}}class uh{constructor(e,t){this.position=e,this.inclusive=t}}class dy{constructor(e,t="asc"){this.field=e,this.dir=t}}function R2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function F1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):ah(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function L1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hu(n.position[t],e.position[t]))return!1;return!0}class ic{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=y,this._t=null,this.wt=null}}function V1(n,e,t,r,i,a,l,h){return new ic(n,e,t,r,i,a,l,h)}function hy(n){return new ic(n)}function U1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function dR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function hR(n){for(const e of n.filters)if(e.dt())return e.field;return null}function fR(n){return null!==n.collectionGroup}function fy(n){const e=et(n);if(null===e._t){e._t=[];const t=hR(e),r=dR(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new dy(t)),e._t.push(new dy(xr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new dy(xr.keyField(),a))}}}return e._t}function ps(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=N1(e.path,e.collectionGroup,fy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of fy(e))t.push(new dy(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new uh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new uh(e.startAt.position,e.startAt.inclusive):null;e.wt=N1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function bD(n,e,t){return new ic(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function y0(n,e){return m0(ps(n),ps(e))&&n.limitType===e.limitType}function B1(n){return`${_p(ps(n))}|lt:${n.limitType}`}function pR(n){return`Query(target=${function C2(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${cy(r.value)}`;var r}).join(", ")}]`),d0(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>cy(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>cy(t)).join(",")),`Target(${e})`}(ps(n))}; limitType=${n.limitType})`}function gR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=F1(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,fy(t),r)||t.endAt&&!function(i,a,l){const h=F1(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,fy(t),r)));var t,r}function j1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H1(n){return(e,t)=>{let r=!1;for(const i of fy(n)){const a=N2(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function N2(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),y=l.data.field(i);return null!==h&&null!==y?ah(h,y):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}function $1(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:h0(e)?"-0":e}}function G1(n){return{integerValue:""+n}}function W1(n,e){return b1(e)?G1(e):$1(n,e)}class DD{constructor(){this._=void 0}}function O2(n,e,t){return n instanceof py?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof vp?q1(n,e):n instanceof wp?K1(n,e):function(r,i){const a=z1(r,i),l=Z1(a)+Z1(r.yt);return cR(a)&&cR(r.yt)?G1(l):$1(r.It,l)}(n,e)}function P2(n,e,t){return n instanceof vp?q1(n,e):n instanceof wp?K1(n,e):t}function z1(n,e){return n instanceof gy?cR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class py extends DD{}class vp extends DD{constructor(e){super(),this.elements=e}}function q1(n,e){const t=Y1(e);for(const r of n.elements)t.some(i=>Hu(i,r))||t.push(r);return{arrayValue:{values:t}}}class wp extends DD{constructor(e){super(),this.elements=e}}function K1(n,e){let t=Y1(e);for(const r of n.elements)t=t.filter(i=>!Hu(i,r));return{arrayValue:{values:t}}}class gy extends DD{constructor(e,t){super(),this.It=e,this.yt=t}}function Z1(n){return Rr(n.integerValue||n.doubleValue)}function Y1(n){return p0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _0{constructor(e,t){this.field=e,this.transform=t}}class F2{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function TD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class SD{}function Q1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yy(n.key,pr.none()):new my(n.key,n.data,pr.none());{const t=n.data,r=Li.empty();let i=new Vn(xr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new sc(n.key,r,new Do(i.toArray()),pr.none())}}function L2(n,e,t){n instanceof my?function(r,i,a){const l=r.value.clone(),h=eF(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof sc?function(r,i,a){if(!TD(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=eF(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(X1(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function v0(n,e,t,r){return n instanceof my?function(i,a,l,h){if(!TD(i.precondition,a))return l;const y=i.value.clone(),w=tF(i.fieldTransforms,h,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof sc?function(i,a,l,h){if(!TD(i.precondition,a))return l;const y=tF(i.fieldTransforms,h,a),w=a.data;return w.setAll(X1(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,TD(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function V2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=z1(r.transform,i||null);null!=a&&(null===t&&(t=Li.empty()),t.set(r.field,a))}return t||null}function J1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&uy(t,r,(i,a)=>function k2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vp&&r instanceof vp||t instanceof wp&&r instanceof wp?uy(t.elements,r.elements,Hu):t instanceof gy&&r instanceof gy?Hu(t.yt,r.yt):t instanceof py&&r instanceof py);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class my extends SD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sc extends SD{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function X1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eF(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,P2(l,h,t[i]))}return r}function tF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,O2(a,l,e))}return r}class yy extends SD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mR extends SD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class U2{constructor(e){this.count=e}}var Xr,En;function nF(n){switch(n){default:return gt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function rF(n){if(void 0===n)return jr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Xr.OK:return pe.OK;case Xr.CANCELLED:return pe.CANCELLED;case Xr.UNKNOWN:return pe.UNKNOWN;case Xr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Xr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Xr.INTERNAL:return pe.INTERNAL;case Xr.UNAVAILABLE:return pe.UNAVAILABLE;case Xr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Xr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Xr.NOT_FOUND:return pe.NOT_FOUND;case Xr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Xr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Xr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Xr.ABORTED:return pe.ABORTED;case Xr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Xr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Xr.DATA_LOSS:return pe.DATA_LOSS;default:return gt()}}(En=Xr||(Xr={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";class lh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pp(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return E1(this.inner)}size(){return this.innerSize}}const B2=new Mr(Xe.comparator);function Us(){return B2}const iF=new Mr(Xe.comparator);function w0(...n){let e=iF;for(const t of n)e=e.insert(t.key,t);return e}function sF(n){let e=iF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $u(){return E0()}function oF(){return E0()}function E0(){return new lh(n=>n.toString(),(n,e)=>n.isEqual(e))}const j2=new Mr(Xe.comparator),H2=new Vn(Xe.comparator);function tn(...n){let e=H2;for(const t of n)e=e.add(t);return e}const $2=new Vn(zt);function AD(){return $2}class I0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,C0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new I0(Vt.min(),i,AD(),Us(),tn())}}class C0{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new C0(r,t,tn(),tn(),tn())}}class xD{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class aF{constructor(e,t){this.targetId=e,this.At=t}}class uF{constructor(e,t,r=ai.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class lF{constructor(){this.Rt=0,this.bt=dF(),this.Pt=ai.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=tn(),t=tn(),r=tn();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:gt()}}),new C0(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=dF()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class G2{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Us(),this.qt=cF(),this.Kt=new Vn(zt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(ID(a))if(0===r){const l=new Xe(a.path);this.jt(t,l,Qn.newNoDocument(l,Vt.min()))}else Lt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&ID(h.target)){const y=new Xe(h.target.path);null!==this.Ut.get(y)||this.ee(l,y)||this.jt(l,y,Qn.newNoDocument(y,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=tn();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(y=>{const w=this.Xt(y);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new I0(e,t,this.Kt,this.Ut,r);return this.Ut=Us(),this.qt=cF(),this.Kt=new Vn(zt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new lF,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Vn(zt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new lF),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function cF(){return new Mr(Xe.comparator)}function dF(){return new Mr(Xe.comparator)}const W2={asc:"ASCENDING",desc:"DESCENDING"},z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class q2{constructor(e,t){this.databaseId=e,this.gt=t}}function b0(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hF(n,e){return n.gt?e.toBase64():e.toUint8Array()}function K2(n,e){return b0(n,e.toTimestamp())}function Ei(n){return Lt(!!n),Vt.fromTimestamp(function(e){const t=ih(e);return new fr(t.seconds,t.nanos)}(n))}function yR(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function fF(n){const e=wn.fromString(n);return Lt(EF(e)),e}function D0(n,e){return yR(n.databaseId,e.path)}function Gu(n,e){const t=fF(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(gF(t))}function _R(n,e){return yR(n.databaseId,e)}function pF(n){const e=fF(n);return 4===e.length?wn.emptyPath():gF(e)}function T0(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gF(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function mF(n,e,t){return{name:D0(n,e),fields:t.value.mapValue.fields}}function yF(n,e,t){const r=Gu(n,e.name),i=Ei(e.updateTime),a=new Li({mapValue:{fields:e.fields}}),l=Qn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function S0(n,e){let t;if(e instanceof my)t={update:mF(n,e.key,e.value)};else if(e instanceof yy)t={delete:D0(n,e.key)};else if(e instanceof sc)t={update:mF(n,e.key,e.data),updateMask:rj(e.fieldMask)};else{if(!(e instanceof mR))return gt();t={verify:D0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof py)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gy)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:K2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:gt()),t;var i}function vR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?pr.updateTime(Ei(i.updateTime)):void 0!==i.exists?pr.exists(i.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Lt("REQUEST_TIME"===l.setToServerValue),h=new py):"appendMissingElements"in l?h=new vp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new wp(l.removeAllFromArray.values||[]):"increment"in l?h=new gy(a,l.increment):gt();const y=xr.fromServerFormat(l.fieldPath);return new _0(y,h)}(n,i)):[];var i;if(e.update){const i=Gu(n,e.update.name),a=new Li({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Do((e.updateMask.fieldPaths||[]).map(w=>xr.fromServerFormat(w)));return new sc(i,a,l,t,r)}return new my(i,a,t,r)}if(e.delete){const i=Gu(n,e.delete);return new yy(i,t)}if(e.verify){const i=Gu(n,e.verify);return new mR(i,t)}return gt()}function _F(n,e){return{documents:[_R(n,e.path)]}}function wR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=_R(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=_R(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const w=y.map(b=>function(D){if("=="===D.op){if(S1(D.value))return{unaryFilter:{field:_y(D.field),op:"IS_NAN"}};if(T1(D.value))return{unaryFilter:{field:_y(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(S1(D.value))return{unaryFilter:{field:_y(D.field),op:"IS_NOT_NAN"}};if(T1(D.value))return{unaryFilter:{field:_y(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_y(D.field),op:ej(D.op),value:D.value}}}(b));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:_y((b=w).field),direction:X2(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.gt||d0(w)?w:{value:w});var w,h,y;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function vF(n){let e=pF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=wF(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new dy(vy((D=b).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(b){let D;return D="object"==typeof b?b.value:b,d0(D)?null:D}(t.limit));let y=null;var b;t.startAt&&(y=new uh((b=t.startAt).values||[],!!b.before));let w=null;return t.endAt&&(w=function(b){return new uh(b.values||[],!b.before)}(t.endAt)),V1(e,i,l,a,h,"F",y,w)}function wF(n){return n?void 0!==n.unaryFilter?[nj(n)]:void 0!==n.fieldFilter?[tj(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>wF(e)).reduce((e,t)=>e.concat(t)):gt():[]}function X2(n){return W2[n]}function ej(n){return z2[n]}function _y(n){return{fieldPath:n.canonicalString()}}function vy(n){return xr.fromServerFormat(n.fieldPath)}function tj(n){return Vi.create(vy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function nj(n){switch(n.unaryFilter.op){case"IS_NAN":const e=vy(n.unaryFilter.field);return Vi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=vy(n.unaryFilter.field);return Vi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=vy(n.unaryFilter.field);return Vi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=vy(n.unaryFilter.field);return Vi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function rj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function EF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function gs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IF(e)),e=ij(n.get(t),e);return IF(e)}function ij(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function IF(n){return n+"\x01\x01"}function Wu(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&gt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let y;0===i.length?y=h:(i+=h,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:gt()}a=l+2}return new wn(r)}const CF=["userId","batchId"];function MD(n,e){return[n,gs(e)]}function bF(n,e,t){return[n,gs(e),t]}const sj={},oj=["prefixPath","collectionGroup","readTime","documentId"],aj=["prefixPath","collectionGroup","documentId"],uj=["collectionGroup","readTime","prefixPath","documentId"],lj=["canonicalId","targetId"],cj=["targetId","path"],dj=["path","targetId"],hj=["collectionId","parent"],fj=["indexId","uid"],pj=["uid","sequenceNumber"],gj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mj=["indexId","uid","orderedDocumentKey"],yj=["userId","collectionPath","documentId"],_j=["userId","collectionPath","largestBatchId"],vj=["userId","collectionGroup","largestBatchId"],DF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wj=[...DF,"documentOverlays"],TF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SF=TF,Ej=[...SF,"indexConfiguration","indexState","indexEntries"];class ER extends _1{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ii(n,e){const t=et(n);return Ua.M(t.ie,e)}class IR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&L2(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=v0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=v0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=oF();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const y=Q1(l,h);null!==y&&r.set(i.key,y),l.isValidDocument()||l.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),tn())}isEqual(e){return this.batchId===e.batchId&&uy(this.mutations,e.mutations,(t,r)=>J1(t,r))&&uy(this.baseMutations,e.baseMutations,(t,r)=>J1(t,r))}}class CR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=j2;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new CR(e,t,r,i)}}class bR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ch{constructor(e,t,r,i,a=Vt.min(),l=Vt.min(),h=ai.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new ch(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ch(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ch(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class AF{constructor(e){this.re=e}}function xF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:RD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:D0(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:b0(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ep(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:Ep(e.version)}}var i,a;return r}function RD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ep(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ip(n){const e=new fr(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function Cp(n,e){const t=(e.baseMutations||[]).map(a=>vR(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>vR(n.re,a)),i=fr.fromMillis(e.localWriteTimeMs);return new IR(e.batchId,i,t,r)}function A0(n){const e=Ip(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ip(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=ps(hy(pF(i.documents[0])))):r=ps(vF(n.query)),new ch(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ai.fromBase64String(n.resumeToken))}function MF(n,e){const t=Ep(e.snapshotVersion),r=Ep(e.lastLimboFreeSnapshotVersion);let i;i=ID(e.target)?_F(n.re,e.target):wR(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_p(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function DR(n){const e=vF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bD(e,e.limit,"L"):e}function TR(n,e){return new bR(e.largestBatchId,vR(n.re,e.overlayMutation))}function RF(n,e){const t=e.path.lastSegment();return[n,gs(e.path.popLast()),t]}function NF(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ep(r.readTime),documentKey:gs(r.documentKey.path),largestBatchId:r.largestBatchId}}class Cj{getBundleMetadata(e,t){return OF(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ip(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return OF(e).put({bundleId:(r=t).id,createTime:Ep(Ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return PF(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:DR(i.bundledQuery),readTime:Ip(i.readTime)};var i})}saveNamedQuery(e,t){return PF(e).put({name:(r=t).name,readTime:Ep(Ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function OF(n){return Ii(n,"bundles")}function PF(n){return Ii(n,"namedQueries")}class ND{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new ND(e,t.uid||"")}getOverlay(e,t){return x0(e).get(RF(this.userId,t)).next(r=>r?TR(this.It,r):null)}getOverlays(e,t){const r=$u();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new bR(t,l);i.push(this.ue(e,h))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(gs(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(x0(e).Y("collectionPathOverlayIndex",h))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=$u(),a=gs(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return x0(e).W("collectionPathOverlayIndex",l).next(h=>{for(const y of h){const w=TR(this.It,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=$u();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return x0(e).Z({index:"collectionGroupOverlayIndex",range:h},(y,w,b)=>{const D=TR(this.It,w);a.size()<i||D.largestBatchId===l?(a.set(D.getKey(),D),l=D.largestBatchId):b.done()}).next(()=>a)}ue(e,t){return x0(e).put(function(r,i,a){const[l,h,y]=RF(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:S0(r.re,a.mutation)}}(this.It,this.userId,t))}}function x0(n){return Ii(n,"documentOverlays")}class bp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Rr(e.integerValue));else if("doubleValue"in e){const r=Rr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),h0(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(gp(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?A1(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):gt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Xe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function bj(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function kF(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=bj(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}bp.Te=new bp;class Dj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=kF(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=kF(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Tj{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Sj{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class M0{constructor(){this.Be=new Dj,this.Le=new Tj(this.Be),this.Ue=new Sj(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Dp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Dp(this.indexId,this.documentKey,this.arrayValue,r)}}function Tp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=FF(n.arrayValue,e.arrayValue),0!==t?t:(t=FF(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function FF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Aj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=iR(e);if(void 0!==t&&!this.ze(t))return!1;const r=hp(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class xj{constructor(){this.Ye=new SR}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(bo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class SR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(wn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(wn.comparator)).toArray()}}const OD=new Uint8Array(0);class Mj{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new SR,this.Ze=new lh(r=>_p(r),(r,i)=>m0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:gs(i)};return LF(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[p1(t),""],!1,!0);return LF(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Wu(l.parent))}return r})}addFieldIndex(e,t){const r=PD(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=N0(e);return a.next(h=>{l.put(NF(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=PD(e),i=N0(e),a=R0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=R0(e);let i=!0;const a=new Map;return ue.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=tn();const h=[];return ue.forEach(a,(y,w)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=y,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Mt=>`${Mt.fieldPath}:${Mt.kind}`).join(",")}`} to execute ${_p(t)}`);const D=function(Mt,Ut){const Gt=iR(Ut);if(void 0===Gt)return null;for(const an of CD(Mt,Gt.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(w,y),M=function(Mt,Ut){const Gt=new Map;for(const an of hp(Ut))for(const ui of CD(Mt,an.fieldPath))switch(ui.op){case"==":case"in":Gt.set(an.fieldPath.canonicalString(),ui.value);break;case"not-in":case"!=":return Gt.set(an.fieldPath.canonicalString(),ui.value),Array.from(Gt.values())}return null}(w,y),V=function(Mt,Ut){const Gt=[];let an=!0;for(const ui of hp(Ut)){const q0=0===ui.kind?O1(Mt,ui.fieldPath,Mt.startAt):P1(Mt,ui.fieldPath,Mt.startAt);Gt.push(q0.value),an&&(an=q0.inclusive)}return new uh(Gt,an)}(w,y),W=function(Mt,Ut){const Gt=[];let an=!0;for(const ui of hp(Ut)){const q0=0===ui.kind?P1(Mt,ui.fieldPath,Mt.endAt):O1(Mt,ui.fieldPath,Mt.endAt);Gt.push(q0.value),an&&(an=q0.inclusive)}return new uh(Gt,an)}(w,y),me=this.nn(y,w,V),Me=this.nn(y,w,W),nt=this.sn(y,w,M),Ct=this.rn(y.indexId,D,me,V.inclusive,Me,W.inclusive,nt);return ue.forEach(Ct,Mt=>r.J(Mt,t.limit).next(Ut=>{Ut.forEach(Gt=>{const an=Xe.fromSegments(Gt.documentKey);l.has(an)||(l=l.add(an),h.push(an))})}))}).next(()=>h)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),b=[];for(let D=0;D<y;++D){const M=t?this.on(t[D/w]):OD,V=this.un(e,M,r[D%w],i),W=this.cn(e,M,a[D%w],l),me=h.map(Me=>this.un(e,M,Me,!0));b.push(...this.createRange(V,W,me))}return b}un(e,t,r,i){const a=new Dp(e,Xe.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Dp(e,Xe.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new Aj(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return ue.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new Vn(xr.comparator),y=!1;for(const w of l.filters){const b=w;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?y=!0:h=h.add(b.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(y?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new M0;for(const i of hp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);bp.Te.ce(a,l)}return r.$e()}on(e){const t=new M0;return bp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new M0;return bp.Te.ce(yp(this.databaseId,t),r.qe(function(i){const a=hp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new M0);let a=0;for(const l of hp(e)){const h=r[a++];for(const y of i)if(this.ln(t,l.fieldPath)&&p0(h))i=this.fn(i,l,h);else{const w=y.qe(l.kind);bp.Te.ce(h,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const y=new M0;y.seed(h.$e()),bp.Te.ce(l,y.qe(t.kind)),a.push(y)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof Vi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=PD(e),i=N0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return ue.forEach(a,h=>i.get([h.indexId,this.uid]).next(y=>{l.push(function(w,b){const D=b?new u0(b.sequenceNumber,new bo(Ip(b.readTime),new Xe(Wu(b.documentKey)),b.largestBatchId)):u0.empty(),M=w.fields.map(([V,W])=>new yD(xr.fromServerFormat(V),W));return new mD(w.indexId,w.collectionGroup,M,D)}(h,y))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=PD(e),a=N0(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ue.forEach(h,y=>a.put(NF(y.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ue.forEach(h,y=>this.wn(e,i,y).next(w=>{const b=this.mn(a,y);return w.isEqual(b)?ue.resolve():this.gn(e,a,y,w,b)}))))})}yn(e,t,r,i){return R0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return R0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=R0(e);let a=new Vn(Tp);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new Dp(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new Vn(Tp);const i=this.an(t,e);if(null==i)return r;const a=iR(t);if(null!=a){const l=e.data.field(a.fieldPath);if(p0(l))for(const h of l.arrayValue.values||[])r=r.add(new Dp(t.indexId,e.key,this.on(h),i))}else r=r.add(new Dp(t.indexId,e.key,OD,i));return r}gn(e,t,r,i,a){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,y,w,b,D){const M=h.getIterator(),V=y.getIterator();let W=ly(M),me=ly(V);for(;W||me;){let Me=!1,nt=!1;if(W&&me){const Ct=w(W,me);Ct<0?nt=!0:Ct>0&&(Me=!0)}else null!=W?nt=!0:Me=!0;Me?(b(me),me=ly(V)):nt?(D(W),W=ly(M)):(W=ly(M),me=ly(V))}}(i,a,Tp,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),ue.waitFor(l)}_n(e){let t=1;return N0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Tp(l,h)).filter((l,h,y)=>!h||0!==Tp(l,y[h-1]));const i=[];i.push(e);for(const l of r){const h=Tp(l,e),y=Tp(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&y<0)i.push(l),i.push(l.Ke());else if(y>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,OD,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,OD,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(VF)}getMinOffset(e,t){return ue.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||gt())).next(VF)}}function LF(n){return Ii(n,"collectionParents")}function R0(n){return Ii(n,"indexEntries")}function PD(n){return Ii(n,"indexConfiguration")}function N0(n){return Ii(n,"indexState")}function VF(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;sR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new bo(e.readTime,e.documentKey,t)}const UF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const y=r.Z({range:l},(b,D,M)=>(h++,M.delete()));a.push(y.next(()=>{Lt(1===h)}));const w=[];for(const b of t.mutations){const D=bF(e,b.key.path,t.batchId);a.push(i.delete(D)),w.push(b.key)}return ue.waitFor(a).next(()=>w)}function kD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class FD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Lt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new FD(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=wy(e),l=dh(e);return l.add({}).next(h=>{Lt("number"==typeof h);const y=new IR(h,t,r,i),w=function(M,V,W){const me=W.baseMutations.map(nt=>S0(M.re,nt)),Me=W.mutations.map(nt=>S0(M.re,nt));return{userId:V,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:me,mutations:Me}}(this.It,this.userId,y),b=[];let D=new Vn((M,V)=>zt(M.canonicalString(),V.canonicalString()));for(const M of i){const V=bF(this.userId,M.key.path,h);D=D.add(M.key.path.popLast()),b.push(l.put(w)),b.push(a.put(V,sj))}return D.forEach(M=>{b.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.In[h]=y.keys()}),ue.waitFor(b).next(()=>y)})}lookupMutationBatch(e,t){return dh(e).get(t).next(r=>r?(Lt(r.userId===this.userId),Cp(this.It,r)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return dh(e).Z({index:"userMutationsIndex",range:i},(l,h,y)=>{h.userId===this.userId&&(Lt(h.batchId>=r),a=Cp(this.It,h)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dh(e).W("userMutationsIndex",t).next(r=>r.map(i=>Cp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=MD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return wy(e).Z({range:i},(l,h,y)=>{const[w,b,D]=l,M=Wu(b);if(w===this.userId&&t.path.isEqual(M))return dh(e).get(D).next(V=>{if(!V)throw gt();Lt(V.userId===this.userId),a.push(Cp(this.It,V))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(zt);const i=[];return t.forEach(a=>{const l=MD(this.userId,a.path),h=IDBKeyRange.lowerBound(l),y=wy(e).Z({range:h},(w,b,D)=>{const[M,V,W]=w,me=Wu(V);M===this.userId&&a.path.isEqual(me)?r=r.add(W):D.done()});i.push(y)}),ue.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=MD(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new Vn(zt);return wy(e).Z({range:l},(y,w,b)=>{const[D,M,V]=y,W=Wu(M);D===this.userId&&r.isPrefixOf(W)?W.length===i&&(h=h.add(V)):b.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(dh(e).get(a).next(l=>{if(null===l)throw gt();Lt(l.userId===this.userId),r.push(Cp(this.It,l))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return BF(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return wy(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const y=Wu(a[1]);i.push(y)}else h.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return jF(e,this.userId,t)}Rn(e){return HF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jF(n,e,t){const r=MD(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return wy(n).Z({range:a,X:!0},(h,y,w)=>{const[b,D,M]=h;b===e&&D===i&&(l=!0),w.done()}).next(()=>l)}function dh(n){return Ii(n,"mutations")}function wy(n){return Ii(n,"documentMutations")}function HF(n){return Ii(n,"mutationQueues")}class Sp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Sp(0)}static vn(){return new Sp(-1)}}class Rj{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Sp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Vt.fromTimestamp(new fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ey(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Ey(e).Z((l,h)=>{const y=A0(h);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Ey(e).Z((r,i)=>{const a=A0(i);t(a)})}Vn(e){return $F(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Sn(e,t){return $F(e).put("targetGlobalKey",t)}Dn(e,t){return Ey(e).put(MF(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_p(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ey(e).Z({range:i,index:"queryTargetsIndex"},(l,h,y)=>{const w=A0(h);m0(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=hh(e);return t.forEach(l=>{const h=gs(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=hh(e);return ue.forEach(t,a=>{const l=gs(a.path);return ue.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=hh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hh(e);let a=tn();return i.Z({range:r,X:!0},(l,h,y)=>{const w=Wu(l[1]),b=new Xe(w);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=gs(t.path),i=IDBKeyRange.bound([r],[p1(r)],!1,!0);let a=0;return hh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],y,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}se(e,t){return Ey(e).get(t).next(r=>r?A0(r):null)}}function Ey(n){return Ii(n,"targets")}function $F(n){return Ii(n,"targetGlobal")}function hh(n){return Ii(n,"targetDocuments")}function GF([n,e],[t,r]){const i=zt(n,t);return 0===i?zt(e,r):i}class Nj{constructor(e){this.xn=e,this.buffer=new Vn(GF),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();GF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Oj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){rh(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nh(r)}yield t.Fn(3e5)}))}}class Pj{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Vs.at);const r=new Nj(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(UF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UF):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,y,w;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(w=Date.now(),nR()<=Jo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(y-h)+`ms\n\tRemoved ${D} documents in `+(w-y)+`ms\nTotal Duration: ${w-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class kj{constructor(e,t){this.db=e,this.garbageCollector=new Pj(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return LD(e,r)}removeReference(e,t,r){return LD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return LD(e,t)}Gn(e,t){return function(r,i){let a=!1;return HF(r).tt(l=>jF(r,l,i).next(h=>(h&&(a=!0),ue.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const y=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Vt.min()),hh(e).delete([0,gs(l.path)])))});i.push(y)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return LD(e,t)}Kn(e,t){const r=hh(e);let i,a=Vs.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:y,sequenceNumber:w})=>{0===l?(a!==Vs.at&&t(new Xe(Wu(i)),a),a=w,i=y):a=Vs.at}).next(()=>{a!==Vs.at&&t(new Xe(Wu(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LD(n,e){return hh(n).put((r=n.currentSequenceNumber,{targetId:0,path:gs(e.path),sequenceNumber:r}));var r}class WF{constructor(){this.changes=new lh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Fj{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ap(e).put(r)}removeEntry(e,t,r){return Ap(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],RD(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return Ap(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(O0(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return Ap(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(O0(t))},(i,a)=>{r={document:this.jn(t,a),size:kD(a)}}).next(()=>r)}getEntries(e,t){let r=Us();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=Us(),i=new Mr(Xe.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,kD(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ue.resolve();let i=new Vn(ZF);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(O0(i.first()),O0(i.last())),l=i.getIterator();let h=l.getNext();return Ap(e).Z({index:"documentKeyIndex",range:a},(y,w,b)=>{const D=Xe.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&ZF(h,D)<0;)r(h,null),h=l.getNext();h&&h.isEqual(D)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?b.j(O0(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),RD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ap(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Us();for(const y of l){const w=this.jn(Xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Us();const l=KF(t,r),h=KF(t,bo.max());return Ap(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(y,w,b)=>{const D=this.jn(Xe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(D.key,D),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new Lj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qF(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}Qn(e,t){return qF(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Ij(n,e){let t;if(e.document)t=yF(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=Ip(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=Xe.fromSegments(e.unknownDocument.path),i=Ip(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new fr(r[0],r[1]);return Vt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return Qn.newInvalidDocument(e)}}function zF(n){return new Fj(n)}class Lj extends WF{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new lh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Vn((a,l)=>zt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const y=xF(this.Yn.It,l);i=i.add(a.path.popLast()),r+=kD(y)-h.size,t.push(this.Yn.addEntry(e,a,y))}else if(r-=h.size,this.trackRemovals){const y=xF(this.Yn.It,l.convertToNoDocument(Vt.min()));t.push(this.Yn.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function qF(n){return Ii(n,"remoteDocumentGlobal")}function Ap(n){return Ii(n,"remoteDocumentsV14")}function O0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function KF(n,e){const t=e.documentKey.path.toArray();return[n,RD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ZF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=zt(t[a],r[a]),i)return i;return i=zt(t.length,r.length),i||(i=zt(t[t.length-2],r[r.length-2]),i||zt(t[t.length-1],r[r.length-1]))}class Vj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class YF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&v0(r.mutation,i,Do.empty(),fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,tn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=tn()){const i=$u();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=w0();return a.forEach((h,y)=>{l=l.insert(h,y.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=$u();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,tn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=Us();const l=E0(),h=E0();return t.forEach((y,w)=>{const b=r.get(w.key);i.has(w.key)&&(void 0===b||b.mutation instanceof sc)?a=a.insert(w.key,w):void 0!==b&&(l.set(w.key,b.mutation.getFieldMask()),v0(b.mutation,w,b.mutation.getFieldMask(),fr.now()))}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,b)=>l.set(w,b)),t.forEach((w,b)=>{var D;return h.set(w,new Vj(b,null!==(D=l.get(w))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const r=E0();let i=new Mr((l,h)=>l-h),a=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let b=r.get(y)||Do.empty();b=h.applyToLocalView(w,b),r.set(y,b);const D=(i.get(h.batchId)||tn()).add(y);i=i.insert(h.batchId,D)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),w=y.key,b=y.value,D=oF();b.forEach(M=>{if(!a.has(M)){const V=Q1(t.get(M),r.get(M));null!==V&&D.set(M,V),a=a.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,D))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve($u());let h=-1,y=a;return l.next(w=>ue.forEach(w,(b,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),a.get(b)?ue.resolve():this.getBaseDocument(e,b,D).next(M=>{y=y.insert(b,M)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,tn())).next(b=>({batchId:h,changes:sF(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=w0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=w0();return this.indexManager.getCollectionParents(e,i).next(l=>ue.forEach(l,h=>{const y=(w=t,b=h.child(i),new ic(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,b;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((b,D)=>{a=a.insert(b,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,y)=>{const w=y.getKey();null===i.get(w)&&(i=i.insert(w,Qn.newInvalidDocument(w)))});let l=w0();return i.forEach((h,y)=>{const w=a.get(h);void 0!==w&&v0(w.mutation,y,Do.empty(),fr.now()),gR(t,y)&&(l=l.insert(h,y))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(Qn.newInvalidDocument(t))}}class Uj{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ei(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:DR(r.bundledQuery),readTime:Ei(r.readTime)}),ue.resolve();var r}}class Bj{constructor(){this.overlays=new Mr(Xe.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$u();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=$u(),a=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const y=h.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Mr((w,b)=>w-b);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let b=a.get(w.largestBatchId);null===b&&(b=$u(),a=a.insert(w.largestBatchId,b)),b.set(w.getKey(),w)}}const h=$u(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,b)=>h.set(w,b)),!(h.size()>=i)););return ue.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new bR(t,r));let a=this.es.get(t);void 0===a&&(a=tn(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class AR{constructor(){this.ns=new Vn(Ci.ss),this.rs=new Vn(Ci.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ci(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ci(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Xe(new wn([])),r=new Ci(t,e),i=new Ci(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Xe(new wn([])),r=new Ci(t,e),i=new Ci(t,e+1);let a=tn();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Ci(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ci{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Xe.comparator(e.key,t.key)||zt(e._s,t._s)}static os(e,t){return zt(e._s,t._s)||Xe.comparator(e.key,t.key)}}class jj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Vn(Ci.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new IR(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new Ci(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ci(t,0),i=new Ci(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(zt);return t.forEach(i=>{const a=new Ci(i,0),l=new Ci(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new Ci(new Xe(a),0);let h=new Vn(zt);return this.gs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(y._s)),!0)},l),ue.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ue.forEach(t.mutations,i=>{const a=new Ci(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ci(t,0),i=this.gs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Hj{constructor(e){this.Es=e,this.docs=new Mr(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=Us();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Qn.newInvalidDocument(i))}),ue.resolve(r)}getAllFromCollection(e,t,r){let i=Us();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:y}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||sR(m1(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ue.resolve(i)}getAllFromCollectionGroup(e,t,r,i){gt()}As(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $j(this)}getSize(e){return ue.resolve(this.size)}}class $j extends WF{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Gj{constructor(e){this.persistence=e,this.Rs=new lh(t=>_p(t),m0),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new AR,this.targetCount=0,this.vs=Sp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Sp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class QF{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Vs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Gj(this),this.indexManager=new xj,this.remoteDocumentCache=new Hj(r=>this.referenceDelegate.xs(r)),this.It=new AF(t),this.Ns=new Uj(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new jj(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new Wj(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Wj extends _1{constructor(e){super(),this.currentSequenceNumber=e}}class VD{constructor(e){this.persistence=e,this.Fs=new AR,this.$s=null}static Bs(e){return new VD(e)}get Ls(){if(this.$s)return this.$s;throw gt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,r=>{const i=Xe.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class zj{constructor(e){this.It=e}$(e,t,r,i){const a=new _D("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CF,{unique:!0}),h.createObjectStore("documentMutations"),JF(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),JF(e)),l=l.next(()=>function(h){const y=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,y){return y.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",CF,{unique:!0});const b=y.store("mutations"),D=w.map(M=>b.put(M));return ue.waitFor(D)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const y=h.createObjectStore("documentOverlays",{keyPath:yj});y.createIndex("collectionPathOverlayIndex",_j,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",vj,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const y=h.createObjectStore("remoteDocumentsV14",{keyPath:oj});y.createIndex("documentKeyIndex",aj),y.createIndex("collectionGroupIndex",uj)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:fj}).createIndex("sequenceNumberIndex",pj,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:gj}).createIndex("documentKeyIndex",mj,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=kD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ue.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>ue.forEach(h,y=>{Lt(y.userId===a.userId);const w=Cp(this.It,y);return BF(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const y=new wn(l),w=[0,gs(y)];a.push(t.get(w).next(b=>b?ue.resolve():t.put({targetId:0,path:gs(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:hj});const r=t.store("collectionParents"),i=new SR,a=l=>{if(i.add(l)){const h=l.lastSegment(),y=l.popLast();return r.put({collectionId:h,parent:gs(y)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const y=new wn(l);return a(y.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,y],w)=>{const b=Wu(h);return a(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=A0(i),l=MF(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),y=(w=l,w.document?new Xe(wn.fromString(w.document.name).popFirst(5)):w.noDocument?Xe.fromSegments(w.noDocument.path):w.unknownDocument?Xe.fromSegments(w.unknownDocument.path):gt()).path.toArray();var w;const b={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(b))}).next(()=>ue.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=zF(this.It),a=new QF(VD.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(y=>{var w;let b=null!==(w=h.get(y.userId))&&void 0!==w?w:tn();Cp(this.It,y).keys().forEach(D=>b=b.add(D)),h.set(y.userId,b)}),ue.forEach(h,(y,w)=>{const b=new wi(w),D=ND.oe(this.It,b),M=a.getIndexManager(b),V=FD.oe(b,this.It,M,a.referenceDelegate);return new YF(i,V,D,M).recalculateAndSaveOverlaysForDocumentKeys(new ER(t,Vs.at),y).next()})})}}function JF(n){n.createObjectStore("targetDocuments",{keyPath:cj}).createIndex("documentTargetsIndex",dj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lj,{unique:!0}),n.createObjectStore("targetGlobal")}const xR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class MR{constructor(e,t,r,i,a,l,h,y,w,b,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=b,this.Xs=D,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=M=>Promise.resolve(),!MR.C())throw new Fe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kj(this,i),this.ii=t+"main",this.It=new AF(y),this.ri=new Ua(this.ii,this.Xs,new zj(this.It)),this.Cs=new Rj(this.referenceDelegate,this.It),this.remoteDocumentCache=zF(this.It),this.Ns=new Cj,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,xR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Vs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>UD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(rh(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return P0(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return UD(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ii(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(y=>-1===l.indexOf(y));return ue.forEach(h,y=>i.delete(y.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):P0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(pe.FAILED_PRECONDITION,xR);return!1}}return!(!this.networkEnabled||!this.inForeground)||UD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ER(t,Vs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>UD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return FD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Mj(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return ND.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Ej:14===l?SF:13===l?TF:12===l?wj:11===l?DF:void gt();var l;let h;return this.ri.runTransaction(e,i,a,y=>(h=new ER(y,this.Ss?this.Ss.next():Vs.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(pe.FAILED_PRECONDITION,y1);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(y=>(h.raiseOnCommittedEvent(),y))}Vi(e){return P0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(pe.FAILED_PRECONDITION,xR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return P0(e).put("owner",t)}static C(){return Ua.C()}_i(e){const t=P0(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){jr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function P0(n){return Ii(n,"owner")}function UD(n){return Ii(n,"clientMetadata")}function RR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class NR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=tn(),i=tn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new NR(e,t.fromCache,r,i)}}class XF{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(U1(t))return ue.resolve(null);let r=ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=bD(t,null,"F"),r=ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=tn(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.Fi(t,h);return this.$i(t,w,l,y.readTime)?this.ki(e,bD(t,null,"F")):this.Bi(e,w,t,y)}))})))}Oi(e,t,r,i){return U1(t)||i.isEqual(Vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(nR()<=Jo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pR(t)),this.Bi(e,l,t,g1(i,-1)))})}Fi(e,t){let r=new Vn(H1(e));return t.forEach((i,a)=>{gR(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return nR()<=Jo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",pR(t)),this.Ni.getDocumentsMatchingQuery(e,t,bo.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class qj{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Mr(zt),this.qi=new lh(a=>_p(a),m0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YF(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function eL(n,e,t,r){return new qj(n,e,t,r)}function tL(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,Ee.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let y=tn();for(const w of i){l.push(w.batchId);for(const b of w.mutations)y=y.add(b.key)}for(const w of a){h.push(w.batchId);for(const b of w.mutations)y=y.add(b.key)}return t.localDocuments.getDocuments(r,y).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),OR.apply(this,arguments)}function Kj(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,y,w){const b=y.batch,D=b.keys();let M=ue.resolve();return D.forEach(V=>{M=M.next(()=>w.getEntry(h,V)).next(W=>{const me=y.docVersions.get(V);Lt(null!==me),W.version.compareTo(me)<0&&(b.applyToRemoteDocument(W,y),W.isValidDocument()&&(W.setReadTime(y.commitVersion),w.addEntry(W)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=tn();for(let y=0;y<l.mutationResults.length;++y)l.mutationResults[y].transformResults.length>0&&(h=h.add(l.batch.mutations[y].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nL(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Zj(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((b,D)=>{const M=i.get(D);if(!M)return;h.push(t.Cs.removeMatchingKeys(a,b.removedDocuments,D).next(()=>t.Cs.addMatchingKeys(a,b.addedDocuments,D)));let V=M.withSequenceNumber(a.currentSequenceNumber);var W,me,Me;e.targetMismatches.has(D)?V=V.withResumeToken(ai.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(D,V),me=V,Me=b,(0===(W=M).resumeToken.approximateByteSize()||me.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,V))});let y=Us(),w=tn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),h.push(rL(a,l,e.documentUpdates).next(b=>{y=b.Wi,w=b.zi})),!r.isEqual(Vt.min())){const b=t.Cs.getLastRemoteSnapshotVersion(a).next(D=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(b)}return ue.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.Ui=i,a))}function rL(n,e,t){let r=tn(),i=tn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Us();return t.forEach((h,y)=>{const w=a.get(h);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),y.isNoDocument()&&y.version.isEqual(Vt.min())?(e.removeEntry(h,y.readTime),l=l.insert(h,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),l=l.insert(h,y)):$e("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",y.version)}),{Wi:l,zi:i}})}function Yj(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Iy(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new ch(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Cy(n,e,t){return PR.apply(this,arguments)}function PR(){return PR=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!rh(l))throw l;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),PR.apply(this,arguments)}function BD(n,e,t){const r=et(n);let i=Vt.min(),a=tn();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,y,w){const b=et(h),D=b.qi.get(w);return void 0!==D?ue.resolve(b.Ui.get(D)):b.Cs.getTargetData(y,w)}(r,l,ps(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(y=>{a=y})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Vt.min(),t?a:tn())).next(h=>(oL(r,j1(e),h),{documents:h,Hi:a})))}function iL(n,e){const t=et(n),r=et(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function sL(n,e){const t=et(n),r=t.Ki.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,g1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(oL(t,e,i),i))}function oL(n,e,t){let r=n.Ki.get(e)||Vt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function kR(){return kR=(0,Ee.Z)(function*(n,e,t,r){const i=et(n);let a=tn(),l=Us();for(const w of t){const b=e.Ji(w.metadata.name);w.document&&(a=a.add(b));const D=e.Yi(w);D.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(b,D)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),y=yield Iy(i,(w=r,ps(hy(wn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>rL(w,h,l).next(b=>(h.apply(w),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Cs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,b.Wi,b.zi)).next(()=>b.Wi)))}),kR.apply(this,arguments)}function Jj(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,Ee.Z)(function*(n,e,t=tn()){const r=yield Iy(n,ps(DR(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Ei(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(ai.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),FR.apply(this,arguments)}function aL(n,e){return`firestore_clients_${n}_${e}`}function uL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function LR(n,e){return`firestore_targets_${n}_${e}`}class jD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Fe(i.error.code,i.error.message))),l?new jD(e,t,i.state,a):(jr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class k0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new k0(e,r.state,i):(jr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=AD();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=b1(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new HD(e,a):(jr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class VR{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new VR(t.clientId,t.onlineState):(jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class UR{constructor(){this.activeTargetIds=AD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BR{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Mr(zt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=aL(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new UR),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(aL(e.persistenceKey,i));if(a){const l=HD.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(LR(this.persistenceKey,e));if(r){const i=k0.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(LR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=Vs.at;if(null!=a)try{const h=JSON.parse(a);Lt("number"==typeof h),l=h}catch(h){jr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Vs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new jD(this.currentUser,e,t,r),a=uL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=uL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=LR(this.persistenceKey,e),a=new k0(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return HD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return jD.Zi(new wi(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return k0.Zi(i,t)}yr(e){return VR.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(y=>{i.has(y)||l.push(y)}),i.forEach(y=>{a.has(y)||h.push(y)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=AD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class lL{constructor(){this.Lr=new UR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new UR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Xj{qr(e){}shutdown(){}}class cL{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const eH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class nH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);$e("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(y=>($e("RestConnection","Received: ",y),y),y=>{throw dp("RestConnection",`${e} failed with error: `,y,"url: ",l,"request:",r),y})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ay,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${eH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new e2;h.setWithCredentials(!0),h.listenOnce(QB.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case tR.NO_ERROR:const w=h.getResponseJson();$e("Connection","XHR received:",JSON.stringify(w)),a(w);break;case tR.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),l(new Fe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case tR.HTTP_ERROR:const b=h.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',b,"response text:",h.getResponseText()),b>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const M=function(V){const W=V.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(W)>=0?W:pe.UNKNOWN}(D.status);l(new Fe(M,D.message))}else l(new Fe(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Fe(pe.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);h.send(t,"POST",y,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZB(),l=YB(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new XB({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const y=i.join("");$e("Connection","Creating WebChannel: "+y,h);const w=a.createWebChannel(y,h);let b=!1,D=!1;const M=new tH({Hr:W=>{D?$e("Connection","Not sending because WebChannel is closed:",W):(b||($e("Connection","Opening WebChannel transport."),w.open(),b=!0),$e("Connection","WebChannel sending:",W),w.send(W))},Jr:()=>w.close()}),V=(W,me,Me)=>{W.listen(me,nt=>{try{Me(nt)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return V(w,gD.EventType.OPEN,()=>{D||$e("Connection","WebChannel transport opened.")}),V(w,gD.EventType.CLOSE,()=>{D||(D=!0,$e("Connection","WebChannel transport closed"),M.io())}),V(w,gD.EventType.ERROR,W=>{D||(D=!0,dp("Connection","WebChannel transport errored:",W),M.io(new Fe(pe.UNAVAILABLE,"The operation could not be completed")))}),V(w,gD.EventType.MESSAGE,W=>{var me;if(!D){const Me=W.data[0];Lt(!!Me);const nt=Me,Ct=nt.error||(null===(me=nt[0])||void 0===me?void 0:me.error);if(Ct){$e("Connection","WebChannel received error:",Ct);const Mt=Ct.status;let Ut=function(an){const ui=Xr[an];if(void 0!==ui)return rF(ui)}(Mt),Gt=Ct.message;void 0===Ut&&(Ut=pe.INTERNAL,Gt="Unknown error status: "+Mt+" with message "+Ct.message),D=!0,M.io(new Fe(Ut,Gt)),w.close()}else $e("Connection","WebChannel received:",Me),M.ro(Me)}}),V(l,JB.STAT_EVENT,W=>{W.stat===l1.PROXY?$e("Connection","Detected buffering proxy"):W.stat===l1.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.so()},0),M}}function dL(){return typeof window<"u"?window:null}function $D(){return typeof document<"u"?document:null}function F0(n){return new q2(n,!0)}class jR{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class hL{constructor(e,t,r,i,a,l,h,y){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new jR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Fe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rH extends hL{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Y2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:gt(),i=e.targetChange.targetIds||[],a=function(y,w){return y.gt?(Lt(void 0===w||"string"==typeof w),ai.fromBase64String(w||"")):(Lt(void 0===w||w instanceof Uint8Array),ai.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(y){const w=void 0===y.code?pe.UNKNOWN:rF(y.code);return new Fe(w,y.message||"")}(l);t=new uF(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Gu(n,r.document.name),a=Ei(r.document.updateTime),l=new Li({mapValue:{fields:r.document.fields}}),h=Qn.newFoundDocument(i,a,l);t=new xD(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Gu(n,r.document),a=r.readTime?Ei(r.readTime):Vt.min(),l=Qn.newNoDocument(i,a);t=new xD([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Gu(n,r.document);t=new xD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return gt();{const r=e.filter,a=new U2(r.count||0);t=new aF(r.targetId,a)}}var y;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Vt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Vt.min():a.readTime?Ei(a.readTime):Vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=T0(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=ID(h)?{documents:_F(i,h)}:{query:wR(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=hF(i,a.resumeToken):a.snapshotVersion.compareTo(Vt.min())>0&&(l.readTime=b0(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function J2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=T0(this.It),t.removeTarget=e,this.Bo(t)}}class iH extends hL{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Q2(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let a=Ei(r.updateTime?r.updateTime:i);return a.isEqual(Vt.min())&&(a=Ei(i)),new F2(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.Zo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=T0(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>S0(this.It,r))};this.Bo(t)}}class sH extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(pe.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(pe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class aH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(jr(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class uH{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var y;oc(l)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ee.Z)(function*(w){const b=et(w);b._u.add(4),yield by(b),b.gu.set("Unknown"),b._u.delete(4),yield L0(b)}),function(w){return y.apply(this,arguments)})(l))}))}),this.gu=new aH(r,i)}}function L0(n){return $R.apply(this,arguments)}function $R(){return $R=(0,Ee.Z)(function*(n){if(oc(n))for(const e of n.wu)yield e(!0)}),$R.apply(this,arguments)}function by(n){return GR.apply(this,arguments)}function GR(){return GR=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),GR.apply(this,arguments)}function GD(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),qR(t)?zR(t):Ty(t).ko()&&WR(t,e))}function V0(n,e){const t=et(n),r=Ty(t);t.du.delete(e),r.ko()&&fL(t,e),0===t.du.size&&(r.ko()?r.Fo():oc(t)&&t.gu.set("Unknown"))}function WR(n,e){n.yu.Mt(e.targetId),Ty(n).zo(e)}function fL(n,e){n.yu.Mt(e),Ty(n).Ho(e)}function zR(n){n.yu=new G2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ty(n).start(),n.gu.uu()}function qR(n){return oc(n)&&!Ty(n).No()&&n.du.size>0}function oc(n){return 0===et(n)._u.size}function pL(n){n.yu=void 0}function lH(n){return KR.apply(this,arguments)}function KR(){return KR=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{WR(n,e)})}),KR.apply(this,arguments)}function cH(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ee.Z)(function*(n,e){pL(n),qR(n)?(n.gu.hu(e),zR(n)):n.gu.set("Unknown")}),ZR.apply(this,arguments)}function dH(n,e,t){return YR.apply(this,arguments)}function YR(){return YR=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof uF&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield WD(n,r)}else if(e instanceof xD?n.yu.Gt(e):e instanceof aF?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Vt.min()))try{const r=yield nL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((h,y)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.du.get(y);w&&i.du.set(y,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const y=i.du.get(h);if(!y)return;i.du.set(h,y.withResumeToken(ai.EMPTY_BYTE_STRING,y.snapshotVersion)),fL(i,h);const w=new ch(y.target,h,1,y.sequenceNumber);WR(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield WD(n,r)}var r}),YR.apply(this,arguments)}function WD(n,e,t){return QR.apply(this,arguments)}function QR(){return QR=(0,Ee.Z)(function*(n,e,t){if(!rh(e))throw e;n._u.add(1),yield by(n),n.gu.set("Offline"),t||(t=()=>nL(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield L0(n)}))}),QR.apply(this,arguments)}function gL(n,e){return e().catch(t=>WD(n,t,e))}function Dy(n){return JR.apply(this,arguments)}function JR(){return JR=(0,Ee.Z)(function*(n){const e=et(n),t=fh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;hH(e);)try{const i=yield Yj(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,fH(e,i)}catch(i){yield WD(e,i)}mL(e)&&yL(e)}),JR.apply(this,arguments)}function hH(n){return oc(n)&&n.fu.length<10}function fH(n,e){n.fu.push(e);const t=fh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function mL(n){return oc(n)&&!fh(n).No()&&n.fu.length>0}function yL(n){fh(n).start()}function pH(n){return XR.apply(this,arguments)}function XR(){return XR=(0,Ee.Z)(function*(n){fh(n).eu()}),XR.apply(this,arguments)}function gH(n){return eN.apply(this,arguments)}function eN(){return eN=(0,Ee.Z)(function*(n){const e=fh(n);for(const t of n.fu)e.Xo(t.mutations)}),eN.apply(this,arguments)}function mH(n,e,t){return tN.apply(this,arguments)}function tN(){return tN=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=CR.from(r,e,t);yield gL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dy(n)}),tN.apply(this,arguments)}function yH(n,e){return nN.apply(this,arguments)}function nN(){return nN=(0,Ee.Z)(function*(n,e){var t;e&&fh(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(nF(a=i.code)&&a!==pe.ABORTED){const l=r.fu.shift();fh(r).Mo(),yield gL(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Dy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),mL(n)&&yL(n)}),nN.apply(this,arguments)}function _L(n,e){return rN.apply(this,arguments)}function rN(){return rN=(0,Ee.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=oc(t);t._u.add(3),yield by(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield L0(t)}),rN.apply(this,arguments)}function iN(n,e){return sN.apply(this,arguments)}function sN(){return sN=(0,Ee.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield L0(t)):e||(t._u.add(2),yield by(t),t.gu.set("Unknown"))}),sN.apply(this,arguments)}function Ty(n){return n.pu||(n.pu=function(e,t,r){const i=et(e);return i.su(),new rH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:lH.bind(null,n),Zr:cH.bind(null,n),Wo:dH.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),qR(n)?zR(n):n.gu.set("Unknown")):(yield n.pu.stop(),pL(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function fh(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.su(),new iH(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:pH.bind(null,n),Zr:yH.bind(null,n),tu:gH.bind(null,n),Zo:mH.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield Dy(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class oN{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new oN(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sy(n,e){if(jr("AsyncQueue",`${e}: ${n}`),rh(n))return new Fe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ay{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=w0(),this.sortedSet=new Mr(this.comparator)}static emptySet(e){return new Ay(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ay)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ay;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class vL{constructor(){this.Tu=new Mr(Xe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):gt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class xy{constructor(e,t,r,i,a,l,h,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new xy(e,t,Ay.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&y0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class _H{constructor(){this.Au=void 0,this.listeners=[]}}class vH{constructor(){this.queries=new lh(e=>B1(e),y0),this.onlineState="Unknown",this.Ru=new Set}}function aN(n,e){return uN.apply(this,arguments)}function uN(){return uN=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new _H),i)try{a.Au=yield t.onListen(r)}catch(l){const h=Sy(l,`Initialization of query '${pR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&dN(t)}),uN.apply(this,arguments)}function lN(n,e){return cN.apply(this,arguments)}function cN(){return cN=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),cN.apply(this,arguments)}function wH(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&dN(t)}function EH(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function dN(n){n.Ru.forEach(e=>{e.next()})}class hN{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new xy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=xy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class IH{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class wL{constructor(e){this.It=e}Ji(e){return Gu(this.It,e)}Yi(e){return e.metadata.exists?yF(this.It,e.document,!1):Qn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ei(e)}}class CH{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=wn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new wL(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||tn()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function Qj(n,e,t,r){return kR.apply(this,arguments)}(e.localStore,new wL(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield Jj(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function EL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class IL{constructor(e){this.key=e}}class CL{constructor(e){this.key=e}}class bL{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=tn(),this.mutatedKeys=tn(),this.Gu=H1(e),this.Qu=new Ay(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new vL,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,D)=>{const M=i.get(b),V=gR(this.query,D)?D:null,W=!!M&&this.mutatedKeys.has(M.key),me=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Me=!1;M&&V?M.data.isEqual(V.data)?W!==me&&(r.track({type:3,doc:V}),Me=!0):this.Hu(M,V)||(r.track({type:2,doc:V}),Me=!0,(y&&this.Gu(V,y)>0||w&&this.Gu(V,w)<0)&&(h=!0)):!M&&V?(r.track({type:0,doc:V}),Me=!0):M&&!V&&(r.track({type:1,doc:M}),Me=!0,(y||w)&&(h=!0)),Me&&(V?(l=l.add(V),a=me?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Qu:l,zu:r,$i:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((w,b)=>function(D,M){const V=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return V(D)-V(M)}(w.type,b.type)||this.Gu(w.doc,b.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,y=h!==this.qu;return this.qu=h,0!==a.length||y?{snapshot:new xy(this.query,e.Qu,i,a,e.mutatedKeys,0===h,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new vL,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=tn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new CL(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new IL(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=tn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return xy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class bH{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DH{constructor(e){this.key=e,this.nc=!1}}class TH{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new lh(h=>B1(h),y0),this.rc=new Map,this.oc=new Set,this.uc=new Mr(Xe.comparator),this.cc=new Map,this.ac=new AR,this.hc={},this.lc=new Map,this.fc=Sp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function SH(n,e){return fN.apply(this,arguments)}function fN(){return fN=(0,Ee.Z)(function*(n,e){const t=FN(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield Iy(t.localStore,ps(e));t.isPrimaryClient&&GD(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield pN(t,e,r,"current"===h,l.resumeToken)}return i}),fN.apply(this,arguments)}function pN(n,e,t,r,i){return gN.apply(this,arguments)}function gN(){return gN=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(D,M,V)=>{return(W=(0,Ee.Z)(function*(me,Me,nt,Ct){let Mt=Me.view.Wu(nt);Mt.$i&&(Mt=yield BD(me.localStore,Me.query,!1).then(({documents:an})=>Me.view.Wu(an,Mt)));const Ut=Ct&&Ct.targetChanges.get(Me.targetId),Gt=Me.view.applyChanges(Mt,me.isPrimaryClient,Ut);return DN(me,Me.targetId,Gt.Xu),Gt.snapshot}),function(me,Me,nt,Ct){return W.apply(this,arguments)})(n,D,M,V);var W};const a=yield BD(n.localStore,e,!0),l=new bL(e,a.Hi),h=l.Wu(a.documents),y=C0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(h,n.isPrimaryClient,y);DN(n,t,w.Xu);const b=new bH(e,t,l);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),gN.apply(this,arguments)}function AH(n,e){return mN.apply(this,arguments)}function mN(){return mN=(0,Ee.Z)(function*(n,e){const t=et(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!y0(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Cy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),V0(t.remoteStore,r.targetId),My(t,r.targetId)}).catch(nh))):(My(t,r.targetId),yield Cy(t.localStore,r.targetId,!0))}),mN.apply(this,arguments)}function yN(){return yN=(0,Ee.Z)(function*(n,e,t){const r=LN(n);try{const i=yield function(a,l){const h=et(a),y=fr.now(),w=l.reduce((M,V)=>M.add(V.key),tn());let b,D;return h.persistence.runTransaction("Locally write mutations","readwrite",M=>{let V=Us(),W=tn();return h.Gi.getEntries(M,w).next(me=>{V=me,V.forEach((Me,nt)=>{nt.isValidDocument()||(W=W.add(Me))})}).next(()=>h.localDocuments.getOverlayedDocuments(M,V)).next(me=>{b=me;const Me=[];for(const nt of l){const Ct=V2(nt,b.get(nt.key).overlayedDocument);null!=Ct&&Me.push(new sc(nt.key,Ct,R1(Ct.value.mapValue),pr.exists(!0)))}return h.mutationQueue.addMutationBatch(M,y,Me,l)}).next(me=>{D=me;const Me=me.applyToLocalDocumentSet(b,W);return h.documentOverlayCache.saveOverlays(M,me.batchId,Me)})}).then(()=>({batchId:D.batchId,changes:sF(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let y=a.hc[a.currentUser.toKey()];y||(y=new Mr(zt)),y=y.insert(l,h),a.hc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield ac(r,i.changes),yield Dy(r.remoteStore)}catch(i){const a=Sy(i,"Failed to persist write");t.reject(a)}}),yN.apply(this,arguments)}function DL(n,e){return _N.apply(this,arguments)}function _N(){return _N=(0,Ee.Z)(function*(n,e){const t=et(n);try{const r=yield Zj(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?Lt(l.nc):i.removedDocuments.size>0&&(Lt(l.nc),l.nc=!1))}),yield ac(t,r,e)}catch(r){yield nh(r)}}),_N.apply(this,arguments)}function TL(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=et(a);h.onlineState=l;let y=!1;h.queries.forEach((w,b)=>{for(const D of b.listeners)D.bu(l)&&(y=!0)}),y&&dN(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MH(n,e,t){return vN.apply(this,arguments)}function vN(){return vN=(0,Ee.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new Mr(Xe.comparator);l=l.insert(a,Qn.newNoDocument(a,Vt.min()));const h=tn().add(a),y=new I0(Vt.min(),new Map,new Vn(zt),l,h);yield DL(r,y),r.uc=r.uc.remove(a),r.cc.delete(e),TN(r)}else yield Cy(r.localStore,e,!1).then(()=>My(r,e,t)).catch(nh)}),vN.apply(this,arguments)}function RH(n,e){return wN.apply(this,arguments)}function wN(){return wN=(0,Ee.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield Kj(t.localStore,e);bN(t,r,null),CN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ac(t,i)}catch(i){yield nh(i)}}),wN.apply(this,arguments)}function NH(n,e,t){return EN.apply(this,arguments)}function EN(){return EN=(0,Ee.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(a,l){const h=et(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return h.mutationQueue.lookupMutationBatch(y,l).next(b=>(Lt(null!==b),w=b.keys(),h.mutationQueue.removeMutationBatch(y,b))).next(()=>h.mutationQueue.performConsistencyCheck(y)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(y,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>h.localDocuments.getDocuments(y,w))})}(r.localStore,e);bN(r,e,t),CN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ac(r,i)}catch(i){yield nh(i)}}),EN.apply(this,arguments)}function IN(){return IN=(0,Ee.Z)(function*(n,e){const t=et(n);oc(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=et(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Sy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),IN.apply(this,arguments)}function CN(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function bN(n,e,t){const r=et(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function My(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||SL(n,r)})}function SL(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(V0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),TN(n))}function DN(n,e,t){for(const r of t)r instanceof IL?(n.ac.addReference(r.key,e),PH(n,r)):r instanceof CL?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||SL(n,r.key)):gt()}function PH(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oc.add(r),TN(n))}function TN(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Xe(wn.fromString(e)),r=n.fc.next();n.cc.set(r,new DH(t)),n.uc=n.uc.insert(t,r),GD(n.remoteStore,new ch(ps(hy(t.path)),r,2,Vs.at))}}function ac(n,e,t){return SN.apply(this,arguments)}function SN(){return SN=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=[],a=[],l=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,y)=>{l.push(r._c(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const b=NR.Ci(y.targetId,w);a.push(b)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(h=(0,Ee.Z)(function*(y,w){const b=et(y);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ue.forEach(w,M=>ue.forEach(M.Si,V=>b.persistence.referenceDelegate.addReference(D,M.targetId,V)).next(()=>ue.forEach(M.Di,V=>b.persistence.referenceDelegate.removeReference(D,M.targetId,V)))))}catch(D){if(!rh(D))throw D;$e("LocalStore","Failed to update sequence numbers: "+D)}for(const D of w){const M=D.targetId;if(!D.fromCache){const V=b.Ui.get(M),me=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);b.Ui=b.Ui.insert(M,me)}}}),function(y,w){return h.apply(this,arguments)})(r.localStore,a))}),SN.apply(this,arguments)}function kH(n,e){return AN.apply(this,arguments)}function AN(){return AN=(0,Ee.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield tL(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(h=>{h.reject(new Fe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ac(t,r.ji)}var i}),AN.apply(this,arguments)}function FH(n,e){const t=et(n),r=t.cc.get(e);if(r&&r.nc)return tn().add(r.key);{let i=tn();const a=t.rc.get(e);if(!a)return i;for(const l of a){const h=t.ic.get(l);i=i.unionWith(h.view.ju)}return i}}function LH(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,Ee.Z)(function*(n,e){const t=et(n),r=yield BD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&DN(t,e.targetId,i.Xu),i}),xN.apply(this,arguments)}function VH(n,e){return MN.apply(this,arguments)}function MN(){return MN=(0,Ee.Z)(function*(n,e){const t=et(n);return sL(t.localStore,e).then(r=>ac(t,r))}),MN.apply(this,arguments)}function UH(n,e,t,r){return RN.apply(this,arguments)}function RN(){return RN=(0,Ee.Z)(function*(n,e,t,r){const i=et(n),a=yield function(l,h){const y=et(l),w=et(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",b=>w.Tn(b,h).next(D=>D?y.localDocuments.getDocuments(b,D):ue.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Dy(i.remoteStore):"acknowledged"===t||"rejected"===t?(bN(i,e,r||null),CN(i,e),h=e,et(et(i.localStore).mutationQueue).An(h)):gt(),yield ac(i,a)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),RN.apply(this,arguments)}function NN(){return NN=(0,Ee.Z)(function*(n,e){const t=et(n);if(FN(t),LN(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield AL(t,r.toArray());t.dc=!0,yield iN(t.remoteStore,!0);for(const a of i)GD(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(My(t,l),Cy(t.localStore,l,!0))),V0(t.remoteStore,l)}),yield i,yield AL(t,r),function(a){const l=et(a);l.cc.forEach((h,y)=>{V0(l.remoteStore,y)}),l.ac.fs(),l.cc=new Map,l.uc=new Mr(Xe.comparator)}(t),t.dc=!1,yield iN(t.remoteStore,!1)}}),NN.apply(this,arguments)}function AL(n,e,t){return ON.apply(this,arguments)}function ON(){return ON=(0,Ee.Z)(function*(n,e,t){const r=et(n),i=[],a=[];for(const l of e){let h;const y=r.rc.get(l);if(y&&0!==y.length){h=yield Iy(r.localStore,ps(y[0]));for(const w of y){const b=r.ic.get(w),D=yield LH(r,b);D.snapshot&&a.push(D.snapshot)}}else{const w=yield iL(r.localStore,l);h=yield Iy(r.localStore,w),yield pN(r,xL(w),l,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(a),i}),ON.apply(this,arguments)}function xL(n){return V1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jH(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function HH(n,e,t,r){return PN.apply(this,arguments)}function PN(){return PN=(0,Ee.Z)(function*(n,e,t,r){const i=et(n);if(i.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield sL(i.localStore,j1(a[0])),h=I0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ai.EMPTY_BYTE_STRING);yield ac(i,l,h);break}case"rejected":yield Cy(i.localStore,e,!0),My(i,e,r);break;default:gt()}}),PN.apply(this,arguments)}function $H(n,e,t){return kN.apply(this,arguments)}function kN(){return kN=(0,Ee.Z)(function*(n,e,t){const r=FN(n);if(r.dc){for(const i of e){if(r.rc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const a=yield iL(r.localStore,i),l=yield Iy(r.localStore,a);yield pN(r,xL(a),l.targetId,!1,l.resumeToken),GD(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Cy(r.localStore,i,!1).then(()=>{V0(r.remoteStore,i),My(r,i)}).catch(nh))}}),kN.apply(this,arguments)}function FN(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=DL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MH.bind(null,e),e.sc.Wo=wH.bind(null,e.eventManager),e.sc.wc=EH.bind(null,e.eventManager),e}function LN(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NH.bind(null,e),e}class ML{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=F0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return eL(this.persistence,new XF,e.initialUser,this.It)}yc(e){return new QF(VD.Bs,this.It)}gc(e){return new lL}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class RL extends ML{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield LN(r.Ac.syncEngine),yield Dy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return eL(this.persistence,new XF,e.initialUser,this.It)}Tc(e,t){return new Oj(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new m2(t,this.persistence);return new g2(e.asyncQueue,r)}yc(e){const t=RR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new MR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,dL(),$D(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new lL}}class WH extends RL{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof BR&&(r.sharedClientState.syncEngine={Fr:UH.bind(null,i),$r:HH.bind(null,i),Br:$H.bind(null,i),vi:jH.bind(null,i),Mr:VH.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ee.Z)(function*(l){yield function BH(n,e){return NN.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=dL();if(!BR.C(t))throw new Fe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=RR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new BR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class VN{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>TL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=kH.bind(null,r.syncEngine),yield iN(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vH}createDatastore(e){const t=F0(e.databaseInfo.databaseId),r=new nH(e.databaseInfo);return new sH(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>TL(this.syncEngine,h,0),l=cL.C()?new cL:new Xj,new uH(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,y,w){const b=new TH(r,i,a,l,h,y);return w&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=et(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield by(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function UN(n,e,t){if(!t)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NL(n,e,t,r){if(!0===e&&!0===r)throw new Fe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OL(n){if(!Xe.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PL(n){if(Xe.isDocumentKey(n))throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zD(n);throw new Fe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kL(n,e){if(e<=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const FL=new Map;class LL{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,NL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class U0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new r2;switch(t.type){case"gapi":return new a2(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=FL.get(e);t&&($e("ComponentProvider","Removing Datastore"),FL.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class zu extends Xi{constructor(e,t,r){super(e,t,hy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new Xe(e))}withConverter(e){return new zu(this.firestore,e,this._path)}}function UL(n,e,...t){if(n=(0,k.m9)(n),UN("collection","path",e),n instanceof U0){const r=wn.fromString(e,...t);return PL(r),new zu(n,null,r)}{if(!(n instanceof ir||n instanceof zu))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return PL(r),new zu(n.firestore,null,r)}}function qD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=f1.R()),UN("doc","path",e),n instanceof U0){const r=wn.fromString(e,...t);return OL(r),new ir(n,null,new Xe(r))}{if(!(n instanceof ir||n instanceof zu))throw new Fe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return OL(r),new ir(n.firestore,n instanceof zu?n.converter:null,new Xe(r))}}function BL(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof ir||n instanceof zu)&&(e instanceof ir||e instanceof zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BN(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Xi&&e instanceof Xi&&n.firestore===e.firestore&&y0(n._query,e._query)&&n.converter===e.converter}function jL(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class KD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qH{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new oi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new IH(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class YH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,l){const h=et(a),y=T0(h.It)+"/documents",w={documents:l.map(V=>D0(h.It,V))},b=yield h._o("BatchGetDocuments",y,w,l.length),D=new Map;b.forEach(V=>{const W=function Z2(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=Gu(t,r.found.name),a=Ei(r.found.updateTime),l=new Li({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=Gu(t,r.missing),a=Ei(r.readTime);return Qn.newNoDocument(i,a)}(n,e):gt()}(h.It,V);D.set(W.key.toString(),W)});const M=[];return l.forEach(V=>{const W=D.get(V.toString());Lt(!!W),M.push(W)}),M}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new mR(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const l=et(i),h=T0(l.It)+"/documents",y={writes:a.map(w=>S0(l.It,w))};yield l.ao("Commit",h,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Vt.min())?pr.exists(!1):pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new Fe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class QH{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new jR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new YH(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!d0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!nF(t)}return!1}}class JH{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=wi.UNAUTHENTICATED,this.clientId=f1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(h){$e("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>($e("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Sy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function HL(n,e){return jN.apply(this,arguments)}function jN(){return jN=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield tL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jN.apply(this,arguments)}function $L(n,e){return HN.apply(this,arguments)}function HN(){return HN=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield $N(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>_L(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>_L(e.remoteStore,a)),n.onlineComponents=e}),HN.apply(this,arguments)}function $N(n){return GN.apply(this,arguments)}function GN(){return GN=(0,Ee.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield HL(n,new ML)),n.offlineComponents}),GN.apply(this,arguments)}function ZD(n){return WN.apply(this,arguments)}function WN(){return WN=(0,Ee.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield $L(n,new VN)),n.onlineComponents}),WN.apply(this,arguments)}function GL(n){return $N(n).then(e=>e.persistence)}function YD(n){return $N(n).then(e=>e.localStore)}function zN(n){return ZD(n).then(e=>e.remoteStore)}function qN(n){return ZD(n).then(e=>e.syncEngine)}function Ry(n){return KN.apply(this,arguments)}function KN(){return KN=(0,Ee.Z)(function*(n){const e=yield ZD(n),t=e.eventManager;return t.onListen=SH.bind(null,e.syncEngine),t.onUnlisten=AH.bind(null,e.syncEngine),t}),KN.apply(this,arguments)}function zL(n,e,t={}){const r=new oi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,h,y){const w=new KD({next:D=>{a.enqueueAndForget(()=>lN(i,b));const M=D.docs.has(l);!M&&D.fromCache?y.reject(new Fe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&h&&"server"===h.source?y.reject(new Fe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(D)},error:D=>y.reject(D)}),b=new hN(hy(l.path),w,{includeMetadataChanges:!0,Nu:!0});return aN(i,b)}(yield Ry(n),n.asyncQueue,e,t,r)})),r.promise}function qL(n,e,t={}){const r=new oi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,h,y){const w=new KD({next:D=>{a.enqueueAndForget(()=>lN(i,b)),D.fromCache&&"server"===h.source?y.reject(new Fe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(D)},error:D=>y.reject(D)}),b=new hN(l,w,{includeMetadataChanges:!0,Nu:!0});return aN(i,b)}(yield Ry(n),n.asyncQueue,e,t,r)})),r.promise}class o${constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new jR(this,"async_queue_retry"),this.Wc=()=>{const t=$D();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=$D();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=$D();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new oi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!rh(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,jr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=oN.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&gt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function ZN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class a${constructor(){this._progressObserver={},this._taskCompletionResolver=new oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sr extends U0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new o$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KL(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||KL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KL(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new v2(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new JH(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ZL(n,e,t){const r=new oi;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield HL(n,t),yield $L(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;dp("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function YL(n){if(n._initialized||n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qu(ai.fromBase64String(e))}catch(t){throw new Fe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qu(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class uc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._methodName=e}}class QD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}}const y$=/^__.*__$/;class _${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sc(e,this.data,this.fieldMask,t,this.fieldTransforms):new my(e,this.data,t,this.fieldTransforms)}}class QL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class JD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new JD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return tT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(JL(this.sa)&&y$.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class v${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||F0(e)}da(e,t,r,i=!1){return new JD({sa:e,methodName:t,fa:r,path:xr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mp(n){const e=n._freezeSettings(),t=F0(n._databaseId);return new v$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function XD(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);XN("Data must be an object, but it was:",l,r);const h=tV(r,l);let y,w;if(a.merge)y=new Do(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const D of a.mergeFields){const M=eO(e,D,t);if(!l.contains(M))throw new Fe(pe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);rV(b,M)||b.push(M)}y=new Do(b),w=l.fieldTransforms.filter(D=>y.covers(D.field))}else y=null,w=l.fieldTransforms;return new _$(new Li(h),y,w)}class B0 extends xp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B0}}function XL(n,e,t){return new JD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class YN extends xp{_toFieldTransform(e){return new _0(e.path,new py)}isEqual(e){return e instanceof YN}}class w$ extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=XL(this,e,!0),r=this._a.map(a=>Rp(a,t)),i=new vp(r);return new _0(e.path,i)}isEqual(e){return this===e}}class E$ extends xp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=XL(this,e,!0),r=this._a.map(a=>Rp(a,t)),i=new wp(r);return new _0(e.path,i)}isEqual(e){return this===e}}class I$ extends xp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new gy(e.It,W1(e.It,this.wa));return new _0(e.path,t)}isEqual(e){return this===e}}function QN(n,e,t,r){const i=n.da(1,e,t);XN("Data must be an object, but it was:",i,r);const a=[],l=Li.empty();pp(r,(y,w)=>{const b=eT(e,y,t);w=(0,k.m9)(w);const D=i.ca(b);if(w instanceof B0)a.push(b);else{const M=Rp(w,D);null!=M&&(a.push(b),l.set(b,M))}});const h=new Do(a);return new QL(l,h,i.fieldTransforms)}function JN(n,e,t,r,i,a){const l=n.da(1,e,t),h=[eO(e,r,t)],y=[i];if(a.length%2!=0)throw new Fe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<a.length;M+=2)h.push(eO(e,a[M])),y.push(a[M+1]);const w=[],b=Li.empty();for(let M=h.length-1;M>=0;--M)if(!rV(w,h[M])){const V=h[M];let W=y[M];W=(0,k.m9)(W);const me=l.ca(V);if(W instanceof B0)w.push(V);else{const Me=Rp(W,me);null!=Me&&(w.push(V),b.set(V,Me))}}const D=new Do(w);return new QL(b,D,l.fieldTransforms)}function eV(n,e,t,r=!1){return Rp(t,n.da(r?4:3,e))}function Rp(n,e){if(nV(n=(0,k.m9)(n)))return XN("Unsupported field value:",e,n),tV(n,e);if(n instanceof xp)return function(t,r){if(!JL(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Rp(l,r.aa(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return W1(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=fr.fromDate(t);return{timestampValue:b0(r.It,i)}}if(t instanceof fr){const i=new fr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:b0(r.It,i)}}if(t instanceof QD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qu)return{bytesValue:hF(r.It,t._byteString)};if(t instanceof ir){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${zD(t)}`)}(n,e)}function tV(n,e){const t={};return E1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pp(n,(r,i)=>{const a=Rp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function nV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fr||n instanceof QD||n instanceof qu||n instanceof ir||n instanceof xp)}function XN(n,e,t){if(!nV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function eO(n,e,t){if((e=(0,k.m9)(e))instanceof uc)return e._internalPath;if("string"==typeof e)return eT(n,e);throw tT("Field path arguments must be of type string or ",n,!1,void 0,t)}const C$=new RegExp("[~\\*/\\[\\]]");function eT(n,e,t){if(e.search(C$)>=0)throw tT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch{throw tT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(a||l)&&(y+=" (found",a&&(y+=` in field ${r}`),l&&(y+=` in document ${i}`),y+=")"),new Fe(pe.INVALID_ARGUMENT,h+n+y)}function rV(n,e){return n.some(t=>t.isEqual(e))}class j0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new b$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class b$ extends j0{data(){return super.data()}}function nT(n,e){return"string"==typeof e?eT(n,e):e instanceof uc?e._internalPath:e._delegate._internalPath}function iV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H0{}function ph(n,...e){for(const t of e)n=t._apply(n);return n}class D$ extends H0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mp(e.firestore),r=function(i,a,l,h,y,w,b){let D;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){cV(b,w);const V=[];for(const W of b)V.push(lV(h,i,W));D={arrayValue:{values:V}}}else D=lV(h,i,b)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||cV(b,w),D=eV(l,"where",b,"in"===w||"not-in"===w);const M=Vi.create(y,w,D);return function(V,W){if(W.dt()){const Me=hR(V);if(null!==Me&&!Me.isEqual(W.field))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${W.field.toString()}'`);const nt=dR(V);null!==nt&&dV(0,W.field,nt)}const me=function(Me,nt){for(const Ct of Me.filters)if(nt.indexOf(Ct.op)>=0)return Ct.op;return null}(V,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(W.op));if(null!==me)throw new Fe(pe.INVALID_ARGUMENT,me===W.op?`Invalid query. You cannot use more than one '${W.op.toString()}' filter.`:`Invalid query. You cannot use '${W.op.toString()}' filters with '${me.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Xi(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new ic(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class S$ extends H0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new dy(i,a);return function(h,y){if(null===dR(h)){const w=hR(h);null!==w&&dV(0,w,y.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Xi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new ic(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class sV extends H0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Xi(e.firestore,e.converter,bD(e._query,this.Ia,this.Ta))}}class oV extends H0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=uV(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new ic((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class aV extends H0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=uV(e,this.type,this.Ea,this.Aa);return new Xi(e.firestore,e.converter,(i=t,new ic((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function uV(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof j0)return function(i,a,l,h,y){if(!h)throw new Fe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const b of fy(i))if(b.field.isKeyField())w.push(yp(a,h.key));else{const D=h.data.field(b.field);if(uR(D))throw new Fe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=b.field.canonicalString();throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}w.push(D)}return new uh(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Mp(n.firestore);return function(a,l,h,y,w,b){const D=a.explicitOrderBy;if(w.length>D.length)throw new Fe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let V=0;V<w.length;V++){const W=w[V];if(D[V].field.isKeyField()){if("string"!=typeof W)throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof W}`);if(!fR(a)&&-1!==W.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${W}' contains a slash.`);const me=a.path.child(wn.fromString(W));if(!Xe.isDocumentKey(me))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${me}' is not because it contains an odd number of segments.`);const Me=new Xe(me);M.push(yp(l,Me))}else{const me=eV(h,y,W);M.push(me)}}return new uh(M,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function lV(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Fe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fR(e)&&-1!==t.indexOf("/"))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wn.fromString(t));if(!Xe.isDocumentKey(r))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yp(n,new Xe(r))}if(t instanceof ir)return yp(n,t._key);throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zD(t)}.`)}function cV(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function dV(n,e,t){if(!t.isEqual(e))throw new Fe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class tO{convertValue(e,t="none"){switch(mp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const r={};return pp(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new QD(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=C1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(c0(e));default:return null}}convertTimestamp(e){const t=ih(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wn.fromString(e);Lt(EF(r));const i=new sh(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||jr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function rT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class k$ extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lc extends j0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $0 extends lc{data(e={}){return super.data(e)}}class gh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Np(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $0(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new $0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new $0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==l.type&&(y=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:F$(l.type),doc:h,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function F$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function hV(n,e){return n instanceof lc&&e instanceof lc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gh&&e instanceof gh&&n._firestore===e._firestore&&BN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class mh extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function fV(n,e,t){n=mn(n,ir);const r=mn(n.firestore,sr),i=rT(n.converter,e,t);return Ny(r,[XD(Mp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,pr.none())])}function pV(n,e,t,...r){n=mn(n,ir);const i=mn(n.firestore,sr),a=Mp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof uc?JN(a,"updateDoc",n._key,e,t,r):QN(a,"updateDoc",n._key,e),Ny(i,[l.toMutation(n._key,pr.exists(!0))])}function gV(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||ZN(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(ZN(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let y,w,b;if(n instanceof ir)w=mn(n.firestore,sr),b=hy(n._key.path),y={next:D=>{e[l]&&e[l](nO(w,n,D))},error:e[l+1],complete:e[l+2]};else{const D=mn(n,Xi);w=mn(D.firestore,sr),b=D._query;const M=new mh(w);y={next:V=>{e[l]&&e[l](new gh(w,M,D,V))},error:e[l+1],complete:e[l+2]},iV(n._query)}return function(D,M,V,W){const me=new KD(W),Me=new hN(M,me,V);return D.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return aN(yield Ry(D),Me)})),()=>{me.bc(),D.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return lN(yield Ry(D),Me)}))}}(Hr(w),b,h,y)}function Ny(n,e){return function(t,r){const i=new oi;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function xH(n,e,t){return yN.apply(this,arguments)}(yield qN(t),r,i)})),i.promise}(Hr(n),e)}function nO(n,e,t){const r=t.docs.get(e._key),i=new mh(n);return new lc(n,i,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}const z$={maxAttempts:5};class mV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mp(e)}set(e,t,r){this._verifyNotCommitted();const i=yh(e,this._firestore),a=rT(i.converter,t,r),l=XD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,pr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=yh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof uc?JN(this._dataReader,"WriteBatch.update",a._key,t,r,i):QN(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yh(e,this._firestore);return this._mutations=this._mutations.concat(new yy(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Fe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class q$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mp(e)}get(e){const t=yh(e,this._firestore),r=new k$(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return gt();const a=i[0];if(a.isFoundDocument())return new j0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new j0(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const i=yh(e,this._firestore),a=rT(i.converter,t,r),l=XD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=yh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof uc?JN(this._dataReader,"Transaction.update",a._key,t,r,i):QN(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=yh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yh(e,this._firestore),r=new mh(this._firestore);return super.get(e).then(i=>new lc(this._firestore,r,t._key,i._document,new Np(!1,!1),t.converter))}}function rO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function _V(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function vV(){if(!function y2(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ay=lo.SDK_VERSION,(0,lo._registerComponent)(new uo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new sr(new s2(t.getProvider("auth-internal")),new u2(t.getProvider("app-check-internal")),function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Fe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sh(h.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,lo.registerVersion)(c1,"3.7.2",n),(0,lo.registerVersion)(c1,"3.7.2","esm2017")}();class G0{constructor(e){this._delegate=e}static fromBase64String(e){return vV(),new G0(qu.fromBase64String(e))}static fromUint8Array(e){return _V(),new G0(qu.fromUint8Array(e))}toBase64(){return vV(),this._delegate.toBase64()}toUint8Array(){return _V(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iO(n){return function nG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rG{enableIndexedDbPersistence(e,t){return function l$(n,e){YL(n=mn(n,sr));const t=Hr(n),r=n._freezeSettings(),i=new VN;return ZL(t,i,new RL(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function c$(n){YL(n=mn(n,sr));const e=Hr(n),t=n._freezeSettings(),r=new VN;return ZL(e,r,new WH(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function d$(n){if(n._initialized&&!n._terminated)throw new Fe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Ua.C())return Promise.resolve();const i=r+"main";yield Ua.delete(i)}),function(r){return t.apply(this,arguments)})(RR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class wV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof sh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function VL(n,e,t,r={}){var i;const a=(n=mn(n,U0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&dp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=wi.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Fe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new wi(y)}n._authCredentials=new i2(new d1(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function f$(n){return function XH(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield GL(n),t=yield zN(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i._u.delete(0),L0(i)}(t)}))}(Hr(n=mn(n,sr)))}(this._delegate)}disableNetwork(){return function p$(n){return function e$(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield GL(n),t=yield zN(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=et(i);a._u.add(0),yield by(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Hr(n=mn(n,sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,NL("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function h$(n){return function(e){const t=new oi;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function OH(n,e){return IN.apply(this,arguments)}(yield qN(e),t)})),t.promise}(Hr(n=mn(n,sr)))}(this._delegate)}onSnapshotsInSync(e){return function W$(n,e){return function r$(n,e){const t=new KD(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Ry(n),i=t,et(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Ry(n),i=t,void et(r).Ru.delete(i);var r,i}))}}(Hr(n=mn(n,sr)),ZN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Oy(this,UL(this._delegate,e))}catch(t){throw ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new sa(this,qD(this._delegate,e))}catch(t){throw ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ys(this,function zH(n,e){if(n=mn(n,U0),UN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xi(n,null,(t=e,new ic(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function K$(n,e,t){n=mn(n,sr);const r=Object.assign(Object.assign({},z$),t);return function(i){if(i.maxAttempts<1)throw new Fe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const h=new oi;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const y=yield function WL(n){return ZD(n).then(e=>e.datastore)}(i);new QH(i.asyncQueue,y,l,a,h).run()})),h.promise}(Hr(n),i=>e(new q$(n,i)),r)}(this._delegate,t=>e(new EV(this,t)))}batch(){return Hr(this._delegate),new IV(new mV(this._delegate,e=>Ny(this._delegate,e)))}loadBundle(e){return function g$(n,e){const t=Hr(n=mn(n,sr)),r=new a$;return function i$(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return jL(y,w);if(y instanceof ArrayBuffer)return jL(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new qH(y,l);var y}(t,F0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function GH(n,e,t){const r=et(n);var i;(i=(0,Ee.Z)(function*(a,l,h){try{const y=yield l.getMetadata();if(yield function(M,V){const W=et(M),me=Ei(V.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",Me=>W.Ns.getBundleMetadata(Me,V.id)).then(Me=>!!Me&&Me.createTime.compareTo(me)>=0)}(a.localStore,y))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(M=y).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);h._updateProgress(EL(y));const w=new CH(y,a.localStore,l.It);let b=yield l.mc();for(;b;){const M=yield w.Fu(b);M&&h._updateProgress(M),b=yield l.mc()}const D=yield w.complete();return yield ac(a,D.Lu,void 0),yield function(M,V){const W=et(M);return W.persistence.runTransaction("Save bundle","readwrite",me=>W.Ns.saveBundleMetadata(me,V))}(a.localStore,y),h._completeWith(D.progress),Promise.resolve(D.Bu)}catch(y){return dp("SyncEngine",`Loading bundle failed with ${y}`),h._failWith(y),Promise.resolve(new Set)}var M}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield qN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function m$(n,e){return function s$(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield YD(n),e)}))}(Hr(n=mn(n,sr)),e).then(t=>t?new Xi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ys(this,t):null)}}class iT extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new G0(new qu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return sa.forKey(t,this.firestore,null)}}class EV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new iT(e)}get(e){const t=Pp(e);return this._delegate.get(t).then(r=>new W0(this._firestore,new lc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Pp(e);return r?(rO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Pp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Pp(e);return this._delegate.delete(t),this}}class IV{constructor(e){this._delegate=e}set(e,t,r){const i=Pp(e);return r?(rO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Pp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Pp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new z0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Op.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Op(e,new iT(e),t),i.set(t,a)),a}}Op.INSTANCES=new WeakMap;class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new sa(t,new ir(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new sa(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Oy(this.firestore,UL(this._delegate,e))}catch(t){throw ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof ir&&BL(this._delegate,e)}set(e,t){t=rO("DocumentReference.set",t);try{return t?fV(this._delegate,e,t):fV(this._delegate,e)}catch(r){throw ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?pV(this._delegate,e):pV(this._delegate,e,t,...r)}catch(i){throw ms(i,"updateDoc()","DocumentReference.update()")}}delete(){return function $$(n){return Ny(mn(n.firestore,sr),[new yy(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=CV(e),r=bV(e,i=>new W0(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return gV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function V$(n){n=mn(n,ir);const e=mn(n.firestore,sr),t=Hr(e),r=new mh(e);return function t$(n,e){const t=new oi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const h=yield function(y,w){const b=et(y);return b.persistence.runTransaction("read document","readonly",D=>b.localDocuments.getDocument(D,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Fe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const y=Sy(h,`Failed to get document '${a} from cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield YD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new lc(e,r,n._key,i,new Np(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function U$(n){n=mn(n,ir);const e=mn(n.firestore,sr);return zL(Hr(e),n._key,{source:"server"}).then(t=>nO(e,n,t))}(this._delegate):function L$(n){n=mn(n,ir);const e=mn(n.firestore,sr);return zL(Hr(e),n._key).then(t=>nO(e,n,t))}(this._delegate),t.then(r=>new W0(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function ms(n,e,t){return n.message=n.message.replace(e,t),n}function CV(n){for(const e of n)if("object"==typeof e&&!iO(e))return e;return{}}function bV(n,e){var t,r;let i;return i=iO(n[0])?n[0]:iO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class W0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hV(this._delegate,e._delegate)}}class z0 extends W0{data(e){const t=this._delegate.data(e);return function n2(n,e){n||gt()}(void 0!==t),t}}class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new iT(e)}where(e,t,r){try{return new ys(this.firestore,ph(this._delegate,function T$(n,e,t){const r=e,i=nT("where",n);return new D$(i,r,t)}(e,t,r)))}catch(i){throw ms(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ys(this.firestore,ph(this._delegate,function A$(n,e="asc"){const t=e,r=nT("orderBy",n);return new S$(r,t)}(e,t)))}catch(r){throw ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ys(this.firestore,ph(this._delegate,function x$(n){return kL("limit",n),new sV("limit",n,"F")}(e)))}catch(t){throw ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ys(this.firestore,ph(this._delegate,function M$(n){return kL("limitToLast",n),new sV("limitToLast",n,"L")}(e)))}catch(t){throw ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ys(this.firestore,ph(this._delegate,function R$(...n){return new oV("startAt",n,!0)}(...e)))}catch(t){throw ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ys(this.firestore,ph(this._delegate,function N$(...n){return new oV("startAfter",n,!1)}(...e)))}catch(t){throw ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ys(this.firestore,ph(this._delegate,function O$(...n){return new aV("endBefore",n,!1)}(...e)))}catch(t){throw ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ys(this.firestore,ph(this._delegate,function P$(...n){return new aV("endAt",n,!0)}(...e)))}catch(t){throw ms(t,"endAt()","Query.endAt()")}}isEqual(e){return BN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function j$(n){n=mn(n,Xi);const e=mn(n.firestore,sr),t=Hr(e),r=new mh(e);return function n$(n,e){const t=new oi;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const h=yield BD(i,a,!0),y=new bL(a,h.Hi),w=y.Wu(h.documents),b=y.applyChanges(w,!1);l.resolve(b.snapshot)}catch(h){const y=Sy(h,`Failed to execute query '${a} against cache`);l.reject(y)}}),function(i,a,l){return r.apply(this,arguments)})(yield YD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new gh(e,r,n,i))}(this._delegate):"server"===e?.source?function H$(n){n=mn(n,Xi);const e=mn(n.firestore,sr),t=Hr(e),r=new mh(e);return qL(t,n._query,{source:"server"}).then(i=>new gh(e,r,n,i))}(this._delegate):function B$(n){n=mn(n,Xi);const e=mn(n.firestore,sr),t=Hr(e),r=new mh(e);return iV(n._query),qL(t,n._query).then(i=>new gh(e,r,n,i))}(this._delegate),t.then(r=>new sO(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=CV(e),r=bV(e,i=>new sO(this.firestore,new gh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return gV(this._delegate,t,r)}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}class sG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new z0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class sO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ys(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new z0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new z0(this._firestore,r))})}isEqual(e){return hV(this._delegate,e._delegate)}}class Oy extends ys{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new sa(this.firestore,e):null}doc(e){try{return new sa(this.firestore,void 0===e?qD(this._delegate):qD(this._delegate,e))}catch(t){throw ms(t,"doc()","CollectionReference.doc()")}}add(e){return function G$(n,e){const t=mn(n.firestore,sr),r=qD(n),i=rT(n.converter,e);return Ny(t,[XD(Mp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new sa(this.firestore,t))}isEqual(e){return BL(this._delegate,e._delegate)}withConverter(e){return new Oy(this.firestore,this._delegate.withConverter(e?Op.getInstance(this.firestore,e):null))}}function Pp(n){return mn(n,ir)}class oO{constructor(...e){this._delegate=new uc(...e)}static documentId(){return new oO(xr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Y$(){return new YN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kp(e)}static delete(){const e=function Z$(){return new B0("deleteField")}();return e._methodName="FieldValue.delete",new kp(e)}static arrayUnion(...e){const t=function Q$(...n){return new w$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kp(t)}static arrayRemove(...e){const t=function J$(...n){return new E$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kp(t)}static increment(e){const t=function X$(n){return new I$("increment",n)}(e);return t._methodName="FieldValue.increment",new kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oG={Firestore:wV,GeoPoint:QD,Timestamp:fr,Blob:G0,Transaction:EV,WriteBatch:IV,DocumentReference:sa,DocumentSnapshot:W0,Query:ys,QueryDocumentSnapshot:z0,QuerySnapshot:sO,CollectionReference:Oy,FieldPath:oO,FieldValue:kp,setLogLevel:function iG(n){!function t2(n){th.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function DV(n,e){return function lG(n,e=PE.z){return new Zr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function aO(n,e){return DV(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function sT(n,e){return aO(n,e).pipe(bl(void 0),gM(),(0,it.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const y=i.find(b=>b.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(l.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function TV(n,e,t){return sT(n,t).pipe(to((r,i)=>function dG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return uO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return uO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),kE(),(0,it.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function uO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function SV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function uG(n){(function aG(n,e){n.INTERNAL.registerComponent(new uo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oG)))})(n,(e,t)=>new wV(e,t,new rG)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(LE.Z);class AV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(bl(void 0),gM(),ei(([r,i])=>i.length>0||!r),(0,it.U)(([r,i])=>i),Gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(to((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SV(e);return TV(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return aO(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Gn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(Gn.iC)}add(e){return this.ref.add(e)}doc(e){return new xV(this.ref.doc(e),this.afs)}}class xV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=NV(r,t);return new AV(i,a,this.afs)}snapshotChanges(){return function cG(n,e){return DV(n,e).pipe(bl(void 0),gM(),(0,it.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sn.D)(this.ref.get(e)).pipe(Gn.iC)}}class fG{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?sT(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ei(t=>t.length>0),Gn.iC):sT(this.query,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(to((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=SV(e);return TV(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return aO(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Gn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(Gn.iC)}}const MV=new p.OlP("angularfire2.enableFirestorePersistence"),RV=new p.OlP("angularfire2.firestore.persistenceSettings"),pG=new p.OlP("angularfire2.firestore.settings"),gG=new p.OlP("angularfire2.firestore.use-emulator");function NV(n,e=(t=>t)){return{query:e(n),ref:n}}let mG=(()=>{class n{constructor(t,r,i,a,l,h,y,w,b,D,M,V,W,me,Me,nt,Ct){this.schedulers=y;const Mt=(0,pi.on)(t,h,r),Ut=b;D&&qd(Mt,h,M,W,me,Me,V,nt),[this.firestore,this.persistenceEnabled$]=(0,pi.cc)(`${Mt.name}.firestore`,"AngularFirestore",Mt.name,()=>{const Gt=h.runOutsideAngular(()=>Mt.firestore());if(a&&Gt.settings(a),Ut&&Gt.useEmulator(...Ut),i&&!Kr(l)){const an=()=>{try{return(0,Sn.D)(Gt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(ui){return typeof console<"u"&&console.warn(ui),vt(!1)}};return[Gt,h.runOutsideAngular(an)]}return[Gt,vt(!1)]},[a,Ut,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=NV(i,r),h=this.schedulers.ngZone.run(()=>a);return new AV(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new fG(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new xV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pi.Dh),p.LFG(pi.xv,8),p.LFG(MV,8),p.LFG(pG,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Gn.HU),p.LFG(RV,8),p.LFG(gG,8),p.LFG(Zm,8),p.LFG(Gm,8),p.LFG(Wm,8),p.LFG(zm,8),p.LFG(qm,8),p.LFG(Km,8),p.LFG(zd,8),p.LFG(Wd,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yG=(()=>{class n{constructor(){YO.Z.registerVersion("angularfire",Gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:MV,useValue:!0},{provide:RV,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[mG]}),n})(),_G=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[ZU]}),n.\u0275inj=p.cJS({imports:[Nh,MU,WU,yU,pi.hO.initializeApp(KP_firebase),yG,_U]}),n})();(0,p.G48)(),Tc().bootstrapModule(_G).catch(n=>console.error(n))},6148:(pt,Re,P)=>{P.d(Re,{IH:()=>Wr,Gb:()=>mr});var p=P(5861),X=P(9681),L=P(1877),re=P(2090),de=P(4859);P(2833);const oe="analytics",ge="firebase_id",z="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",J="https://www.googletagmanager.com/gtag/js",Oe=new L.Yd("@firebase/analytics");function Ce(N){return Promise.all(N.map(G=>G.catch(U=>U)))}function be(N,G){const U=document.createElement("script");U.src=`${J}?l=${N}&id=${G}`,U.async=!0,document.head.appendChild(U)}function ye(N,G,U,ie,Ie,Ke){return le.apply(this,arguments)}function le(){return(le=(0,p.Z)(function*(N,G,U,ie,Ie,Ke){const ot=ie[Ie];try{if(ot)yield G[ot];else{const xe=(yield Ce(U)).find(Le=>Le.measurementId===Ie);xe&&(yield G[xe.appId])}}catch(ht){Oe.error(ht)}N("config",Ie,Ke)})).apply(this,arguments)}function lt(N,G,U,ie,Ie){return rt.apply(this,arguments)}function rt(){return(rt=(0,p.Z)(function*(N,G,U,ie,Ie){try{let Ke=[];if(Ie&&Ie.send_to){let ot=Ie.send_to;Array.isArray(ot)||(ot=[ot]);const ht=yield Ce(U);for(const xe of ot){const Le=ht.find(yn=>yn.measurementId===xe),yt=Le&&G[Le.appId];if(!yt){Ke=[];break}Ke.push(yt)}}0===Ke.length&&(Ke=Object.values(G)),yield Promise.all(Ke),N("event",ie,Ie||{})}catch(Ke){Oe.error(Ke)}})).apply(this,arguments)}function De(N){const G=window.document.getElementsByTagName("script");for(const U of Object.values(G))if(U.src&&U.src.includes(J)&&U.src.includes(N))return U;return null}const Ve=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ee=new class Q{constructor(G={},U=1e3){this.throttleMetadata=G,this.intervalMillis=U}getThrottleMetadata(G){return this.throttleMetadata[G]}setThrottleMetadata(G,U){this.throttleMetadata[G]=U}deleteThrottleMetadata(G){delete this.throttleMetadata[G]}};function se(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function ne(N){return He.apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(N){var G;const{appId:U,apiKey:ie}=N,Ie={method:"GET",headers:se(ie)},Ke=z.replace("{app-id}",U),ot=yield fetch(Ke,Ie);if(200!==ot.status&&304!==ot.status){let ht="";try{const xe=yield ot.json();null!==(G=xe.error)&&void 0!==G&&G.message&&(ht=xe.error.message)}catch{}throw Ve.create("config-fetch-failed",{httpStatus:ot.status,responseMessage:ht})}return ot.json()})).apply(this,arguments)}function Ue(N){return ft.apply(this,arguments)}function ft(){return(ft=(0,p.Z)(function*(N,G=ee,U){const{appId:ie,apiKey:Ie,measurementId:Ke}=N.options;if(!ie)throw Ve.create("no-app-id");if(!Ie){if(Ke)return{measurementId:Ke,appId:ie};throw Ve.create("no-api-key")}const ot=G.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ht=new Rn;return setTimeout((0,p.Z)(function*(){ht.abort()}),void 0!==U?U:6e4),Yt({appId:ie,apiKey:Ie,measurementId:Ke},ot,ht,G)})).apply(this,arguments)}function Yt(N,G,U){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(N,{throttleEndTimeMillis:G,backoffCount:U},ie,Ie=ee){var Ke,ot;const{appId:ht,measurementId:xe}=N;try{yield ze(ie,G)}catch(Le){if(xe)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${null===(Ke=Le)||void 0===Ke?void 0:Ke.message}]`),{appId:ht,measurementId:xe};throw Le}try{const Le=yield ne(N);return Ie.deleteThrottleMetadata(ht),Le}catch(Le){const yt=Le;if(!un(yt)){if(Ie.deleteThrottleMetadata(ht),xe)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${yt?.message}]`),{appId:ht,measurementId:xe};throw Le}const yn=503===Number(null===(ot=yt?.customData)||void 0===ot?void 0:ot.httpStatus)?(0,re.$s)(U,Ie.intervalMillis,30):(0,re.$s)(U,Ie.intervalMillis),Nn={throttleEndTimeMillis:Date.now()+yn,backoffCount:U+1};return Ie.setThrottleMetadata(ht,Nn),Oe.debug(`Calling attemptFetch again in ${yn} millis`),Yt(N,Nn,ie,Ie)}})).apply(this,arguments)}function ze(N,G){return new Promise((U,ie)=>{const Ie=Math.max(G-Date.now(),0),Ke=setTimeout(U,Ie);N.addEventListener(()=>{clearTimeout(Ke),ie(Ve.create("fetch-throttle",{throttleEndTimeMillis:G}))})})}function un(N){if(!(N instanceof re.ZR&&N.customData))return!1;const G=Number(N.customData.httpStatus);return 429===G||500===G||503===G||504===G}class Rn{constructor(){this.listeners=[]}addEventListener(G){this.listeners.push(G)}abort(){this.listeners.forEach(G=>G())}}let ln,Nr;function qn(){return(qn=(0,p.Z)(function*(N,G,U,ie,Ie){if(Ie&&Ie.global)N("event",U,ie);else{const Ke=yield G;N("event",U,Object.assign(Object.assign({},ie),{send_to:Ke}))}})).apply(this,arguments)}function Xn(N){Nr=N}function Di(N){ln=N}function Ye(){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(){var N;if(!(0,re.hl)())return Oe.warn(Ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(G){return Oe.warn(Ve.create("indexeddb-unavailable",{errorInfo:null===(N=G)||void 0===N?void 0:N.toString()}).message),!1}return!0})).apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(N,G,U,ie,Ie,Ke,ot){var ht;const xe=Ue(N);xe.then(cn=>{U[cn.measurementId]=cn.appId,N.options.measurementId&&cn.measurementId!==N.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${cn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(cn=>Oe.error(cn)),G.push(xe);const Le=Ye().then(cn=>{if(cn)return ie.getId()}),[yt,yn]=yield Promise.all([xe,Le]);De(Ke)||be(Ke,yt.measurementId),Nr&&(Ie("consent","default",Nr),Xn(void 0)),Ie("js",new Date);const Nn=null!==(ht=ot?.config)&&void 0!==ht?ht:{};return Nn.origin="firebase",Nn.update=!0,null!=yn&&(Nn[ge]=yn),Ie("config",yt.measurementId,Nn),ln&&(Ie("set",ln),Di(void 0)),yt.measurementId})).apply(this,arguments)}class Or{constructor(G){this.app=G}_delete(){return delete Kn[this.app.options.appId],Promise.resolve()}}let Kn={},Dn=[];const Pn={};let at,Nt,on="dataLayer",hn=!1;function Tt(N,G,U){!function or(){const N=[];if((0,re.ru)()&&N.push("This is a browser extension environment."),(0,re.zI)()||N.push("Cookies are not available."),N.length>0){const G=N.map((ie,Ie)=>`(${Ie+1}) ${ie}`).join(" "),U=Ve.create("invalid-analytics-context",{errorInfo:G});Oe.warn(U.message)}}();const ie=N.options.appId;if(!ie)throw Ve.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw Ve.create("no-api-key");Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kn[ie])throw Ve.create("already-exists",{id:ie});if(!hn){!function Ze(N){let G=[];Array.isArray(window[N])?G=window[N]:window[N]=G}(on);const{wrappedGtag:Ke,gtagCore:ot}=function we(N,G,U,ie,Ie){let Ke=function(...ot){window[ie].push(arguments)};return window[Ie]&&"function"==typeof window[Ie]&&(Ke=window[Ie]),window[Ie]=function Ne(N,G,U,ie){function Ke(){return(Ke=(0,p.Z)(function*(ot,ht,xe){try{"event"===ot?yield lt(N,G,U,ht,xe):"config"===ot?yield ye(N,G,U,ie,ht,xe):"consent"===ot?N("consent","update",xe):N("set",ht)}catch(Le){Oe.error(Le)}})).apply(this,arguments)}return function Ie(ot,ht,xe){return Ke.apply(this,arguments)}}(Ke,N,G,U),{gtagCore:Ke,wrappedGtag:window[Ie]}}(Kn,Dn,Pn,on,"gtag");Nt=Ke,at=ot,hn=!0}return Kn[ie]=function li(N,G,U,ie,Ie,Ke,ot){return An.apply(this,arguments)}(N,Dn,Pn,G,at,on,U),new Or(N)}function Wr(N=(0,X.getApp)()){N=(0,re.m9)(N);const G=(0,X._getProvider)(N,oe);return G.isInitialized()?G.getImmediate():function Kt(N,G={}){const U=(0,X._getProvider)(N,oe);if(U.isInitialized()){const Ie=U.getImmediate();if((0,re.vZ)(G,U.getOptions()))return Ie;throw Ve.create("already-initialized")}return U.initialize({options:G})}(N)}function mr(){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const Ot="@firebase/analytics",H="0.8.4";!function B(){(0,X._registerComponent)(new de.wA(oe,(G,{options:U})=>Tt(G.getProvider("app").getImmediate(),G.getProvider("installations-internal").getImmediate(),U),"PUBLIC")),(0,X._registerComponent)(new de.wA("analytics-internal",function N(G){try{const U=G.getProvider(oe).getImmediate();return{logEvent:(ie,Ie,Ke)=>function bt(N,G,U,ie){N=(0,re.m9)(N),function nn(N,G,U,ie,Ie){return qn.apply(this,arguments)}(Nt,Kn[N.app.options.appId],G,U,ie).catch(Ie=>Oe.error(Ie))}(U,ie,Ie,Ke)}}catch(U){throw Ve.create("interop-component-reg-failed",{reason:U})}},"PRIVATE")),(0,X.registerVersion)(Ot,H),(0,X.registerVersion)(Ot,H,"esm2017")}()},5867:(pt,Re,P)=>{P.d(Re,{C6:()=>p.getApps,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=P(9681);(0,p.registerVersion)("firebase","9.13.0","app")},127:(pt,Re,P)=>{P.d(Re,{Z:()=>p.Z});var p=P(3942);p.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(pt,Re,P)=>{P.r(Re);var p=P(5861),X=P(3942),L=P(2090),re=P(9681),de=P(1877),fe=P(655),oe=P(4859);const be=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ze=function Ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lt=new de.Yd("@firebase/auth");function rt(_,...f){lt.logLevel<=de.in.ERROR&&lt.error(`Auth (${re.SDK_VERSION}): ${_}`,...f)}function Ne(_,...f){throw Ve(_,...f)}function we(_,...f){return Ve(_,...f)}function De(_,f,m){const E=Object.assign(Object.assign({},Ze()),{[f]:m});return new L.LL("auth","Firebase",E).create(f,{appName:_.name})}function Ge(_,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ne(_,"argument-error"),De(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(_,...f){if("string"!=typeof _){const m=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return ye.create(_,...f)}function j(_,f,...m){if(!_)throw Ve(f,...m)}function ve(_){const f="INTERNAL ASSERTION FAILED: "+_;throw rt(f),new Error(f)}function Q(_,f){_||ve(f)}const ee=new Map;function se(_){Q(_ instanceof Function,"Expected a class definition");let f=ee.get(_);return f?(Q(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,ee.set(_,f),f)}function Ue(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function ft(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class un{constructor(f,m){this.shortDelay=f,this.longDelay=m,Q(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Rt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rn(_,f){Q(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class ln{static initialize(f,m,E){this.fetchImpl=f,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qn=new un(3e4,6e4);function Et(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function jt(_,f,m,E){return $r.apply(this,arguments)}function $r(){return($r=(0,p.Z)(function*(_,f,m,E,S={}){return bi(_,S,(0,p.Z)(function*(){let x={},Z={};E&&("GET"===f?Z=E:x={body:JSON.stringify(E)});const ce=(0,L.xO)(Object.assign({key:_.config.apiKey},Z)).slice(1),We=yield _._getAdditionalHeaders();return We["Content-Type"]="application/json",_.languageCode&&(We["X-Firebase-Locale"]=_.languageCode),ln.fetch()(Jn(_,_.config.apiHost,m,ce),Object.assign({method:f,headers:We,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function bi(_,f,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(_,f,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},nn),f);try{const S=new Nr(_),x=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const Z=yield x.json();if("needConfirmation"in Z)throw Xn(_,"account-exists-with-different-credential",Z);if(x.ok&&!("errorMessage"in Z))return Z;{const ce=x.ok?Z.errorMessage:Z.error.message,[We,st]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===We)throw Xn(_,"credential-already-in-use",Z);if("EMAIL_EXISTS"===We)throw Xn(_,"email-already-in-use",Z);if("USER_DISABLED"===We)throw Xn(_,"user-disabled",Z);const St=E[We]||We.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw De(_,St,st);Ne(_,St)}}catch(S){if(S instanceof L.ZR)throw S;Ne(_,"network-request-failed")}})).apply(this,arguments)}function bn(_,f,m,E){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(_,f,m,E,S={}){const x=yield jt(_,f,m,E,S);return"mfaPendingCredential"in x&&Ne(_,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Jn(_,f,m,E){const S=`${f}${m}?${E}`;return _.config.emulator?Rn(_.config,S):`${_.config.apiScheme}://${S}`}class Nr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),qn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(_,f,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=we(_,f,E);return S.customData._tokenResponse=m,S}function Ye(){return(Ye=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function In(_,f){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function An(_,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Kn(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function on(){return(on=(0,p.Z)(function*(_,f=!1){const m=(0,L.m9)(_),E=yield m.getIdToken(f),S=at(E);j(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const x="object"==typeof S.firebase?S.firebase:void 0,Z=x?.sign_in_provider;return{claims:S,token:E,authTime:Kn(mt(S.auth_time)),issuedAtTime:Kn(mt(S.iat)),expirationTime:Kn(mt(S.exp)),signInProvider:Z||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function mt(_){return 1e3*Number(_)}function at(_){var f;const[m,E,S]=_.split(".");if(void 0===m||void 0===E||void 0===S)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,L.tV)(E);return x?JSON.parse(x):(rt("Failed to decode base64 JWT payload"),null)}catch(x){return rt("Caught error parsing JWT payload as JSON",null===(f=x)||void 0===f?void 0:f.toString()),null}}function hn(_,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(_,f,m=!1){if(m)return f;try{return yield f}catch(E){throw E instanceof L.ZR&&or(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function or({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Tt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),E)}iteration(){var f=this;return(0,p.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Wr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kn(this.lastLoginAt),this.creationTime=Kn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kt(_){return mr.apply(this,arguments)}function mr(){return(mr=(0,p.Z)(function*(_){var f;const m=_.auth,E=yield _.getIdToken(),S=yield hn(_,An(m,{idToken:E}));j(S?.users.length,m,"internal-error");const x=S.users[0];_._notifyReloadListener(x);const Z=null!==(f=x.providerUserInfo)&&void 0!==f&&f.length?Je(x.providerUserInfo):[],ce=Er(_.providerData,Z),St=!!_.isAnonymous&&!(_.email&&x.passwordHash||ce?.length),wt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:ce,metadata:new Wr(x.createdAt,x.lastLoginAt),isAnonymous:St};Object.assign(_,wt)})).apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(_){const f=(0,L.m9)(_);yield Kt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Er(_,f){return[..._.filter(E=>!f.some(S=>S.providerId===E.providerId)),...f]}function Je(_){return _.map(f=>{var{providerId:m}=f,E=(0,fe._T)(f,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function tt(){return(tt=(0,p.Z)(function*(_,f){const m=yield bi(_,{},(0,p.Z)(function*(){const E=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:x}=_.config,Z=Jn(_,S,"/v1/token",`key=${x}`),ce=yield _._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",ln.fetch()(Z,{method:"POST",headers:ce,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class bt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){j(f.idToken,"internal-error"),j(typeof f.idToken<"u","internal-error"),j(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Nt(_){const f=at(_);return j(f,"internal-error"),j(typeof f.exp<"u","internal-error"),j(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var E=this;return(0,p.Z)(function*(){return j(!E.accessToken||E.refreshToken,f,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var E=this;return(0,p.Z)(function*(){const{accessToken:S,refreshToken:x,expiresIn:Z}=yield function Ae(_,f){return tt.apply(this,arguments)}(f,m);E.updateTokensAndExpiration(S,x,Number(Z))})()}updateTokensAndExpiration(f,m,E){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,m){const{refreshToken:E,accessToken:S,expirationTime:x}=m,Z=new bt;return E&&(j("string"==typeof E,"internal-error",{appName:f}),Z.refreshToken=E),S&&(j("string"==typeof S,"internal-error",{appName:f}),Z.accessToken=S),x&&(j("number"==typeof x,"internal-error",{appName:f}),Z.expirationTime=x),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new bt,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Dt(_,f){j("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class Ot{constructor(f){var{uid:m,auth:E,stsTokenManager:S}=f,x=(0,fe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new Wr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const E=yield hn(m,m.stsTokenManager.getToken(m.auth,f));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(f){return function Pn(_){return on.apply(this,arguments)}(this,f)}reload(){return function Qt(_){return Bn.apply(this,arguments)}(this)}_assign(f){this!==f&&(j(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ot(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var E=this;return(0,p.Z)(function*(){let S=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield Kt(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield hn(f,function Di(_,f){return Ye.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var E,S,x,Z,ce,We,st,St;const wt=null!==(E=m.displayName)&&void 0!==E?E:void 0,gn=null!==(S=m.email)&&void 0!==S?S:void 0,qi=null!==(x=m.phoneNumber)&&void 0!==x?x:void 0,Ko=null!==(Z=m.photoURL)&&void 0!==Z?Z:void 0,Jc=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,Eg=null!==(We=m._redirectEventId)&&void 0!==We?We:void 0,Ig=null!==(st=m.createdAt)&&void 0!==st?st:void 0,Ia=null!==(St=m.lastLoginAt)&&void 0!==St?St:void 0,{uid:Cg,emailVerified:c_,isAnonymous:gu,providerData:mu,stsTokenManager:d_}=m;j(Cg&&d_,f,"internal-error");const h_=bt.fromJSON(this.name,d_);j("string"==typeof Cg,f,"internal-error"),Dt(wt,f.name),Dt(gn,f.name),j("boolean"==typeof c_,f,"internal-error"),j("boolean"==typeof gu,f,"internal-error"),Dt(qi,f.name),Dt(Ko,f.name),Dt(Jc,f.name),Dt(Eg,f.name),Dt(Ig,f.name),Dt(Ia,f.name);const Zo=new Ot({uid:Cg,auth:f,email:gn,emailVerified:c_,displayName:wt,isAnonymous:gu,photoURL:Ko,phoneNumber:qi,tenantId:Jc,stsTokenManager:h_,createdAt:Ig,lastLoginAt:Ia});return mu&&Array.isArray(mu)&&(Zo.providerData=mu.map(Ca=>Object.assign({},Ca))),Eg&&(Zo._redirectEventId=Eg),Zo}static _fromIdTokenResponse(f,m,E=!1){return(0,p.Z)(function*(){const S=new bt;S.updateFromServerResponse(m);const x=new Ot({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:E});return yield Kt(x),x})()}}const B=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,p.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,p.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,p.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function N(_,f,m){return`firebase:${_}:${f}:${m}`}class G{constructor(f,m,E){this.persistence=f,this.auth=m,this.userKey=E;const{config:S,name:x}=this.auth;this.fullUserKey=N(this.userKey,S.apiKey,x),this.fullPersistenceKey=N("persistence",S.apiKey,x),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Ot._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,E="authUser"){return(0,p.Z)(function*(){if(!m.length)return new G(se(B),f,E);const S=(yield Promise.all(m.map(function(){var st=(0,p.Z)(function*(St){if(yield St._isAvailable())return St});return function(St){return st.apply(this,arguments)}}()))).filter(st=>st);let x=S[0]||se(B);const Z=N(E,f.config.apiKey,f.name);let ce=null;for(const st of m)try{const St=yield st._get(Z);if(St){const wt=Ot._fromJSON(f,St);st!==x&&(ce=wt),x=st;break}}catch{}const We=S.filter(st=>st._shouldAllowMigration);return x._shouldAllowMigration&&We.length?(x=We[0],ce&&(yield x._set(Z,ce.toJSON())),yield Promise.all(m.map(function(){var st=(0,p.Z)(function*(St){if(St!==x)try{yield St._remove(Z)}catch{}});return function(St){return st.apply(this,arguments)}}())),new G(x,f,E)):new G(x,f,E)})()}}function U(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ot(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(ie(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(xe(f))return"Blackberry";if(Le(f))return"Webos";if(Ie(f))return"Safari";if((f.includes("chrome/")||Ke(f))&&!f.includes("edge/"))return"Chrome";if(ht(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function ie(_=(0,L.z$)()){return/firefox\//i.test(_)}function Ie(_=(0,L.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ke(_=(0,L.z$)()){return/crios\//i.test(_)}function ot(_=(0,L.z$)()){return/iemobile/i.test(_)}function ht(_=(0,L.z$)()){return/android/i.test(_)}function xe(_=(0,L.z$)()){return/blackberry/i.test(_)}function Le(_=(0,L.z$)()){return/webos/i.test(_)}function yt(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ti(_=(0,L.z$)()){return yt(_)||ht(_)||Le(_)||xe(_)||/windows phone/i.test(_)||ot(_)}function Ui(_,f=[]){let m;switch(_){case"Browser":m=U((0,L.z$)());break;case"Worker":m=`${U((0,L.z$)())}-${_}`;break;default:m=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${re.SDK_VERSION}/${E}`}class es{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const E=x=>new Promise((Z,ce)=>{try{Z(f(x))}catch(We){ce(We)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){var E;if(m.auth.currentUser===f)return;const S=[];try{for(const x of m.queue)yield x(f),x.onAbort&&S.push(x.onAbort)}catch(x){S.reverse();for(const Z of S)try{Z()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=x)||void 0===E?void 0:E.message})}})()}}class Ft{constructor(f,m,E){this.app=f,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _e(this),this.idTokenSubscription=new _e(this),this.beforeStateQueue=new es(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,m){var E=this;return m&&(this._popupRedirectResolver=se(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var S,x;if(!E._deleted&&(E.persistenceManager=yield G.create(E,f),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(x=E.currentUser)||void 0===x?void 0:x.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let x=S,Z=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,We=x?._redirectEventId,st=yield m.tryRedirectSignIn(f);(!ce||ce===We)&&st?.user&&(x=st.user,Z=!0)}if(!x)return m.directlySetCurrentUser(null);if(!x._redirectEventId){if(Z)try{yield m.beforeStateQueue.runMiddleware(x)}catch(ce){x=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return x?m.reloadAndSetCurrentUserOrClear(x):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===x._redirectEventId?m.directlySetCurrentUser(x):m.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){var E;try{yield Kt(f)}catch(S){if("auth/network-request-failed"!==(null===(E=S)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const E=f?(0,L.m9)(f):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(f,m=!1){var E=this;return(0,p.Z)(function*(){if(!E._deleted)return f&&j(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,p.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,m,E){return this.registerStateListener(this.authStateSubscription,f,m,E)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,E){return this.registerStateListener(this.idTokenSubscription,f,m,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var E=this;return(0,p.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const E=f&&se(f)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield G.create(m,[se(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,E,S){if(this._deleted)return()=>{};const x="function"==typeof m?m:m.next.bind(m),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(Z,this,"internal-error"),Z.then(()=>x(this.currentUser)),"function"==typeof m?f.addObserver(m,E,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ui(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const S=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function Y(_){return(0,L.m9)(_)}class _e{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ut(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function rn(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class fn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,m){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function zr(_,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:resetPassword",Et(_,f))})).apply(this,arguments)}function _n(_,f){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zu(_,f){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",Et(_,f))})).apply(this,arguments)}function _s(){return(_s=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithPassword",Et(_,f))})).apply(this,arguments)}function ts(_,f){return Si.apply(this,arguments)}function Si(){return(Si=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:sendOobCode",Et(_,f))})).apply(this,arguments)}function _r(_,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,p.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function Pr(_,f){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function To(_,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,p.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function Ba(_,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function dc(){return(dc=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithEmailLink",Et(_,f))})).apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithEmailLink",Et(_,f))})).apply(this,arguments)}class Ha extends fn{constructor(f,m,E,S=null){super("password",E),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new Ha(f,m,"password")}static _fromEmailAndCode(f,m,E=null){return new Ha(f,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function oa(_,f){return _s.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function cc(_,f){return dc.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ne(f,"internal-error")}})()}_linkToIdToken(f,m){var E=this;return(0,p.Z)(function*(){switch(E.signInMethod){case"password":return _n(f,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Yu(_,f){return ja.apply(this,arguments)}(f,{idToken:m,email:E._email,oobCode:E._password});default:Ne(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ar(_,f){return hc.apply(this,arguments)}function hc(){return(hc=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithIdp",Et(_,f))})).apply(this,arguments)}class Bi extends fn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Bi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ne("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:S}=m,x=(0,fe._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const Z=new Bi(E,S);return Z.idToken=x.idToken||void 0,Z.accessToken=x.accessToken||void 0,Z.secret=x.secret,Z.nonce=x.nonce,Z.pendingToken=x.pendingToken||null,Z}_getIdTokenResponse(f){return ar(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,ar(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ar(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,L.xO)(m)}return f}}function fc(_,f){return pc.apply(this,arguments)}function pc(){return(pc=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:sendVerificationCode",Et(_,f))})).apply(this,arguments)}function mc(){return(mc=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithPhoneNumber",Et(_,f))})).apply(this,arguments)}function _h(){return(_h=(0,p.Z)(function*(_,f){const m=yield bn(_,"POST","/v1/accounts:signInWithPhoneNumber",Et(_,f));if(m.temporaryProof)throw Xn(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const yc={USER_NOT_FOUND:"user-not-found"};function vh(){return(vh=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithPhoneNumber",Et(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),yc)})).apply(this,arguments)}class ws extends fn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new ws({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new ws({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function gc(_,f){return mc.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Py(_,f){return _h.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ky(_,f){return vh.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:x}=f;return E||m||S||x?new ws({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:x}):null}}class $a{constructor(f){var m,E,S,x,Z,ce;const We=(0,L.zd)((0,L.pd)(f)),st=null!==(m=We.apiKey)&&void 0!==m?m:null,St=null!==(E=We.oobCode)&&void 0!==E?E:null,wt=function Qu(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=We.mode)&&void 0!==S?S:null);j(st&&St&&wt,"argument-error"),this.apiKey=st,this.operation=wt,this.code=St,this.continueUrl=null!==(x=We.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(Z=We.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ce=We.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const m=function Lp(_){const f=(0,L.zd)((0,L.pd)(_)).link,m=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,E=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(E?(0,L.zd)((0,L.pd)(E)).link:null)||E||m||f||_}(f);try{return new $a(m)}catch{return null}}}let ji=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return Ha._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=$a.parseLink(E);return j(S,"argument-error"),Ha._fromEmailAndCode(m,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Es{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Is extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Hs extends Is{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return j("providerId"in m&&"signInMethod"in m,"argument-error"),Bi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return j(f.idToken||f.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Hs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Hs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:x,nonce:Z,providerId:ce}=f;if(!E&&!S&&!m&&!x||!ce)return null;try{return new Hs(ce)._credential({idToken:m,accessToken:E,nonce:Z,pendingToken:x})}catch{return null}}}let Ga=(()=>{class _ extends Is{constructor(){super("facebook.com")}static credential(m){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Wa=(()=>{class _ extends Is{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return _.credential(E,S)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Ju=(()=>{class _ extends Is{constructor(){super("github.com")}static credential(m){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Cs extends fn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ar(f,this.buildRequest())}_linkToIdToken(f,m){const E=this.buildRequest();return E.idToken=m,ar(f,E)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ar(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:S,pendingToken:x}=m;return E&&S&&x&&E===S?new Cs(E,x):null}static _create(f,m){return new Cs(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ao extends Es{constructor(f){j(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ao.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ao.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Cs.fromJSON(f);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:E}=f;if(!m||!E)return null;try{return Cs._create(E,m)}catch{return null}}}let kr=(()=>{class _ extends Is{constructor(){super("twitter.com")}static credential(m,E){return Bi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return _.credential(E,S)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function xo(_,f){return za.apply(this,arguments)}function za(){return(za=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signUp",Et(_,f))})).apply(this,arguments)}class Kr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,E,S=!1){return(0,p.Z)(function*(){const x=yield Ot._fromIdTokenResponse(f,E,S),Z=Vp(E);return new Kr({user:x,providerId:Z,_tokenResponse:E,operationType:m})})()}static _forOperation(f,m,E){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const S=Vp(E);return new Kr({user:f,providerId:S,_tokenResponse:E,operationType:m})})()}}function Vp(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Hn(){return(Hn=(0,p.Z)(function*(_){var f;const m=Y(_);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Kr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield xo(m,{returnSecureToken:!0}),S=yield Kr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class qa extends L.ZR{constructor(f,m,E,S){var x;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,qa.prototype),this.customData={appName:f.name,tenantId:null!==(x=f.tenantId)&&void 0!==x?x:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,m,E,S){return new qa(f,m,E,S)}}function Mo(_,f,m,E){return("reauthenticate"===f?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?qa._fromErrorAndOperation(_,x,f,E):x})}function $s(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function _c(){return(_c=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_);yield Zt(!0,m,f);const{providerUserInfo:E}=yield In(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=$s(E||[]);return m.providerData=m.providerData.filter(x=>S.has(x.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function di(_,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(_,f,m=!1){const E=yield hn(_,f._linkToIdToken(_.auth,yield _.getIdToken()),m);return Kr._forOperation(_,"link",E)})).apply(this,arguments)}function Zt(_,f,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,p.Z)(function*(_,f,m){yield Kt(f);const S=!1===_?"provider-already-linked":"no-such-provider";j($s(f.providerData).has(m)===_,f.auth,S)})).apply(this,arguments)}function Ro(_,f){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(_,f,m=!1){var E;const{auth:S}=_,x="reauthenticate";try{const Z=yield hn(_,Mo(S,x,f,_),m);j(Z.idToken,S,"internal-error");const ce=at(Z.idToken);j(ce,S,"internal-error");const{sub:We}=ce;return j(_.uid===We,S,"user-mismatch"),Kr._forOperation(_,x,Z)}catch(Z){throw"auth/user-not-found"===(null===(E=Z)||void 0===E?void 0:E.code)&&Ne(S,"user-mismatch"),Z}})).apply(this,arguments)}function ns(_,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,p.Z)(function*(_,f,m=!1){const E="signIn",S=yield Mo(_,E,f),x=yield Kr._fromIdTokenResponse(_,E,S);return m||(yield _._updateCurrentUser(x.user)),x})).apply(this,arguments)}function ua(_,f){return R.apply(this,arguments)}function R(){return(R=(0,p.Z)(function*(_,f){return ns(Y(_),f)})).apply(this,arguments)}function O(_,f){return K.apply(this,arguments)}function K(){return(K=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_);return yield Zt(!1,m,f.providerId),di(m,f)})).apply(this,arguments)}function ae(_,f){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,p.Z)(function*(_,f){return Ro((0,L.m9)(_),f)})).apply(this,arguments)}function qe(_,f){return ct.apply(this,arguments)}function ct(){return(ct=(0,p.Z)(function*(_,f){return bn(_,"POST","/v1/accounts:signInWithCustomToken",Et(_,f))})).apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(_,f){const m=Y(_),E=yield qe(m,{token:f,returnSecureToken:!0}),S=yield Kr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Te{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?_t._fromServerResponse(f,m):Ne(f,"internal-error")}}class _t extends Te{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new _t(m)}}function Pt(_,f,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),j(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function On(){return(On=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_),S={requestType:"PASSWORD_RESET",email:f};m&&Pt(E,S,m),yield Pr(E,S)})).apply(this,arguments)}function Hi(){return(Hi=(0,p.Z)(function*(_,f,m){yield zr((0,L.m9)(_),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(_,f){yield Zu((0,L.m9)(_),{oobCode:f})})).apply(this,arguments)}function ca(_,f){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_),E=yield zr(m,{oobCode:f}),S=E.requestType;switch(j(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let x=null;return E.mfaInfo&&(x=Te._fromServerResponse(Y(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:x},operation:S}})).apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(_,f){const{data:m}=yield ca((0,L.m9)(_),f);return m.email})).apply(this,arguments)}function er(){return(er=(0,p.Z)(function*(_,f,m){const E=Y(_),S=yield xo(E,{returnSecureToken:!0,email:f,password:m}),x=yield Kr._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(x.user),x})).apply(this,arguments)}function da(){return(da=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_),S={requestType:"EMAIL_SIGNIN",email:f};j(m.handleCodeInApp,E,"argument-error"),m&&Pt(E,S,m),yield To(E,S)})).apply(this,arguments)}function Eh(){return(Eh=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_),S=ji.credentialWithLink(f,m||Ue());return j(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ua(E,S)})).apply(this,arguments)}function Y0(_,f){return Up.apply(this,arguments)}function Up(){return(Up=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:createAuthUri",Et(_,f))})).apply(this,arguments)}function tl(){return(tl=(0,p.Z)(function*(_,f){const E={identifier:f,continueUri:ft()?Ue():"http://localhost"},{signinMethods:S}=yield Y0((0,L.m9)(_),E);return S||[]})).apply(this,arguments)}function nl(){return(nl=(0,p.Z)(function*(_,f){const m=(0,L.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Pt(m.auth,S,f);const{email:x}=yield _r(m.auth,S);x!==_.email&&(yield _.reload())})).apply(this,arguments)}function Ih(){return(Ih=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};m&&Pt(E.auth,x,m);const{email:Z}=yield Ba(E.auth,x);Z!==_.email&&(yield _.reload())})).apply(this,arguments)}function jp(_,f){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,p.Z)(function*(_,f){return jt(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function bh(){return(bh=(0,p.Z)(function*(_,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const E=(0,L.m9)(_),x={idToken:yield E.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Z=yield hn(E,jp(E.auth,x));E.displayName=Z.displayName||null,E.photoURL=Z.photoUrl||null;const ce=E.providerData.find(({providerId:We})=>"password"===We);ce&&(ce.displayName=E.displayName,ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Ya(_,f,m){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,p.Z)(function*(_,f,m){const{auth:E}=_,x={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(x.email=f),m&&(x.password=m);const Z=yield hn(_,_n(E,x));yield _._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Ai{constructor(f,m,E={}){this.isNewUser=f,this.providerId=m,this.profile=E}}class kn extends Ai{constructor(f,m,E,S){super(f,m,E),this.username=S}}class $p extends Ai{constructor(f,m){super(f,"facebook.com",m)}}class By extends kn{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Gp extends Ai{constructor(f,m){super(f,"google.com",m)}}class jy extends kn{constructor(f,m,E){super(f,"twitter.com",m,E)}}function wc(_){const{user:f,_tokenResponse:m}=_;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Ir(_){var f,m;if(!_)return null;const{providerId:E}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},x=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const Z=null===(m=null===(f=at(_.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Z)return new Ai(x,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!E)return null;switch(E){case"facebook.com":return new $p(x,S);case"github.com":return new By(x,S);case"google.com":return new Gp(x,S);case"twitter.com":return new jy(x,S,_.screenName||null);case"custom":case"anonymous":return new Ai(x,null);default:return new Ai(x,E,S)}}(m)}class fa{constructor(f,m,E){this.type=f,this.credential=m,this.auth=E}static _fromIdtoken(f,m){return new fa("enroll",f,m)}static _fromMfaPendingCredential(f){return new fa("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,E;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return fa._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return fa._fromIdtoken(f.multiFactorSession.idToken)}return null}}class xh{constructor(f,m,E){this.session=f,this.hints=m,this.signInResolver=E}static _fromError(f,m){const E=Y(f),S=m.customData._serverResponse,x=(S.mfaInfo||[]).map(ce=>Te._fromServerResponse(E,ce));j(S.mfaPendingCredential,E,"internal-error");const Z=fa._fromMfaPendingCredential(S.mfaPendingCredential);return new xh(Z,x,function(){var ce=(0,p.Z)(function*(We){const st=yield We._process(E,Z);delete S.mfaInfo,delete S.mfaPendingCredential;const St=Object.assign(Object.assign({},S),{idToken:st.idToken,refreshToken:st.refreshToken});switch(m.operationType){case"signIn":const wt=yield Kr._fromIdTokenResponse(E,m.operationType,St);return yield E._updateCurrentUser(wt.user),wt;case"reauthenticate":return j(m.user,E,"internal-error"),Kr._forOperation(m.user,m.operationType,St);default:Ne(E,"internal-error")}});return function(We){return ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function Mh(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:start",Et(_,f))}class Hy{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Te._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Hy(f)}getSession(){var f=this;return(0,p.Z)(function*(){return fa._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var E=this;return(0,p.Z)(function*(){const S=f,x=yield E.getSession(),Z=yield hn(E.user,S._process(E.user.auth,x,m));return yield E.user._updateTokensIfNecessary(Z),E.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){var E;const S="string"==typeof f?f:f.uid,x=yield m.user.getIdToken(),Z=yield hn(m.user,function zp(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(_,f))}(m.user.auth,{idToken:x,mfaEnrollmentId:S}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ce})=>ce!==S),yield m.user._updateTokensIfNecessary(Z);try{yield m.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(E=ce)||void 0===E?void 0:E.code))throw ce}})()}}const Ic=new WeakMap,al="__sak";class Cc{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(al,"1"),this.storage.removeItem(al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const cl=(()=>{class _ extends Cc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ul(){const _=(0,L.z$)();return Ie(_)||yt(_)}()&&function Tn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ti(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),x=this.localCache[E];S!==x&&m(E,x,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ce,We,st)=>{this.notifyListeners(ce,st)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(S);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const x=()=>{const ce=this.storage.getItem(S);!E&&this.localCache[S]===ce||this.notifyListeners(S,ce)},Z=this.storage.getItem(S);!function cn(){return(0,L.w1)()&&10===document.documentMode}()||Z===m.newValue||m.newValue===m.oldValue?x():setTimeout(x,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const x of Array.from(S))x(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,x=this;return(0,p.Z)(function*(){yield S().call(x,m,E),x.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,p.Z)(function*(){const x=yield E().call(S,m);return S.localCache[m]=JSON.stringify(x),x})()}_remove(m){var E=()=>super._remove,S=this;return(0,p.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return _.type="LOCAL",_})(),Ds=(()=>{class _ extends Cc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let Zp=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(x=>x.isListeningto(m));if(E)return E;const S=new _(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,p.Z)(function*(){const S=m,{eventId:x,eventType:Z,data:ce}=S.data,We=E.handlersMap[Z];if(!We?.size)return;S.ports[0].postMessage({status:"ack",eventId:x,eventType:Z});const st=Array.from(We).map(function(){var wt=(0,p.Z)(function*(gn){return gn(S.origin,ce)});return function(gn){return wt.apply(this,arguments)}}()),St=yield function bc(_){return Promise.all(_.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return f.apply(this,arguments)}}()))}(st);S.ports[0].postMessage({status:"done",eventId:x,eventType:Z,response:St})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function hl(_="",f=10){let m="";for(let E=0;E<f;E++)m+=Math.floor(10*Math.random());return _+m}class $y{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,E=50){var S=this;return(0,p.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let Z,ce;return new Promise((We,st)=>{const St=hl("",20);x.port1.start();const wt=setTimeout(()=>{st(new Error("unsupported_event"))},E);ce={messageChannel:x,onMessage(gn){const qi=gn;if(qi.data.eventId===St)switch(qi.data.status){case"ack":clearTimeout(wt),Z=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),We(qi.data.response);break;default:clearTimeout(wt),clearTimeout(Z),st(new Error("invalid_response"))}}},S.handlers.add(ce),x.port1.addEventListener("message",ce.onMessage),S.target.postMessage({eventType:f,eventId:St,data:m},[x.port2])}).finally(()=>{ce&&S.removeMessageHandler(ce)})})()}}function ur(){return window}function Rh(){return typeof ur().WorkerGlobalScope<"u"&&"function"==typeof ur().importScripts}function pl(){return(pl=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ja="firebaseLocalStorageDb",Xa="firebaseLocalStorage",Nh="fbase_key";class gl{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ml(_,f){return _.transaction([Xa],f?"readwrite":"readonly").objectStore(Xa)}function eu(){const _=indexedDB.open(Ja,1);return new Promise((f,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(Xa,{keyPath:Nh})}catch(S){m(S)}}),_.addEventListener("success",(0,p.Z)(function*(){const E=_.result;E.objectStoreNames.contains(Xa)?f(E):(E.close(),yield function Q0(){const _=indexedDB.deleteDatabase(Ja);return new gl(_).toPromise()}(),f(yield eu()))}))})}function pa(_,f,m){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,p.Z)(function*(_,f,m){const E=ml(_,!0).put({[Nh]:f,value:m});return new gl(E).toPromise()})).apply(this,arguments)}function Ph(){return(Ph=(0,p.Z)(function*(_,f){const m=ml(_,!1).get(f),E=yield new gl(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function tu(_,f){const m=ml(_,!0).delete(f);return new gl(m).toPromise()}const nu=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield eu()),m.db})()}_withRetries(m){var E=this;return(0,p.Z)(function*(){let S=0;for(;;)try{const x=yield E._openDb();return yield m(x)}catch(x){if(S++>3)throw x;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return Rh()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=Zp._getInstance(function Tc(){return Rh()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,p.Z)(function*(S,x){return{keyProcessed:(yield m._poll()).includes(x.key)}});return function(S,x){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,p.Z)(function*(S,x){return["keyChanged"]});return function(S,x){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function fl(){return pl.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new $y(m.activeServiceWorker);const x=yield m.sender._send("ping",{},800);!x||(null===(E=x[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=x[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,p.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Dc(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield eu();return yield pa(m,al,"1"),yield tu(m,al),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,p.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,p.Z)(function*(){return S._withPendingWrite((0,p.Z)(function*(){return yield S._withRetries(x=>pa(x,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,p.Z)(function*(){const S=yield E._withRetries(x=>function Qp(_,f){return Ph.apply(this,arguments)}(x,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,p.Z)(function*(){return E._withPendingWrite((0,p.Z)(function*(){return yield E._withRetries(S=>tu(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const E=yield m._withRetries(Z=>{const ce=ml(Z,!1).getAll();return new gl(ce).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],x=new Set;for(const{fbase_key:Z,value:ce}of E)x.add(Z),JSON.stringify(m.localCache[Z])!==JSON.stringify(ce)&&(m.notifyListeners(Z,ce),S.push(Z));for(const Z of Object.keys(m.localCache))m.localCache[Z]&&!x.has(Z)&&(m.notifyListeners(Z,null),S.push(Z));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const x of Array.from(S))x(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Sc(_,f){return jt(_,"POST","/v2/accounts/mfaSignIn:start",Et(_,f))}function ga(){return(ga=(0,p.Z)(function*(_){return(yield jt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kh(_){return new Promise((f,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=S=>{const x=we("internal-error");x.customData=S,m(x)},E.type="text/javascript",E.charset="UTF-8",function _l(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function Fh(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Lh=1e12;class xn{constructor(f){this.auth=f,this.counter=Lh,this._widgets=new Map}render(f,m){const E=this.counter;return this._widgets.set(E,new J0(f,this.auth.name,m||{})),this.counter++,E}reset(f){var m;const E=f||Lh;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Lh))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var E;return null===(E=m._widgets.get(f||Lh))||void 0===E||E.execute(),""})()}}class J0{constructor(f,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;j(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function aT(_){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gy=Fh("rcb"),uT=new un(3e4,6e4);class cT{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=ur().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return j(function dT(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ur().grecaptcha):new Promise((E,S)=>{const x=ur().setTimeout(()=>{S(we(f,"network-request-failed"))},uT.get());ur()[Gy]=()=>{ur().clearTimeout(x),delete ur()[Gy];const ce=ur().grecaptcha;if(!ce)return void S(we(f,"internal-error"));const We=ce.render;ce.render=(st,St)=>{const wt=We(st,St);return this.counter++,wt},this.hostLanguage=m,E(ce)},kh(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Gy,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(x),S(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=ur().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xc{load(f){return(0,p.Z)(function*(){return new xn(f)})()}clearedOneInstance(){}}const X0="recaptcha",eE={theme:"light",type:"image"};class Cr{constructor(f,m=Object.assign({},eE),E){this.parameters=m,this.type=X0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Y(E),this.isInvisible="invisible"===this.parameters.size,j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;j(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xc:new cT,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(m)||new Promise(x=>{const Z=ce=>{!ce||(f.tokenChangeListeners.delete(Z),x(ce))};f.tokenChangeListeners.add(Z),f.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof f)f(m);else if("string"==typeof f){const E=ur()[f];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){j(ft()&&!Rh(),f.auth,"internal-error"),yield function Sn(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function yl(_){return ga.apply(this,arguments)}(f.auth);j(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class xi{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=ws._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function is(){return(is=(0,p.Z)(function*(_,f,m){const E=Y(_),S=yield ko(E,f,(0,L.m9)(m));return new xi(S,x=>ua(E,x))})).apply(this,arguments)}function ss(){return(ss=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_);yield Zt(!1,E,"phone");const S=yield ko(E.auth,f,(0,L.m9)(m));return new xi(S,x=>O(E,x))})).apply(this,arguments)}function Zr(){return(Zr=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_),S=yield ko(E.auth,f,(0,L.m9)(m));return new xi(S,x=>ae(E,x))})).apply(this,arguments)}function ko(_,f,m){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,p.Z)(function*(_,f,m){var E;const S=yield m.verify();try{let x;if(j("string"==typeof S,_,"argument-error"),j(m.type===X0,_,"argument-error"),x="string"==typeof f?{phoneNumber:f}:f,"session"in x){const Z=x.session;if("phoneNumber"in x)return j("enroll"===Z.type,_,"internal-error"),(yield Mh(_,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{j("signin"===Z.type,_,"internal-error");const ce=(null===(E=x.multiFactorHint)||void 0===E?void 0:E.uid)||x.multiFactorUid;return j(ce,_,"missing-multi-factor-info"),(yield Sc(_,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield fc(_,{phoneNumber:x.phoneNumber,recaptchaToken:S});return Z}}finally{m._reset()}})).apply(this,arguments)}function Vh(){return(Vh=(0,p.Z)(function*(_,f){yield di((0,L.m9)(_),f)})).apply(this,arguments)}let El=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Y(m)}verifyPhoneNumber(m,E){return ko(this.auth,m,(0,L.m9)(E))}static credential(m,E){return ws._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?ws._fromTokenResponse(E,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function ru(_,f){return f?se(f):(j(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Qs extends fn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ar(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ar(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ar(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function it(_){return ns(_.auth,new Qs(_),_.bypassAuthState)}function Uh(_){const{auth:f,user:m}=_;return j(m,f,"internal-error"),Ro(m,new Qs(_),_.bypassAuthState)}function iu(_){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,p.Z)(function*(_){const{auth:f,user:m}=_;return j(m,f,"internal-error"),di(m,new Qs(_),_.bypassAuthState)})).apply(this,arguments)}class Rc{constructor(f,m,E,S,x=!1){this.auth=f,this.resolver=E,this.user=S,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(E,S){f.pendingPromise={resolve:E,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(x){f.reject(x)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:x,tenantId:Z,error:ce,type:We}=f;if(ce)return void m.reject(ce);const st={auth:m.auth,requestUri:E,sessionId:S,tenantId:Z||void 0,postBody:x||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(We)(st))}catch(St){m.reject(St)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return it;case"linkViaPopup":case"linkViaRedirect":return iu;case"reauthViaPopup":case"reauthViaRedirect":return Uh;default:Ne(this.auth,"internal-error")}}resolve(f){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new un(2e3,1e4);function Nc(){return(Nc=(0,p.Z)(function*(_,f,m){const E=Y(_);Ge(_,f,Es);const S=ru(E,m);return new Fo(E,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function Oc(){return(Oc=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_);Ge(E.auth,f,Es);const S=ru(E.auth,m);return new Fo(E.auth,"reauthViaPopup",f,S,E).executeNotNull()})).apply(this,arguments)}function Cl(){return(Cl=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_);Ge(E.auth,f,Es);const S=ru(E.auth,m);return new Fo(E.auth,"linkViaPopup",f,S,E).executeNotNull()})).apply(this,arguments)}let Fo=(()=>{class _ extends Rc{constructor(m,E,S,x,Z){super(m,E,x,Z),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,p.Z)(function*(){Q(1===m.filter.length,"Popup operations only handle one event");const E=hl();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,wr.get())};m()}}return _.currentPopupAction=null,_})();const Ts=new Map;class jh extends Rc{constructor(f,m,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let E=Ts.get(m.auth._key());if(!E){try{const x=(yield function su(_,f){return ma.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;E=()=>Promise.resolve(x)}catch(S){E=()=>Promise.reject(S)}Ts.set(m.auth._key(),E)}return m.bypassAuthState||Ts.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,E=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(E,f);if("unknown"!==f.type){if(f.eventId){const S=yield E.auth._redirectUserForId(f.eventId);if(S)return E.user=S,m().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ma(){return(ma=(0,p.Z)(function*(_,f){const m=lr(f),E=Lo(_);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function Js(_,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,p.Z)(function*(_,f){return Lo(_)._set(lr(f),"true")})).apply(this,arguments)}function Xs(_,f){Ts.set(_._key(),f)}function Lo(_){return se(_._redirectPersistence)}function lr(_){return N("pendingRedirect",_.config.apiKey,_.name)}function ei(){return(ei=(0,p.Z)(function*(_,f,m){const E=Y(_);Ge(_,f,Es);const S=ru(E,m);return yield Js(S,E),S._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Fc(){return(Fc=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_);Ge(E.auth,f,Es);const S=ru(E.auth,m);yield Js(S,E.auth);const x=yield Dl(E);return S._openRedirect(E.auth,f,"reauthViaRedirect",x)})).apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(_,f,m){const E=(0,L.m9)(_);Ge(E.auth,f,Es);const S=ru(E.auth,m);yield Zt(!1,E,f.providerId),yield Js(S,E.auth);const x=yield Dl(E);return S._openRedirect(E.auth,f,"linkViaRedirect",x)})).apply(this,arguments)}function os(){return(os=(0,p.Z)(function*(_,f){return yield Y(_)._initializationPromise,Uo(_,f,!1)})).apply(this,arguments)}function Uo(_,f){return to.apply(this,arguments)}function to(){return(to=(0,p.Z)(function*(_,f,m=!1){const E=Y(_),S=ru(E,f),Z=yield new jh(E,S,m).execute();return Z&&!m&&(delete Z.user._redirectEventId,yield E._persistUserIfCurrent(Z.user),yield E._setRedirectUser(null,f)),Z})).apply(this,arguments)}function Dl(_){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,p.Z)(function*(_){const f=hl(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Hh{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(m=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ss(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qt(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var E;if(f.error&&!qt(f)){const S=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(we(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const E=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vc(f))}saveEventToCache(f){this.cachedEventUids.add(Vc(f)),this.lastProcessedEventTime=Date.now()}}function Vc(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function qt({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function ou(_){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(_,f={}){return jt(_,"GET","/v1/projects",f)})).apply(this,arguments)}const tE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eg=/^https?/;function $h(){return($h=(0,p.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield ou(_);for(const m of f)try{if(tg(m))return}catch{}Ne(_,"unauthorized-domain")})).apply(this,arguments)}function tg(_){const f=Ue(),{protocol:m,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const Z=new URL(_);return""===Z.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Z.hostname===E}if(!eg.test(m))return!1;if(tE.test(_))return E===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const ng=new un(3e4,6e4);function Zy(){const _=ur().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let Gi=null;function Gh(_){return Gi=Gi||function dr(_){return new Promise((f,m)=>{var E,S,x;function Z(){Zy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Zy(),m(we(_,"network-request-failed"))},timeout:ng.get()})}if(null!==(S=null===(E=ur().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)f(gapi.iframes.getContext());else{if(null===(x=ur().gapi)||void 0===x||!x.load){const ce=Fh("iframefcb");return ur()[ce]=()=>{gapi.load?Z():m(we(_,"network-request-failed"))},kh(`https://apis.google.com/js/api.js?onload=${ce}`).catch(We=>m(We))}Z()}}).catch(f=>{throw Gi=null,f})}(_),Gi}const rg=new un(5e3,15e3),Yy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ig(_){const f=_.config;j(f.authDomain,_,"auth-domain-config-required");const m=f.emulator?Rn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:re.SDK_VERSION},S=zh.get(_.config.apiHost);S&&(E.eid=S);const x=_._getFrameworks();return x.length&&(E.fw=x.join(",")),`${m}?${(0,L.xO)(E).slice(1)}`}function ya(){return ya=(0,p.Z)(function*(_){const f=yield Gh(_),m=ur().gapi;return j(m,_,"internal-error"),f.open({where:document.body,url:ig(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yy,dontclear:!0},E=>new Promise(function(){var S=(0,p.Z)(function*(x,Z){yield E.restyle({setHideOnLeave:!1});const ce=we(_,"network-request-failed"),We=ur().setTimeout(()=>{Z(ce)},rg.get());function st(){ur().clearTimeout(We),x(E)}E.ping(st).then(st,()=>{Z(ce)})});return function(x,Z){return S.apply(this,arguments)}}()))}),ya.apply(this,arguments)}const Uc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tl{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hc(_,f,m,E,S,x){j(_.config.authDomain,_,"auth-domain-config-required"),j(_.config.apiKey,_,"invalid-api-key");const Z={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:re.SDK_VERSION,eventId:S};if(f instanceof Es){f.setDefaultLanguage(_.languageCode),Z.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[We,st]of Object.entries(x||{}))Z[We]=st}if(f instanceof Is){const We=f.getScopes().filter(st=>""!==st);We.length>0&&(Z.scopes=We.join(","))}_.tenantId&&(Z.tid=_.tenantId);const ce=Z;for(const We of Object.keys(ce))void 0===ce[We]&&delete ce[We];return`${function $c({config:_}){return _.emulator?Rn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(ce).slice(1)}`}const va="webStorageSupport";class Wi extends class Qy{constructor(f){this.factorId=f}_process(f,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,E);case"signin":return this._finalizeSignIn(f,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Wi(f)}_finalizeEnroll(f,m,E){return function Ec(_,f){return jt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Et(_,f))}(f,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Ac(_,f){return jt(_,"POST","/v2/accounts/mfaSignIn:finalize",Et(_,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ho=(()=>{class _{constructor(){}static assertion(m){return Wi._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var Kh="@firebase/auth",ug="0.20.11";class rE{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(E=>{var S;f((null===(S=E)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wa(){return window}function zi(){return(zi=(0,p.Z)(function*(_,f,m){var E;const{BuildInfo:S}=wa();Q(f.sessionId,"AuthEvent did not contain a session ID");const x=yield Gc(f.sessionId),Z={};return yt()?Z.ibi=S.packageName:ht()?Z.apn=S.packageName:Ne(_,"operation-not-supported-in-this-environment"),S.displayName&&(Z.appDisplayName=S.displayName),Z.sessionId=x,Hc(_,m,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Z)})).apply(this,arguments)}function uu(){return(uu=(0,p.Z)(function*(_){const{BuildInfo:f}=wa(),m={};yt()?m.iosBundleId=f.packageName:ht()?m.androidPackageName=f.packageName:Ne(_,"operation-not-supported-in-this-environment"),yield ou(_,m)})).apply(this,arguments)}function hg(){return(hg=(0,p.Z)(function*(_,f,m){const{cordova:E}=wa();let S=()=>{};try{yield new Promise((x,Z)=>{let ce=null;function We(){var wt;x();const gn=null===(wt=E.plugins.browsertab)||void 0===wt?void 0:wt.close;"function"==typeof gn&&gn(),"function"==typeof m?.close&&m.close()}function st(){ce||(ce=window.setTimeout(()=>{Z(we(_,"redirect-cancelled-by-user"))},2e3))}function St(){"visible"===document?.visibilityState&&st()}f.addPassiveListener(We),document.addEventListener("resume",st,!1),ht()&&document.addEventListener("visibilitychange",St,!1),S=()=>{f.removePassiveListener(We),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",St,!1),ce&&window.clearTimeout(ce)}})}finally{S()}})).apply(this,arguments)}function Gc(_){return io.apply(this,arguments)}function io(){return(io=(0,p.Z)(function*(_){const f=$o(_),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $o(_){if(Q(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),m=new Uint8Array(f);for(let E=0;E<_.length;E++)m[E]=_.charCodeAt(E);return m}(0,L.Pz)("authIdTokenMaxAge"),function sE(_){(0,re._registerComponent)(new oe.wA("auth",(f,{options:m})=>{const E=f.getProvider("app").getImmediate(),S=f.getProvider("heartbeat"),{apiKey:x,authDomain:Z}=E.options;return((ce,We)=>{j(x&&!x.includes(":"),"invalid-api-key",{appName:ce.name}),j(!Z?.includes(":"),"argument-error",{appName:ce.name});const st={apiKey:x,authDomain:Z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ui(_)},St=new Ft(ce,We,st);return function He(_,f){const m=f?.persistence||[],E=(Array.isArray(m)?m:[m]).map(se);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,f?.popupRedirectResolver)}(St,m),St})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,E)=>{f.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new oe.wA("auth-internal",f=>{const m=Y(f.getProvider("auth").getImmediate());return new rE(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(Kh,ug,function iE(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,re.registerVersion)(Kh,ug,"esm2017")}("Browser");class e_ extends Hh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,p.Z)(function*(){yield f.initPromise})()}}function fg(_){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,p.Z)(function*(_){const f=yield lu()._get(xs(_));return f&&(yield lu()._remove(xs(_))),f})).apply(this,arguments)}function n_(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function lu(){return se(cl)}function xs(_){return N("authEvent",_.config.apiKey,_.name)}function zc(_){if(!_?.includes("?"))return{};const[f,...m]=_.split("?");return(0,L.zd)(m.join("?"))}function cu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Ml(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function o_(_=(0,L.z$)()){return!("file:"!==Ml()&&"ionic:"!==Ml()&&"capacitor:"!==Ml()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jh(){try{const _=self.localStorage,f=hl();if(_)return _.setItem(f,"1"),_.removeItem(f),!function yg(_=(0,L.z$)()){return function Rl(){return(0,L.w1)()&&11===document?.documentMode}()||function Qh(_=(0,L.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,L.hl)()}catch{return Kc()&&(0,L.hl)()}return!1}function Kc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xh(){return(function s_(){return"http:"===Ml()||"https:"===Ml()}()||(0,L.ru)()||o_())&&!function uE(){return(0,L.b$)()||(0,L.UG)()}()&&Jh()&&!Kc()}function Zc(){return o_()&&typeof document<"u"}function du(){return(du=(0,p.Z)(function*(){return!!Zc()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const ti={LOCAL:"local",NONE:"none",SESSION:"session"},ni=j,Wo="persistence";function Ms(_){return tf.apply(this,arguments)}function tf(){return(tf=(0,p.Z)(function*(_){yield _._initializationPromise;const f=hu(),m=N(Wo,_.config.apiKey,_.name);f&&f.setItem(m,_._getPersistence())})).apply(this,arguments)}function hu(){var _;try{return(null===(_=function vg(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const a_=j;class Mi{constructor(){this.browserResolver=se(class ag{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ds,this._completeRedirectFn=Uo,this._overrideRedirectResult=Xs}_openPopup(f,m,E,S){var x=this;return(0,p.Z)(function*(){var Z;Q(null===(Z=x.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ce=Hc(f,m,E,Ue(),S);return function ro(_,f,m,E=500,S=600){const x=Math.max((window.screen.availHeight-S)/2,0).toString(),Z=Math.max((window.screen.availWidth-E)/2,0).toString();let ce="";const We=Object.assign(Object.assign({},Uc),{width:E.toString(),height:S.toString(),top:x,left:Z}),st=(0,L.z$)().toLowerCase();m&&(ce=Ke(st)?"_blank":m),ie(st)&&(f=f||"http://localhost",We.scrollbars="yes");const St=Object.entries(We).reduce((gn,[qi,Ko])=>`${gn}${qi}=${Ko},`,"");if(function Nn(_=(0,L.z$)()){var f;return yt(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(st)&&"_self"!==ce)return function og(_,f){const m=document.createElement("a");m.href=_,m.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(f||"",ce),new Tl(null);const wt=window.open(f||"",ce,St);j(wt,_,"popup-blocked");try{wt.focus()}catch{}return new Tl(wt)}(f,ce,hl())})()}_openRedirect(f,m,E,S){var x=this;return(0,p.Z)(function*(){return yield x._originValidation(f),function Zs(_){ur().location.href=_}(Hc(f,m,E,Ue(),S)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:x}=this.eventManagers[m];return S?Promise.resolve(S):(Q(x,"If manager is not set, promise should be"),x)}const E=this.initAndGetManager(f);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const E=yield function sg(_){return ya.apply(this,arguments)}(f),S=new Hh(f);return E.register("authEvent",x=>(j(x?.authEvent,f,"invalid-auth-event"),{status:S.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=E,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(va,{type:va},S=>{var x;const Z=null===(x=S?.[0])||void 0===x?void 0:x[va];void 0!==Z&&m(!!Z),Ne(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function As(_){return $h.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ti()||Ie()||yt()}}),this.cordovaResolver=se(class gg{constructor(){this._redirectPersistence=Ds,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Uo,this._overrideRedirectResult=Xs}_initialize(f){var m=this;return(0,p.Z)(function*(){const E=f._key();let S=m.eventManagers.get(E);return S||(S=new e_(f),m.eventManagers.set(E,S),m.attachCallbackListeners(f,S)),S})()}_openPopup(f){Ne(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,E,S){var x=this;return(0,p.Z)(function*(){!function aE(_){var f,m,E,S,x,Z,ce,We,st,St;const wt=wa();j("function"==typeof(null===(f=wt?.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof(null===(m=wt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(x=null===(S=null===(E=wt?.cordova)||void 0===E?void 0:E.plugins)||void 0===S?void 0:S.browsertab)||void 0===x?void 0:x.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(We=null===(ce=null===(Z=wt?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===We?void 0:We.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(St=null===(st=wt?.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===St?void 0:St.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield x._initialize(f);yield Z.initialized(),Z.resetRedirect(),function br(){Ts.clear()}(),yield x._originValidation(f);const ce=function t_(_,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:n_(),postBody:null,tenantId:_.tenantId,error:we(_,"no-auth-event")}}(f,E,S);yield function Ea(_,f){return lu()._set(xs(_),f)}(f,ce);const We=yield function Al(_,f,m){return zi.apply(this,arguments)}(f,ce,m),st=yield function Xy(_){const{cordova:f}=wa();return new Promise(m=>{f.plugins.browsertab.isAvailable(E=>{let S=null;E?f.plugins.browsertab.openUrl(_):S=f.InAppBrowser.open(_,function yn(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),m(S)})})}(We);return function dg(_,f,m){return hg.apply(this,arguments)}(f,Z,st)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function as(_){return uu.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:E,handleOpenURL:S,BuildInfo:x}=wa(),Z=setTimeout((0,p.Z)(function*(){yield fg(f),m.onEvent(cu())}),500),ce=function(){var St=(0,p.Z)(function*(wt){clearTimeout(Z);const gn=yield fg(f);let qi=null;gn&&wt?.url&&(qi=function pg(_,f){var m,E;const S=function xl(_){const f=zc(_),m=f.link?decodeURIComponent(f.link):void 0,E=zc(m).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return zc(S).link||S||E||m||_}(f);if(S.includes("/__/auth/callback")){const x=zc(S),Z=x.firebaseError?function r_(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,ce=null===(E=null===(m=Z?.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],We=ce?we(ce):null;return We?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:We,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:S,postBody:null}}return null}(gn,wt.url)),m.onEvent(qi||cu())});return function(gn){return St.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ce);const We=S,st=`${x.packageName.toLowerCase()}://`;wa().handleOpenURL=function(){var St=(0,p.Z)(function*(wt){if(wt.toLowerCase().startsWith(st)&&ce({url:wt}),"function"==typeof We)try{We(wt)}catch(gn){console.error(gn)}});return function(wt){return St.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ds,this._completeRedirectFn=Uo,this._overrideRedirectResult=Xs}_initialize(f){var m=this;return(0,p.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,E,S){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(f,m,E,S)})()}_openRedirect(f,m,E,S){var x=this;return(0,p.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(f,m,E,S)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Zc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return a_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,p.Z)(function*(){if(f.underlyingResolver)return;const m=yield function _g(){return du.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function fu(_){return _.unwrap()}function nf(_){return Yc(_)}function Yc(_){const{_tokenResponse:f}=_ instanceof L.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return El.credentialFromResult(_);const m=f.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=Wa;break;case"facebook.com":E=Ga;break;case"github.com":E=Ju;break;case"twitter.com":E=kr;break;default:const{oauthIdToken:S,oauthAccessToken:x,oauthTokenSecret:Z,pendingToken:ce,nonce:We}=f;return x||Z||S||ce?ce?m.startsWith("saml.")?Cs._create(m,ce):Bi._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:S,accessToken:x}):new Hs(m).credential({idToken:S,accessToken:x,rawNonce:We}):null}return _ instanceof L.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function hi(_,f){return f.catch(m=>{throw m instanceof L.ZR&&function Nl(_,f){var m,E;const S=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new u_(_,function ol(_,f){var m;const E=(0,L.m9)(_),S=f;return j(f.customData.operationType,E,"argument-error"),j(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),xh._fromError(E,S)}(_,f));else if(S){const x=Yc(f),Z=f;x&&(Z.credential=x,Z.tenantId=S.tenantId||void 0,Z.email=S.email||void 0,Z.phoneNumber=S.phoneNumber||void 0)}}(_,m),m}).then(m=>{const S=m.user;return{operationType:m.operationType,credential:nf(m),additionalUserInfo:wc(m),user:us.getOrCreate(S)}})}function zo(_,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,p.Z)(function*(_,f){const m=yield f;return{verificationId:m.verificationId,confirm:E=>hi(_,m.confirm(E))}})).apply(this,arguments)}class u_{constructor(f,m){this.resolver=m,this.auth=function ao(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return hi(fu(this.auth),this.resolver.resolveSignIn(f))}}class us{constructor(f){this._delegate=f,this.multiFactor=function Qa(_){const f=(0,L.m9)(_);return Ic.has(f)||Ic.set(f,Hy._fromUser(f)),Ic.get(f)}(f)}static getOrCreate(f){return us.USER_MAP.has(f)||us.USER_MAP.set(f,new us(f)),us.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,p.Z)(function*(){return hi(m.auth,O(m._delegate,f))})()}linkWithPhoneNumber(f,m){var E=this;return(0,p.Z)(function*(){return zo(E.auth,function $n(_,f,m){return ss.apply(this,arguments)}(E._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,p.Z)(function*(){return hi(m.auth,function Il(_,f,m){return Cl.apply(this,arguments)}(m._delegate,f,Mi))})()}linkWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield Ms(Y(m.auth)),function Ky(_,f,m){return function eo(_,f,m){return $i.apply(this,arguments)}(_,f,m)}(m._delegate,f,Mi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,p.Z)(function*(){return hi(m.auth,ae(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return zo(this.auth,function wl(_,f,m){return Zr.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return hi(this.auth,function qy(_,f,m){return Oc.apply(this,arguments)}(this._delegate,f,Mi))}reauthenticateWithRedirect(f){var m=this;return(0,p.Z)(function*(){return yield Ms(Y(m.auth)),function Lr(_,f,m){return function Vo(_,f,m){return Fc.apply(this,arguments)}(_,f,m)}(m._delegate,f,Mi)})()}sendEmailVerification(f){return function Ly(_,f){return nl.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,p.Z)(function*(){return yield function ci(_,f){return _c.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Hp(_,f){return Ya((0,L.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function rl(_,f){return Ya((0,L.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Wy(_,f){return Vh.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Uy(_,f){return bh.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Vy(_,f,m){return Ih.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}us.USER_MAP=new WeakMap;const pu=j;let rf=(()=>{class _{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;pu(S,"invalid-api-key",{appName:m.name}),pu(S,"invalid-api-key",{appName:m.name});const x=typeof window<"u"?Mi:void 0;this._delegate=E.initialize({options:{persistence:wg(S,m.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(be),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?us.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Be(_,f,m){const E=Y(_);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const S=!!m?.disableWarnings,x=ut(f),{host:Z,port:ce}=function Ht(_){const f=ut(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const x=S[1];return{host:x,port:rn(E.substr(x.length+1))}}{const[x,Z]=E.split(":");return{host:x,port:rn(Z)}}}(f);E.config.emulator={url:`${x}//${Z}${null===ce?"":`:${ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Z,port:ce,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function jn(){function _(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,m,E)}applyActionCode(m){return function Fr(_,f){return Za.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return ca(this._delegate,m)}confirmPasswordReset(m,E){return function la(_,f,m){return Hi.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var S=this;return(0,p.Z)(function*(){return hi(S._delegate,function Ks(_,f,m){return er.apply(this,arguments)}(S._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Bp(_,f){return tl.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function No(_,f){return"EMAIL_SIGNIN"===$a.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,p.Z)(function*(){pu(Xh(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function cr(_,f){return os.apply(this,arguments)}(m._delegate,Mi);return E?hi(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Go(_,f){Y(_)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,E,S){const{next:x,error:Z,complete:ce}=Ol(m,E,S);return this._delegate.onAuthStateChanged(x,Z,ce)}onIdTokenChanged(m,E,S){const{next:x,error:Z,complete:ce}=Ol(m,E,S);return this._delegate.onIdTokenChanged(x,Z,ce)}sendSignInLinkToEmail(m,E){return function wh(_,f,m){return da.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function rs(_,f,m){return On.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,p.Z)(function*(){let S;switch(function ef(_,f){ni(Object.values(ti).includes(f),_,"invalid-persistence-type"),(0,L.b$)()?ni(f!==ti.SESSION,_,"unsupported-persistence-type"):(0,L.UG)()?ni(f===ti.NONE,_,"unsupported-persistence-type"):Kc()?ni(f===ti.NONE||f===ti.LOCAL&&(0,L.hl)(),_,"unsupported-persistence-type"):ni(f===ti.NONE||Jh(),_,"unsupported-persistence-type")}(E._delegate,m),m){case ti.SESSION:S=Ds;break;case ti.LOCAL:S=(yield se(nu)._isAvailable())?nu:cl;break;case ti.NONE:S=B;break;default:return Ne("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return hi(this._delegate,function K0(_){return Hn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return hi(this._delegate,ua(this._delegate,m))}signInWithCustomToken(m){return hi(this._delegate,function Jt(_,f){return Zn.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return hi(this._delegate,function bs(_,f,m){return ua((0,L.m9)(_),ji.credential(f,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return hi(this._delegate,function Z0(_,f,m){return Eh.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return zo(this._delegate,function vt(_,f,m){return is.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,p.Z)(function*(){return pu(Xh(),E._delegate,"operation-not-supported-in-this-environment"),hi(E._delegate,function zy(_,f,m){return Nc.apply(this,arguments)}(E._delegate,m,Mi))})()}signInWithRedirect(m){var E=this;return(0,p.Z)(function*(){return pu(Xh(),E._delegate,"operation-not-supported-in-this-environment"),yield Ms(E._delegate),function Fn(_,f,m){return function bl(_,f,m){return ei.apply(this,arguments)}(_,f,m)}(E._delegate,m,Mi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function zs(_,f){return qs.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ti,_})();function Ol(_,f,m){let E=_;"function"!=typeof _&&({next:E,error:f,complete:m}=_);const S=E;return{next:Z=>S(Z&&us.getOrCreate(Z)),error:f,complete:m}}function wg(_,f){const m=function oo(_,f){const m=hu();if(!m)return[];const E=N(Wo,_,f);switch(m.getItem(E)){case ti.NONE:return[B];case ti.LOCAL:return[nu,Ds];case ti.SESSION:return[Ds];default:return[]}}(_,f);if(typeof self<"u"&&!m.includes(nu)&&m.push(nu),typeof window<"u")for(const E of[cl,Ds])m.includes(E)||m.push(E);return m.includes(B)||m.push(B),m}class Qc{constructor(){this.providerId="phone",this._delegate=new El(fu(X.Z.auth()))}static credential(f,m){return El.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Qc.PHONE_SIGN_IN_METHOD=El.PHONE_SIGN_IN_METHOD,Qc.PROVIDER_ID=El.PROVIDER_ID;const Pl=j;class kl{constructor(f,m,E=X.Z.app()){var S;Pl(null===(S=E.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Cr(f,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function l_(_){_.INTERNAL.registerComponent(new oe.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new rf(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ji,FacebookAuthProvider:Ga,GithubAuthProvider:Ju,GoogleAuthProvider:Wa,OAuthProvider:Hs,SAMLAuthProvider:Ao,PhoneAuthProvider:Qc,PhoneMultiFactorGenerator:Ho,RecaptchaVerifier:kl,TwitterAuthProvider:kr,Auth:rf,AuthCredential:fn,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.24")}(X.Z)},9751:(pt,Re,P)=>{P.d(Re,{y:()=>ge});var p=P(930),X=P(727),L=P(8822),re=P(9635),de=P(2416),fe=P(576),oe=P(2806);let ge=(()=>{class J{constructor(Ce){Ce&&(this._subscribe=Ce)}lift(Ce){const be=new J;return be.source=this,be.operator=Ce,be}subscribe(Ce,be,Ze){const ye=function z(J){return J&&J instanceof p.Lv||function $(J){return J&&(0,fe.m)(J.next)&&(0,fe.m)(J.error)&&(0,fe.m)(J.complete)}(J)&&(0,X.Nn)(J)}(Ce)?Ce:new p.Hp(Ce,be,Ze);return(0,oe.x)(()=>{const{operator:le,source:lt}=this;ye.add(le?le.call(ye,lt):lt?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Ce){try{return this._subscribe(Ce)}catch(be){Ce.error(be)}}forEach(Ce,be){return new(be=he(be))((Ze,ye)=>{const le=new p.Hp({next:lt=>{try{Ce(lt)}catch(rt){ye(rt),le.unsubscribe()}},error:ye,complete:Ze});this.subscribe(le)})}_subscribe(Ce){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Ce)}[L.L](){return this}pipe(...Ce){return(0,re.U)(Ce)(this)}toPromise(Ce){return new(Ce=he(Ce))((be,Ze)=>{let ye;this.subscribe(le=>ye=le,le=>Ze(le),()=>be(ye))})}}return J.create=Oe=>new J(Oe),J})();function he(J){var Oe;return null!==(Oe=J??de.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(pt,Re,P)=>{P.d(Re,{x:()=>oe});var p=P(9751),X=P(727);const re=(0,P(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=P(8737),fe=P(2806);let oe=(()=>{class he extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new ge(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new re}next(z){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:Oe,observers:Ce}=this;return J||Oe?X.Lc:(this.currentObservers=null,Ce.push(z),new X.w0(()=>{this.currentObservers=null,(0,de.P)(Ce,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:Oe,isStopped:Ce}=this;J?z.error(Oe):Ce&&z.complete()}asObservable(){const z=new p.y;return z.source=this,z}}return he.create=($,z)=>new ge($,z),he})();class ge extends oe{constructor($,z){super(),this.destination=$,this.source=z}next($){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,$)}error($){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,$)}complete(){var $,z;null===(z=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===z||z.call($)}_subscribe($){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe($))&&void 0!==J?J:X.Lc}}},930:(pt,Re,P)=>{P.d(Re,{Hp:()=>Ze,Lv:()=>J});var p=P(576),X=P(727),L=P(2416),re=P(7849),de=P(5032);const fe=he("C",void 0,void 0);function he(Ne,we,De){return{kind:Ne,value:we,error:De}}var $=P(3410),z=P(2806);class J extends X.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,X.Nn)(we)&&we.add(this)):this.destination=rt}static create(we,De,Ge){return new Ze(we,De,Ge)}next(we){this.isStopped?lt(function ge(Ne){return he("N",Ne,void 0)}(we),this):this._next(we)}error(we){this.isStopped?lt(function oe(Ne){return he("E",void 0,Ne)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?lt(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function Ce(Ne,we){return Oe.call(Ne,we)}class be{constructor(we){this.partialObserver=we}next(we){const{partialObserver:De}=this;if(De.next)try{De.next(we)}catch(Ge){ye(Ge)}}error(we){const{partialObserver:De}=this;if(De.error)try{De.error(we)}catch(Ge){ye(Ge)}else ye(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(De){ye(De)}}}class Ze extends J{constructor(we,De,Ge){let Ve;if(super(),(0,p.m)(we)||!we)Ve={next:we??void 0,error:De??void 0,complete:Ge??void 0};else{let j;this&&L.v.useDeprecatedNextContext?(j=Object.create(we),j.unsubscribe=()=>this.unsubscribe(),Ve={next:we.next&&Ce(we.next,j),error:we.error&&Ce(we.error,j),complete:we.complete&&Ce(we.complete,j)}):Ve=we}this.destination=new be(Ve)}}function ye(Ne){L.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Ne):(0,re.h)(Ne)}function lt(Ne,we){const{onStoppedNotification:De}=L.v;De&&$.z.setTimeout(()=>De(Ne,we))}const rt={closed:!0,next:de.Z,error:function le(Ne){throw Ne},complete:de.Z}},727:(pt,Re,P)=>{P.d(Re,{Lc:()=>fe,w0:()=>de,Nn:()=>oe});var p=P(576);const L=(0,P(3888).d)(he=>function(z){he(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,Oe)=>`${Oe+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var re=P(8737);class de{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ce of z)Ce.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,p.m)(J))try{J()}catch(Ce){$=Ce instanceof L?Ce.errors:[Ce]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const Ce of Oe)try{ge(Ce)}catch(be){$=$??[],be instanceof L?$=[...$,...be.errors]:$.push(be)}}if($)throw new L($)}}add($){var z;if($&&$!==this)if(this.closed)ge($);else{if($ instanceof de){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push($)}}_hasParent($){const{_parentage:z}=this;return z===$||Array.isArray(z)&&z.includes($)}_addParent($){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push($),z):z?[z,$]:$}_removeParent($){const{_parentage:z}=this;z===$?this._parentage=null:Array.isArray(z)&&(0,re.P)(z,$)}remove($){const{_finalizers:z}=this;z&&(0,re.P)(z,$),$ instanceof de&&$._removeParent(this)}}de.EMPTY=(()=>{const he=new de;return he.closed=!0,he})();const fe=de.EMPTY;function oe(he){return he instanceof de||he&&"closed"in he&&(0,p.m)(he.remove)&&(0,p.m)(he.add)&&(0,p.m)(he.unsubscribe)}function ge(he){(0,p.m)(he)?he():he.unsubscribe()}},2416:(pt,Re,P)=>{P.d(Re,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Re,P)=>{P.d(Re,{E:()=>X});const X=new(P(9751).y)(de=>de.complete())},8996:(pt,Re,P)=>{P.d(Re,{D:()=>we});var p=P(8421),X=P(5363),L=P(9468),fe=P(9751),ge=P(2202),he=P(576),$=P(9672);function J(De,Ge){if(!De)throw new Error("Iterable cannot be null");return new fe.y(Ve=>{(0,$.f)(Ve,Ge,()=>{const j=De[Symbol.asyncIterator]();(0,$.f)(Ve,Ge,()=>{j.next().then(ve=>{ve.done?Ve.complete():Ve.next(ve.value)})},0,!0)})})}var Oe=P(3670),Ce=P(8239),be=P(1144),Ze=P(6495),ye=P(2206),le=P(4532),lt=P(3260);function we(De,Ge){return Ge?function Ne(De,Ge){if(null!=De){if((0,Oe.c)(De))return function re(De,Ge){return(0,p.Xf)(De).pipe((0,L.R)(Ge),(0,X.Q)(Ge))}(De,Ge);if((0,be.z)(De))return function oe(De,Ge){return new fe.y(Ve=>{let j=0;return Ge.schedule(function(){j===De.length?Ve.complete():(Ve.next(De[j++]),Ve.closed||this.schedule())})})}(De,Ge);if((0,Ce.t)(De))return function de(De,Ge){return(0,p.Xf)(De).pipe((0,L.R)(Ge),(0,X.Q)(Ge))}(De,Ge);if((0,ye.D)(De))return J(De,Ge);if((0,Ze.T)(De))return function z(De,Ge){return new fe.y(Ve=>{let j;return(0,$.f)(Ve,Ge,()=>{j=De[ge.h](),(0,$.f)(Ve,Ge,()=>{let ve,Q;try{({value:ve,done:Q}=j.next())}catch(ee){return void Ve.error(ee)}Q?Ve.complete():Ve.next(ve)},0,!0)}),()=>(0,he.m)(j?.return)&&j.return()})}(De,Ge);if((0,lt.L)(De))return function rt(De,Ge){return J((0,lt.Q)(De),Ge)}(De,Ge)}throw(0,le.z)(De)}(De,Ge):(0,p.Xf)(De)}},8421:(pt,Re,P)=>{P.d(Re,{Xf:()=>Oe});var p=P(655),X=P(1144),L=P(8239),re=P(9751),de=P(3670),fe=P(2206),oe=P(4532),ge=P(6495),he=P(3260),$=P(576),z=P(7849),J=P(8822);function Oe(Ne){if(Ne instanceof re.y)return Ne;if(null!=Ne){if((0,de.c)(Ne))return function Ce(Ne){return new re.y(we=>{const De=Ne[J.L]();if((0,$.m)(De.subscribe))return De.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,X.z)(Ne))return function be(Ne){return new re.y(we=>{for(let De=0;De<Ne.length&&!we.closed;De++)we.next(Ne[De]);we.complete()})}(Ne);if((0,L.t)(Ne))return function Ze(Ne){return new re.y(we=>{Ne.then(De=>{we.closed||(we.next(De),we.complete())},De=>we.error(De)).then(null,z.h)})}(Ne);if((0,fe.D)(Ne))return le(Ne);if((0,ge.T)(Ne))return function ye(Ne){return new re.y(we=>{for(const De of Ne)if(we.next(De),we.closed)return;we.complete()})}(Ne);if((0,he.L)(Ne))return function lt(Ne){return le((0,he.Q)(Ne))}(Ne)}throw(0,oe.z)(Ne)}function le(Ne){return new re.y(we=>{(function rt(Ne,we){var De,Ge,Ve,j;return(0,p.mG)(this,void 0,void 0,function*(){try{for(De=(0,p.KL)(Ne);!(Ge=yield De.next()).done;)if(we.next(Ge.value),we.closed)return}catch(ve){Ve={error:ve}}finally{try{Ge&&!Ge.done&&(j=De.return)&&(yield j.call(De))}finally{if(Ve)throw Ve.error}}we.complete()})})(Ne,we).catch(De=>we.error(De))})}},6451:(pt,Re,P)=>{P.d(Re,{T:()=>fe});var p=P(8189),X=P(8421),L=P(515),re=P(7669),de=P(8996);function fe(...oe){const ge=(0,re.yG)(oe),he=(0,re._6)(oe,1/0),$=oe;return $.length?1===$.length?(0,X.Xf)($[0]):(0,p.J)(he)((0,de.D)($,ge)):L.E}},5403:(pt,Re,P)=>{P.d(Re,{x:()=>X});var p=P(930);function X(re,de,fe,oe,ge){return new L(re,de,fe,oe,ge)}class L extends p.Lv{constructor(de,fe,oe,ge,he,$){super(de),this.onFinalize=he,this.shouldUnsubscribe=$,this._next=fe?function(z){try{fe(z)}catch(J){de.error(J)}}:super._next,this._error=ge?function(z){try{ge(z)}catch(J){de.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(z){de.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(pt,Re,P)=>{P.d(Re,{U:()=>L});var p=P(4482),X=P(5403);function L(re,de){return(0,p.e)((fe,oe)=>{let ge=0;fe.subscribe((0,X.x)(oe,he=>{oe.next(re.call(de,he,ge++))}))})}},8189:(pt,Re,P)=>{P.d(Re,{J:()=>L});var p=P(5577),X=P(4671);function L(re=1/0){return(0,p.z)(X.y,re)}},5577:(pt,Re,P)=>{P.d(Re,{z:()=>ge});var p=P(4004),X=P(8421),L=P(4482),re=P(9672),de=P(5403),oe=P(576);function ge(he,$,z=1/0){return(0,oe.m)($)?ge((J,Oe)=>(0,p.U)((Ce,be)=>$(J,Ce,Oe,be))((0,X.Xf)(he(J,Oe))),z):("number"==typeof $&&(z=$),(0,L.e)((J,Oe)=>function fe(he,$,z,J,Oe,Ce,be,Ze){const ye=[];let le=0,lt=0,rt=!1;const Ne=()=>{rt&&!ye.length&&!le&&$.complete()},we=Ge=>le<J?De(Ge):ye.push(Ge),De=Ge=>{Ce&&$.next(Ge),le++;let Ve=!1;(0,X.Xf)(z(Ge,lt++)).subscribe((0,de.x)($,j=>{Oe?.(j),Ce?we(j):$.next(j)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(le--;ye.length&&le<J;){const j=ye.shift();be?(0,re.f)($,be,()=>De(j)):De(j)}Ne()}catch(j){$.error(j)}}))};return he.subscribe((0,de.x)($,we,()=>{rt=!0,Ne()})),()=>{Ze?.()}}(J,Oe,he,z)))}},5363:(pt,Re,P)=>{P.d(Re,{Q:()=>re});var p=P(9672),X=P(4482),L=P(5403);function re(de,fe=0){return(0,X.e)((oe,ge)=>{oe.subscribe((0,L.x)(ge,he=>(0,p.f)(ge,de,()=>ge.next(he),fe),()=>(0,p.f)(ge,de,()=>ge.complete(),fe),he=>(0,p.f)(ge,de,()=>ge.error(he),fe)))})}},3099:(pt,Re,P)=>{P.d(Re,{B:()=>de});var p=P(8421),X=P(7579),L=P(930),re=P(4482);function de(oe={}){const{connector:ge=(()=>new X.x),resetOnError:he=!0,resetOnComplete:$=!0,resetOnRefCountZero:z=!0}=oe;return J=>{let Oe,Ce,be,Ze=0,ye=!1,le=!1;const lt=()=>{Ce?.unsubscribe(),Ce=void 0},rt=()=>{lt(),Oe=be=void 0,ye=le=!1},Ne=()=>{const we=Oe;rt(),we?.unsubscribe()};return(0,re.e)((we,De)=>{Ze++,!le&&!ye&&lt();const Ge=be=be??ge();De.add(()=>{Ze--,0===Ze&&!le&&!ye&&(Ce=fe(Ne,z))}),Ge.subscribe(De),!Oe&&Ze>0&&(Oe=new L.Hp({next:Ve=>Ge.next(Ve),error:Ve=>{le=!0,lt(),Ce=fe(rt,he,Ve),Ge.error(Ve)},complete:()=>{ye=!0,lt(),Ce=fe(rt,$),Ge.complete()}}),(0,p.Xf)(we).subscribe(Oe))})(J)}}function fe(oe,ge,...he){if(!0===ge)return void oe();if(!1===ge)return;const $=new L.Hp({next:()=>{$.unsubscribe(),oe()}});return ge(...he).subscribe($)}},9468:(pt,Re,P)=>{P.d(Re,{R:()=>X});var p=P(4482);function X(L,re=0){return(0,p.e)((de,fe)=>{fe.add(L.schedule(()=>de.subscribe(fe),re))})}},8505:(pt,Re,P)=>{P.d(Re,{b:()=>de});var p=P(576),X=P(4482),L=P(5403),re=P(4671);function de(fe,oe,ge){const he=(0,p.m)(fe)||oe||ge?{next:fe,error:oe,complete:ge}:fe;return he?(0,X.e)(($,z)=>{var J;null===(J=he.subscribe)||void 0===J||J.call(he);let Oe=!0;$.subscribe((0,L.x)(z,Ce=>{var be;null===(be=he.next)||void 0===be||be.call(he,Ce),z.next(Ce)},()=>{var Ce;Oe=!1,null===(Ce=he.complete)||void 0===Ce||Ce.call(he),z.complete()},Ce=>{var be;Oe=!1,null===(be=he.error)||void 0===be||be.call(he,Ce),z.error(Ce)},()=>{var Ce,be;Oe&&(null===(Ce=he.unsubscribe)||void 0===Ce||Ce.call(he)),null===(be=he.finalize)||void 0===be||be.call(he)}))}):re.y}},4408:(pt,Re,P)=>{P.d(Re,{o:()=>de});var p=P(727);class X extends p.w0{constructor(oe,ge){super()}schedule(oe,ge=0){return this}}const L={setInterval(fe,oe,...ge){const{delegate:he}=L;return he?.setInterval?he.setInterval(fe,oe,...ge):setInterval(fe,oe,...ge)},clearInterval(fe){const{delegate:oe}=L;return(oe?.clearInterval||clearInterval)(fe)},delegate:void 0};var re=P(8737);class de extends X{constructor(oe,ge){super(oe,ge),this.scheduler=oe,this.work=ge,this.pending=!1}schedule(oe,ge=0){if(this.closed)return this;this.state=oe;const he=this.id,$=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId($,he,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId($,this.id,ge),this}requestAsyncId(oe,ge,he=0){return L.setInterval(oe.flush.bind(oe,this),he)}recycleAsyncId(oe,ge,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ge;L.clearInterval(ge)}execute(oe,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(oe,ge);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ge){let $,he=!1;try{this.work(oe)}catch(z){he=!0,$=z||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ge}=this,{actions:he}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(he,this),null!=oe&&(this.id=this.recycleAsyncId(ge,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Re,P)=>{P.d(Re,{v:()=>L});var p=P(6063);class X{constructor(de,fe=X.now){this.schedulerActionCtor=de,this.now=fe}schedule(de,fe=0,oe){return new this.schedulerActionCtor(this,de).schedule(oe,fe)}}X.now=p.l.now;class L extends X{constructor(de,fe=X.now){super(de,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:fe}=this;if(this._active)return void fe.push(de);let oe;this._active=!0;do{if(oe=de.execute(de.state,de.delay))break}while(de=fe.shift());if(this._active=!1,oe){for(;de=fe.shift();)de.unsubscribe();throw oe}}}},4986:(pt,Re,P)=>{P.d(Re,{z:()=>L});var p=P(4408);const L=new(P(7565).v)(p.o)},6063:(pt,Re,P)=>{P.d(Re,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(pt,Re,P)=>{P.d(Re,{z:()=>p});const p={setTimeout(X,L,...re){const{delegate:de}=p;return de?.setTimeout?de.setTimeout(X,L,...re):setTimeout(X,L,...re)},clearTimeout(X){const{delegate:L}=p;return(L?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(pt,Re,P)=>{P.d(Re,{h:()=>X});const X=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Re,P)=>{P.d(Re,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Re,P)=>{P.d(Re,{_6:()=>fe,jO:()=>re,yG:()=>de});var p=P(576);function L(oe){return oe[oe.length-1]}function re(oe){return(0,p.m)(L(oe))?oe.pop():void 0}function de(oe){return function X(oe){return oe&&(0,p.m)(oe.schedule)}(L(oe))?oe.pop():void 0}function fe(oe,ge){return"number"==typeof L(oe)?oe.pop():ge}},8737:(pt,Re,P)=>{function p(X,L){if(X){const re=X.indexOf(L);0<=re&&X.splice(re,1)}}P.d(Re,{P:()=>p})},3888:(pt,Re,P)=>{function p(X){const re=X(de=>{Error.call(de),de.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}P.d(Re,{d:()=>p})},2806:(pt,Re,P)=>{P.d(Re,{O:()=>re,x:()=>L});var p=P(2416);let X=null;function L(de){if(p.v.useDeprecatedSynchronousErrorHandling){const fe=!X;if(fe&&(X={errorThrown:!1,error:null}),de(),fe){const{errorThrown:oe,error:ge}=X;if(X=null,oe)throw ge}}else de()}function re(de){p.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=de)}},9672:(pt,Re,P)=>{function p(X,L,re,de=0,fe=!1){const oe=L.schedule(function(){re(),fe?X.add(this.schedule(null,de)):this.unsubscribe()},de);if(X.add(oe),!fe)return oe}P.d(Re,{f:()=>p})},4671:(pt,Re,P)=>{function p(X){return X}P.d(Re,{y:()=>p})},1144:(pt,Re,P)=>{P.d(Re,{z:()=>p});const p=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(pt,Re,P)=>{P.d(Re,{D:()=>X});var p=P(576);function X(L){return Symbol.asyncIterator&&(0,p.m)(L?.[Symbol.asyncIterator])}},576:(pt,Re,P)=>{function p(X){return"function"==typeof X}P.d(Re,{m:()=>p})},3670:(pt,Re,P)=>{P.d(Re,{c:()=>L});var p=P(8822),X=P(576);function L(re){return(0,X.m)(re[p.L])}},6495:(pt,Re,P)=>{P.d(Re,{T:()=>L});var p=P(2202),X=P(576);function L(re){return(0,X.m)(re?.[p.h])}},8239:(pt,Re,P)=>{P.d(Re,{t:()=>X});var p=P(576);function X(L){return(0,p.m)(L?.then)}},3260:(pt,Re,P)=>{P.d(Re,{L:()=>re,Q:()=>L});var p=P(655),X=P(576);function L(de){return(0,p.FC)(this,arguments,function*(){const oe=de.getReader();try{for(;;){const{value:ge,done:he}=yield(0,p.qq)(oe.read());if(he)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ge)}}finally{oe.releaseLock()}})}function re(de){return(0,X.m)(de?.getReader)}},4482:(pt,Re,P)=>{P.d(Re,{A:()=>X,e:()=>L});var p=P(576);function X(re){return(0,p.m)(re?.lift)}function L(re){return de=>{if(X(de))return de.lift(function(fe){try{return re(fe,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(pt,Re,P)=>{function p(){}P.d(Re,{Z:()=>p})},9635:(pt,Re,P)=>{P.d(Re,{U:()=>L,z:()=>X});var p=P(4671);function X(...re){return L(re)}function L(re){return 0===re.length?p.y:1===re.length?re[0]:function(fe){return re.reduce((oe,ge)=>ge(oe),fe)}}},7849:(pt,Re,P)=>{P.d(Re,{h:()=>L});var p=P(2416),X=P(3410);function L(re){X.z.setTimeout(()=>{const{onUnhandledError:de}=p.v;if(!de)throw re;de(re)})}},4532:(pt,Re,P)=>{function p(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Re,{z:()=>p})},655:(pt,Re,P)=>{function re(Q,ee){var se={};for(var ne in Q)Object.prototype.hasOwnProperty.call(Q,ne)&&ee.indexOf(ne)<0&&(se[ne]=Q[ne]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ne=Object.getOwnPropertySymbols(Q);He<ne.length;He++)ee.indexOf(ne[He])<0&&Object.prototype.propertyIsEnumerable.call(Q,ne[He])&&(se[ne[He]]=Q[ne[He]])}return se}function ge(Q,ee,se,ne){return new(se||(se=Promise))(function(Ue,ft){function Yt(un){try{ze(ne.next(un))}catch(Rn){ft(Rn)}}function Rt(un){try{ze(ne.throw(un))}catch(Rn){ft(Rn)}}function ze(un){un.done?Ue(un.value):function He(Ue){return Ue instanceof se?Ue:new se(function(ft){ft(Ue)})}(un.value).then(Yt,Rt)}ze((ne=ne.apply(Q,ee||[])).next())})}function ye(Q){return this instanceof ye?(this.v=Q,this):new ye(Q)}function le(Q,ee,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ne=se.apply(Q,ee||[]),Ue=[];return He={},ft("next"),ft("throw"),ft("return"),He[Symbol.asyncIterator]=function(){return this},He;function ft(ln){ne[ln]&&(He[ln]=function(nn){return new Promise(function(qn,Et){Ue.push([ln,nn,qn,Et])>1||Yt(ln,nn)})})}function Yt(ln,nn){try{!function Rt(ln){ln.value instanceof ye?Promise.resolve(ln.value.v).then(ze,un):Rn(Ue[0][2],ln)}(ne[ln](nn))}catch(qn){Rn(Ue[0][3],qn)}}function ze(ln){Yt("next",ln)}function un(ln){Yt("throw",ln)}function Rn(ln,nn){ln(nn),Ue.shift(),Ue.length&&Yt(Ue[0][0],Ue[0][1])}}function rt(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function J(Q){var ee="function"==typeof Symbol&&Symbol.iterator,se=ee&&Q[ee],ne=0;if(se)return se.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&ne>=Q.length&&(Q=void 0),{value:Q&&Q[ne++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),se={},ne("next"),ne("throw"),ne("return"),se[Symbol.asyncIterator]=function(){return this},se);function ne(Ue){se[Ue]=Q[Ue]&&function(ft){return new Promise(function(Yt,Rt){!function He(Ue,ft,Yt,Rt){Promise.resolve(Rt).then(function(ze){Ue({value:ze,done:Yt})},ft)}(Yt,Rt,(ft=Q[Ue](ft)).done,ft.value)})}}}P.d(Re,{FC:()=>le,KL:()=>rt,_T:()=>re,mG:()=>ge,qq:()=>ye})},4650:(pt,Re,P)=>{P.d(Re,{$8M:()=>Ac,$Z:()=>wu,AFp:()=>sb,AaK:()=>ge,AsE:()=>xv,CHM:()=>Pt,CRH:()=>gw,CZH:()=>Fm,CqO:()=>DI,D6c:()=>Rb,EJc:()=>dx,EpF:()=>bI,F4k:()=>Td,FYo:()=>Z,FiY:()=>cr,G48:()=>vb,GfV:()=>St,Gpc:()=>z,JOm:()=>Yo,KtG:()=>rs,LFG:()=>Fn,LSH:()=>cu,Lbi:()=>ab,Lck:()=>gA,MAs:()=>CI,MMx:()=>ow,NdJ:()=>mv,O4$:()=>$p,OlP:()=>xn,Oqu:()=>Av,PXZ:()=>qO,Q6J:()=>fv,QGY:()=>gv,QP$:()=>Ke,Qsj:()=>ce,R0b:()=>hs,RDi:()=>ig,Rgc:()=>Kf,SBq:()=>E,Sil:()=>fx,Suo:()=>pw,TTD:()=>Is,TgZ:()=>Cd,X6Q:()=>_b,XFs:()=>Ye,Xpm:()=>Ae,Xts:()=>Qh,Y36:()=>Ri,YKP:()=>pA,YNc:()=>hv,Yjl:()=>G,Yz7:()=>nn,Z0I:()=>$r,ZZ4:()=>Sb,_Bn:()=>iw,_UZ:()=>Dd,_Vd:()=>_,_c5:()=>Mb,_uU:()=>UI,aQg:()=>ey,c2e:()=>lb,cJS:()=>Et,cg1:()=>Ql,dDg:()=>_x,dqk:()=>Nt,eFA:()=>Ix,ekj:()=>Rf,eoX:()=>Dw,f3M:()=>ei,g9A:()=>Lm,h0i:()=>Fs,hGG:()=>ty,hij:()=>Of,iGM:()=>PC,ifc:()=>at,ip1:()=>ib,jDz:()=>Ud,kL8:()=>gm,kcU:()=>Gp,lG2:()=>N,lqb:()=>ao,lri:()=>pb,n5z:()=>Ys,oAB:()=>Ot,oxw:()=>am,q4F:()=>wt,qLn:()=>bg,qOj:()=>po,qZA:()=>bd,rWj:()=>bw,s9C:()=>ql,sBO:()=>Tx,sIi:()=>md,s_b:()=>Mm,soG:()=>Vm,tb:()=>ub,tp0:()=>Uo,uIk:()=>Wl,vHH:()=>be,vpe:()=>Eo,wAp:()=>xt,xp6:()=>P_,z2F:()=>zd,zSh:()=>oo,zs3:()=>id});var p=P(7579),X=P(727),L=P(9751),re=P(6451),de=P(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=fe({__forward_ref__:fe});function z(s){return s.__forward_ref__=z,s.toString=function(){return ge(this())},s}function J(s){return Oe(s)?s():s}function Oe(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===z}class be extends Error{constructor(o,u){super(function Ze(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s,o){throw new be(-201,!1)}function Rt(s,o){null==s&&function ze(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Et(s){return{providers:s.providers||[],imports:s.imports||[]}}function jt(s){return bi(s,Jn)||bi(s,Xn)}function $r(s){return null!==jt(s)}function bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Gr(s){return s&&(s.hasOwnProperty(Nr)||s.hasOwnProperty(Di))?s[Nr]:null}const Jn=fe({\u0275prov:fe}),Nr=fe({\u0275inj:fe}),Xn=fe({ngInjectableDef:fe}),Di=fe({ngInjectorDef:fe});var Ye=(()=>((Ye=Ye||{})[Ye.Default=0]="Default",Ye[Ye.Host=1]="Host",Ye[Ye.Self=2]="Self",Ye[Ye.SkipSelf=4]="SkipSelf",Ye[Ye.Optional=8]="Optional",Ye))();let In;function An(s){const o=In;return In=s,o}function Or(s,o,u){const c=jt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Ye.Optional?null:void 0!==o?o:void we(ge(s))}function Dn(s){return{toString:s}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),at=(()=>{return(s=at||(at={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",at;var s})();const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),or={},Tt=[],Wr=fe({\u0275cmp:fe}),Kt=fe({\u0275dir:fe}),mr=fe({\u0275pipe:fe}),Qt=fe({\u0275mod:fe}),Bn=fe({\u0275fac:fe}),Er=fe({__NG_ELEMENT_ID__:fe});let Je=0;function Ae(s){return Dn(()=>{const u=!0===s.standalone,c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Tt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||at.Emulated,id:"c"+Je++,styles:s.styles||Tt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return d.inputs=B(s.inputs,c),d.outputs=B(s.outputs),v&&v.forEach(I=>I(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(bt).filter(Dt):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ie).filter(Dt):null,d})}function bt(s){return U(s)||ie(s)}function Dt(s){return null!==s}function Ot(s){return Dn(()=>({type:s.type,bootstrap:s.bootstrap||Tt,declarations:s.declarations||Tt,imports:s.imports||Tt,exports:s.exports||Tt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,o){if(null==s)return or;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const N=Ae;function G(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function U(s){return s[Wr]||null}function ie(s){return s[Kt]||null}function Ie(s){return s[mr]||null}function Ke(s){const o=U(s)||ie(s)||Ie(s);return null!==o&&o.standalone}function ot(s,o){const u=s[Qt]||null;if(!u&&!0===o)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return u}function Pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function vr(s){return Array.isArray(s)&&!0===s[1]}function To(s){return 0!=(8&s.flags)}function vs(s){return 2==(2&s.flags)}function Ba(s){return 1==(1&s.flags)}function qr(s){return null!==s.template}function cc(s){return 0!=(256&s[2])}function ji(s,o){return s.hasOwnProperty(Bn)?s[Bn]:null}class Es{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Is(){return Hs}function Hs(s){return s.type.prototype.ngOnChanges&&(s.setInput=Wa),Ga}function Ga(){const s=Xu(this),o=s?.current;if(o){const u=s.previous;if(u===or)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Wa(s,o,u,c){const d=Xu(s)||function Cs(s,o){return s[Ju]=o}(s,{previous:or,current:null}),g=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[u],C=v[I];g[I]=new Es(C&&C.currentValue,o,v===or),s[c]=o}Is.ngInherit=!0;const Ju="__ngSimpleChanges__";function Xu(s){return s[Ju]||null}function Hn(s){for(;Array.isArray(s);)s=s[0];return s}function $s(s,o){return Hn(o[s])}function ci(s,o){return Hn(o[s.index])}function di(s,o){return s.data[o]}function Zt(s,o){const u=o[s];return Pr(u)?u:u[0]}function vc(s){return 4==(4&s[2])}function Ro(s){return 64==(64&s[2])}function ns(s,o){return null==o?null:s[o]}function Ka(s){s[18]=0}function ua(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const R={lFrame:Uy(null),bindingsEnabled:!0};function ct(){return R.bindingsEnabled}function Te(){return R.lFrame.lView}function _t(){return R.lFrame.tView}function Pt(s){return R.lFrame.contextLView=s,s[8]}function rs(s){return R.lFrame.contextLView=null,s}function On(){let s=la();for(;null!==s&&64===s.type;)s=s.parent;return s}function la(){return R.lFrame.currentTNode}function Fr(s,o){const u=R.lFrame;u.currentTNode=s,u.isParent=o}function Za(){return R.lFrame.isParent}function da(){return R.lFrame.bindingIndex++}function No(s){const o=R.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Y0(s,o){const u=R.lFrame;u.bindingIndex=u.bindingRootIndex=s,Bp(o)}function Bp(s){R.lFrame.currentDirectiveIndex=s}function Ly(){return R.lFrame.currentQueryIndex}function nl(s){R.lFrame.currentQueryIndex=s}function Vy(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ih(s,o,u){if(u&Ye.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&Ye.Host||(d=Vy(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=R.lFrame=Ch();return c.currentTNode=o,c.lView=s,!0}function jp(s){const o=Ch(),u=s[1];R.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Ch(){const s=R.lFrame,o=null===s?null:s.child;return null===o?Uy(s):o}function Uy(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function bh(){const s=R.lFrame;return R.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Hp=bh;function rl(){const s=bh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Ir(){return R.lFrame.selectedIndex}function Ai(s){R.lFrame.selectedIndex=s}function kn(){const s=R.lFrame;return di(s.tView,s.selectedIndex)}function $p(){R.lFrame.currentNamespace="svg"}function Gp(){!function jy(){R.lFrame.currentNamespace=null}()}function il(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:A}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),T&&((s.viewHooks||(s.viewHooks=[])).push(u,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,T)),null!=A&&(s.destroyHooks||(s.destroyHooks=[])).push(u,A)}}function sl(s,o,u){Ah(s,o,3,u)}function ha(s,o,u,c){(3&s[2])===u&&Ah(s,o,u,c)}function Sh(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Ah(s,o,u,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&s[18]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(s[18]+=65536),(I<g||-1==g)&&(Wp(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Wp(s,o,u,c){const d=u[c]<0,g=u[c+1],I=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class Po{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Qa(s,o,u){let c=0;for(;c<u.length;){const d=u[c];if("number"==typeof d){if(0!==d)break;c++;const g=u[c++],v=u[c++],I=u[c++];s.setAttribute(o,v,I,g)}else{const g=d,v=u[++c];Cc(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),c++}}return c}function al(s){return 3===s||4===s||6===s}function Cc(s){return 64===s.charCodeAt(0)}function ul(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||qp(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function qp(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function Kp(s){return-1!==s}function ll(s){return 32767&s}function dl(s,o){let u=function cl(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Ds=!0;function bc(s){const o=Ds;return Ds=s,o}let ur=0;const Zs={};function fl(s,o){const u=Dc(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,pl(c.data,s),pl(o,null),pl(c.blueprint,null));const d=Tc(s,o),g=s.injectorIndex;if(Kp(d)){const v=ll(d),I=dl(d,o),C=I[1].data;for(let T=0;T<8;T++)o[g+T]=I[v+T]|C[v+T]}return o[g+8]=d,g}function pl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Dc(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Tc(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){if(c=Sc(d),null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Ja(s,o,u){!function Rh(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Er)&&(c=u[Er]),null==c&&(c=u[Er]=ur++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Xa(s,o,u){if(u&Ye.Optional)return s;we()}function Nh(s,o,u,c){if(u&Ye.Optional&&void 0===c&&(c=null),0==(u&(Ye.Self|Ye.Host))){const d=s[9],g=An(void 0);try{return d?d.get(o,c,u&Ye.Optional):Or(o,c,u&Ye.Optional)}finally{An(g)}}return Xa(c,0,u)}function gl(s,o,u,c=Ye.Default,d){if(null!==s){if(1024&o[2]){const v=function nu(s,o,u,c,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=ml(g,v,u,c|Ye.Self,Zs);if(I!==Zs)return I;let C=g.parent;if(!C){const T=v[21];if(T){const A=T.get(u,Zs,c);if(A!==Zs)return A}C=Sc(v),v=v[15]}g=C}return d}(s,o,u,c,Zs);if(v!==Zs)return v}const g=ml(s,o,u,c,Zs);if(g!==Zs)return g}return Nh(o,u,c,d)}function ml(s,o,u,c,d){const g=function Oh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Er)?s[Er]:void 0;return"number"==typeof o?o>=0?255&o:Jp:o}(u);if("function"==typeof g){if(!Ih(o,s,c))return c&Ye.Host?Xa(d,0,c):Nh(o,u,c,d);try{const v=g(c);if(null!=v||c&Ye.Optional)return v;we()}finally{Hp()}}else if("number"==typeof g){let v=null,I=Dc(s,o),C=-1,T=c&Ye.Host?o[16][6]:null;for((-1===I||c&Ye.SkipSelf)&&(C=-1===I?Tc(s,o):o[I+8],-1!==C&&Ph(c,!1)?(v=o[1],I=ll(C),o=dl(C,o)):I=-1);-1!==I;){const A=o[1];if(Qp(g,I,A.data)){const F=Q0(I,o,u,v,c,T);if(F!==Zs)return F}C=o[I+8],-1!==C&&Ph(c,o[1].data[I+8]===T)&&Qp(g,I,o)?(v=A,I=ll(C),o=dl(C,o)):I=-1}}return d}function Q0(s,o,u,c,d,g){const v=o[1],I=v.data[s+8],A=eu(I,v,u,null==c?vs(I)&&Ds:c!=v&&0!=(3&I.type),d&Ye.Host&&g===I);return null!==A?pa(o,v,A,I):Zs}function eu(s,o,u,c,d){const g=s.providerIndexes,v=o.data,I=1048575&g,C=s.directiveStart,A=g>>20,q=d?I+A:s.directiveEnd;for(let te=c?I:I+A;te<q;te++){const Se=v[te];if(te<C&&u===Se||te>=C&&Se.type===u)return te}if(d){const te=v[C];if(te&&qr(te)&&te.type===u)return C}return null}function pa(s,o,u,c){let d=s[u];const g=o.data;if(function fa(s){return s instanceof Po}(d)){const v=d;v.resolving&&function lt(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new be(-200,`Circular dependency in DI detected for ${s}${u}`)}(function le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(g[u]));const I=bc(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?An(v.injectImpl):null;Ih(s,c,Ye.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Th(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=Hs(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==C&&An(C),bc(I),v.resolving=!1,Hp()}}return d}function Qp(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Ph(s,o){return!(s&Ye.Self||s&Ye.Host&&o)}class tu{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return gl(this._tNode,this._lView,o,c,u)}}function Jp(){return new tu(On(),Te())}function Ys(s){return Dn(()=>{const o=s.prototype.constructor,u=o[Bn]||Xp(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[Bn]||Xp(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Xp(s){return Oe(s)?()=>{const o=Xp(J(s));return o&&o()}:ji(s)}function Sc(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Ac(s){return function Yp(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(al(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(On(),s)}const ga="__parameters__";function vl(s,o,u){return Dn(()=>{const c=function Fh(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,T,A){const F=C.hasOwnProperty(ga)?C[ga]:Object.defineProperty(C,ga,{value:[]})[ga];for(;F.length<=A;)F.push(null);return(F[A]=F[A]||[]).push(v),C}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class xn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=nn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $n(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),$n(c,o)):o!==s&&o.push(c)}return o}function ss(s,o){s.forEach(u=>Array.isArray(u)?ss(u,o):o(u))}function wl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Zr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function it(s,o,u){let c=iu(s,o);return c>=0?s[1|c]=u:(c=~c,function Vh(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Uh(s,o){const u=iu(s,o);if(u>=0)return s[1|u]}function iu(s,o){return function Rc(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const Ts={},jh="__NG_DI_FLAG__",su="ngTempTokenPath",Js=/\n/gm,br="__source";let Xs;function Lo(s){const o=Xs;return Xs=s,o}function lr(s,o=Ye.Default){if(void 0===Xs)throw new be(-203,!1);return null===Xs?Or(s,void 0,o):Xs.get(s,o&Ye.Optional?null:void 0,o)}function Fn(s,o=Ye.Default){return(function li(){return In}()||lr)(J(s),o)}function ei(s,o=Ye.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Fn(s,o)}function Lr(s){const o=[];for(let u=0;u<s.length;u++){const c=J(s[u]);if(Array.isArray(c)){if(0===c.length)throw new be(900,!1);let d,g=Ye.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Fc(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(Fn(d,g))}else o.push(Fn(c))}return o}function Vo(s,o){return s[jh]=o,s.prototype[jh]=o,s}function Fc(s){return s[jh]}const cr=Vo(vl("Optional"),8),Uo=Vo(vl("SkipSelf"),4);let zh;function ig(s){zh=s}class Hc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Wi(s){return s instanceof Hc?s.changingThisBreaksApplicationSecurity:s}const wa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function cu(s){const o=function Rl(){const s=Te();return s&&s[12]}();return o?o.sanitize(tr.URL,s)||"":function Ho(s,o){const u=function Kh(s){return s instanceof Hc&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Wi(s):function au(s){return(s=String(s)).match(wa)?s:"unsafe:"+s}(ye(s))}const Qh=new xn("ENVIRONMENT_INITIALIZER"),yg=new xn("INJECTOR",-1),Jh=new xn("INJECTOR_DEF_TYPES");class Kc{get(o,u=Ts){if(u===Ts){const c=new Error(`NullInjectorError: No provider for ${ge(o)}!`);throw c.name="NullInjectorError",c}return u}}function Xh(...s){return{\u0275providers:Zc(0,s)}}function Zc(s,...o){const u=[],c=new Set;let d;return ss(o,g=>{const v=g;du(v,u,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&_g(d,u),u}function _g(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];ss(d,g=>{o.push(g)})}}function du(s,o,u,c){if(!(s=J(s)))return!1;let d=null,g=Gr(s);const v=!g&&U(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const C=s.ngModule;if(g=Gr(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of C)du(T,o,u,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let T;c.add(d);try{ss(g.imports,A=>{du(A,o,u,c)&&(T||(T=[]),T.push(A))})}finally{}void 0!==T&&_g(T,o)}if(!I){const T=ji(d)||(()=>new d);o.push({provide:d,useFactory:T,deps:Tt},{provide:Jh,useValue:d,multi:!0},{provide:Qh,useValue:()=>Fn(d),multi:!0})}const C=g.providers;null==C||I||ss(C,A=>{o.push(A)})}}return d!==s&&void 0!==s.providers}const ti=fe({provide:String,useValue:fe});function ni(s){return null!==s&&"object"==typeof s&&ti in s}function Ms(s){return"function"==typeof s}const oo=new xn("Set Injector scope."),hu={},a_={};let Mi;function fu(){return void 0===Mi&&(Mi=new Kc),Mi}class ao{}class nf extends ao{constructor(o,u,c,d){super(),this.parent=u,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ol(o,v=>this.processProvider(v)),this.records.set(yg,qo(void 0,this)),d.has("environment")&&this.records.set(ao,qo(void 0,this));const g=this.records.get(oo);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Jh.multi,Tt,Ye.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Lo(this),c=An(void 0);try{return o()}finally{Lo(u),An(c)}}get(o,u=Ts,c=Ye.Default){this.assertNotDestroyed();const d=Lo(this),g=An(void 0);try{if(!(c&Ye.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function pu(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(o)&&jt(o);I=C&&this.injectableDefInScope(C)?qo(Nl(o),hu):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&Ye.Self?fu():this.parent).get(o,u=c&Ye.Optional&&u===Ts?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[su]=v[su]||[]).unshift(ge(o)),d)throw v;return function Ky(s,o,u,c){const d=s[su];throw o[br]&&d.unshift(o[br]),s.message=function eo(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=ge(o);if(Array.isArray(o))d=o.map(ge).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):ge(I)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Js,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[su]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{An(g),Lo(d)}}resolveInjectorInitializers(){const o=Lo(this),u=An(void 0);try{const c=this.get(Qh.multi,Tt,Ye.Self);for(const d of c)d()}finally{Lo(o),An(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(ge(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(o){let u=Ms(o=J(o))?o:J(o&&o.provide);const c=function hi(s){return ni(s)?qo(void 0,s.useValue):qo(zo(s),hu)}(o);if(Ms(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=qo(void 0,hu,!0),d.factory=()=>Lr(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===hu&&(u.value=a_,u.value=u.factory()),"object"==typeof u.value&&u.value&&function us(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Nl(s){const o=jt(s),u=null!==o?o.factory:ji(s);if(null!==u)return u;if(s instanceof xn)throw new be(204,!1);if(s instanceof Function)return function Yc(s){const o=s.length;if(o>0)throw function ko(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new be(204,!1);const u=function gr(s){const o=s&&(s[Jn]||s[Xn]);if(o){const u=function bn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new be(204,!1)}function zo(s,o,u){let c;if(Ms(s)){const d=J(s);return ji(d)||Nl(d)}if(ni(s))c=()=>J(s.useValue);else if(function ef(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Lr(s.deps||[]));else if(function Wo(s){return!(!s||!s.useExisting)}(s))c=()=>Fn(J(s.useExisting));else{const d=J(s&&(s.useClass||s.provide));if(!function u_(s){return!!s.deps}(s))return ji(d)||Nl(d);c=()=>new d(...Lr(s.deps))}return c}function qo(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function rf(s){return!!s.\u0275providers}function Ol(s,o){for(const u of s)Array.isArray(u)?Ol(u,o):rf(u)?Ol(u.\u0275providers,o):o(u)}class Qc{}class l_{resolveComponentFactory(o){throw function Pl(s){const o=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let _=(()=>{class s{}return s.NULL=new l_,s})();function f(){return m(On(),Te())}function m(s,o){return new E(ci(s,o))}let E=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=f,s})();function S(s){return s instanceof E?s.nativeElement:s}class Z{}let ce=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function We(){const s=Te(),u=Zt(On().index,s);return(Pr(u)?u:s)[11]}(),s})(),st=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class St{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const wt=new St("14.2.0"),gn={};function p_(s){return s.ngOriginalError}class bg{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&p_(o);for(;u&&p_(u);)u=p_(u);return u||null}}const m_=new Map;let _T=0;const Xc="__ngContext__";function fi(s,o){Pr(o)?(s[Xc]=o[20],function wT(s){m_.set(s[20],s)}(o)):s[Xc]=o}function sf(s){const o=s[Xc];return"number"==typeof o?function hE(s){return m_.get(s)||null}(o):o||null}function y_(s){const o=sf(s);return o?Pr(o)?o:o.lView:null}function ba(s){return s instanceof Function?s():s}var Yo=(()=>((Yo=Yo||{})[Yo.Important=1]="Important",Yo[Yo.DashCase=2]="DashCase",Yo))();function Rg(s,o){return undefined(s,o)}function td(s){const o=s[3];return vr(o)?o[3]:o}function I_(s){return wE(s[13])}function C_(s){return wE(s[4])}function wE(s){for(;null!==s&&!vr(s);)s=s[4];return s}function nd(s,o,u,c,d){if(null!=c){let g,v=!1;vr(c)?g=c:Pr(c)&&(v=!0,c=c[0]);const I=Hn(c);0===s&&null!==u?null==d?CE(o,u,I):Vl(o,u,I,d||null,!0):1===s&&null!==u?Vl(o,u,I,d||null,!0):2===s?function Lg(s,o,u){const c=Dr(s,o);c&&function PT(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=g&&function rd(s,o,u,c,d){const g=u[7];g!==Hn(u)&&nd(o,s,c,g,d);for(let I=10;I<u.length;I++){const C=u[I];yu(C[1],C,s,o,c,g)}}(o,s,g,u,d)}}function Ng(s,o,u){return s.createElement(o,u)}function lf(s,o){const u=s[9],c=u.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,ua(d,-1)),u.splice(c,1)}function Og(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&lf(d,c),o>0&&(s[u-1][4]=c[4]);const g=Zr(s,10+o);!function EE(s,o){yu(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Pg(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&yu(s,o,u,3,null,null),function xT(s){let o=s[13];if(!o)return cf(s[1],s);for(;o;){let u=null;if(Pr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Pr(o)&&cf(o[1],o),o=o[3];null===o&&(o=s),Pr(o)&&cf(o[1],o),u=o&&o[4]}o=u}}(o)}}function cf(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function OT(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Po)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];try{C.call(I)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function NT(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],I="function"==typeof v?v(o):Hn(o[v]),C=c[d=u[g+2]],T=u[g+3];"boolean"==typeof T?I.removeEventListener(u[g],C,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&vr(o[3])){u!==o[3]&&lf(u,o);const c=o[19];null!==c&&c.detachView(s)}!function fE(s){m_.delete(s[20])}(o)}}function df(s,o,u){return function IE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===at.None||d===at.Emulated)return null}return ci(c,u)}(s,o.parent,u)}function Vl(s,o,u,c,d){s.insertBefore(o,u,c,d)}function CE(s,o,u){s.appendChild(o,u)}function bE(s,o,u,c,d){null!==c?Vl(s,o,u,c,d):CE(s,o,u)}function Dr(s,o){return s.parentNode(o)}let Fg=function kg(s,o,u){return 40&s.type?ci(s,u):null};function hf(s,o,u,c){const d=df(s,c,o),g=o[11],I=function S_(s,o,u){return Fg(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let C=0;C<u.length;C++)bE(g,d,u[C],I,!1);else bE(g,d,u,I,!1)}function x_(s,o){if(null!==o){const u=o.type;if(3&u)return ci(o,s);if(4&u)return M_(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return x_(s,c);{const d=s[o.index];return vr(d)?M_(-1,d):Hn(d)}}if(32&u)return Rg(o,s)()||Hn(s[o.index]);{const c=LT(s,o);return null!==c?Array.isArray(c)?c[0]:x_(td(s[16]),c):x_(s,o.next)}}return null}function LT(s,o){return null!==o?s[16][6].projection[o.projection]:null}function M_(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return x_(c,d)}return o[7]}function Vg(s,o,u,c,d,g,v){for(;null!=u;){const I=c[u.index],C=u.type;if(v&&0===o&&(I&&fi(Hn(I),c),u.flags|=4),64!=(64&u.flags))if(8&C)Vg(s,o,u.child,c,d,g,!1),nd(o,s,d,I,g);else if(32&C){const T=Rg(u,c);let A;for(;A=T();)nd(o,s,d,A,g);nd(o,s,d,I,g)}else 16&C?R_(s,o,c,u,d,g):nd(o,s,d,I,g);u=v?u.projectionNext:u.next}}function yu(s,o,u,c,d,g){Vg(u,c,s.firstChild,o,d,g,!1)}function R_(s,o,u,c,d,g){const v=u[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)nd(o,s,d,C[T],g);else Vg(s,o,C,v[3],d,g,!0)}function VT(s,o,u){s.setAttribute(o,"style",u)}function Ug(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function O_(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const SE="ng-template";function UT(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==O_(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function AE(s){return 4===s.type&&s.value!==SE}function xE(s,o,u){return o===(4!==s.type||u?s.value:SE)}function BT(s,o,u){let c=4;const d=s.attrs||[],g=function HT(s){for(let o=0;o<s.length;o++)if(al(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!xE(s,C,u)||""===C&&1===o.length){if(Qo(c))return!1;v=!0}}else{const T=8&c?C:o[++I];if(8&c&&null!==s.attrs){if(!UT(s.attrs,T,u)){if(Qo(c))return!1;v=!0}continue}const F=Bg(8&c?"class":C,d,AE(s),u);if(-1===F){if(Qo(c))return!1;v=!0;continue}if(""!==T){let q;q=F>g?"":d[F+1].toLowerCase();const te=8&c?q:null;if(te&&-1!==O_(te,T,0)||2&c&&T!==q){if(Qo(c))return!1;v=!0}}}}else{if(!v&&!Qo(c)&&!Qo(C))return!1;if(v&&Qo(C))continue;v=!1,c=C|1&c}}return Qo(c)||v}function Qo(s){return 0==(1&s)}function Bg(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function $T(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function jT(s,o,u=!1){for(let c=0;c<o.length;c++)if(BT(s,o[c],u))return!0;return!1}function NE(s,o){return s?":not("+o.trim()+")":o}function GT(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Qo(v)&&(o+=NE(g,d),d=""),c=v,g=g||!Qo(c);u++}return""!==d&&(o+=NE(g,d)),o}const $t={};function P_(s){OE(_t(),Te(),Ir()+s,!1)}function OE(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&sl(o,g,u)}else{const g=s.preOrderHooks;null!==g&&ha(o,g,0,u)}Ai(u)}function Gn(s,o=null,u=null,c){const d=pi(s,o,u,c);return d.resolveInjectorInitializers(),d}function pi(s,o=null,u=null,c,d=new Set){const g=[u||Tt,Xh(s)];return c=c||("object"==typeof s?void 0:ge(s)),new nf(g,o||fu(),c||null,d)}let id=(()=>{class s{static create(u,c){if(Array.isArray(u))return Gn({name:""},c,u,"");{const d=u.name??"";return Gn({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=Ts,s.NULL=new Kc,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>Fn(yg)}),s.__NG_ELEMENT_ID__=-1,s})();function Ri(s,o=Ye.Default){const u=Te();return null===u?Fn(s,o):gl(On(),u,J(s),o)}function wu(){throw new Error("invalid")}function Eu(s,o){return s<<17|o<<2}function ls(s){return s>>17&32767}function $g(s){return 2|s}function Da(s){return(131068&s)>>2}function U_(s,o){return-131069&s|o<<2}function B_(s){return 1|s}function iI(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];nl(d),v.contentQueries(2,o[g],g)}}}function ho(s,o,u,c,d,g,v,I,C,T,A){const F=o.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==A||s&&1024&s[2])&&(F[2]|=1024),Ka(F),F[3]=F[15]=s,F[8]=u,F[10]=v||s&&s[10],F[11]=I||s&&s[11],F[12]=C||s&&s[12]||null,F[9]=T||s&&s[9]||null,F[6]=g,F[20]=function vT(){return _T++}(),F[21]=A,F[16]=2==o.type?s[16]:F,F}function bu(s,o,u,c,d){let g=s.data[o];if(null===g)g=function Z_(s,o,u,c,d){const g=la(),v=Za(),C=s.data[o]=function uI(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,o,u,c,d),function Z0(){return R.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function Hi(){const s=R.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Fr(g,!0),g}function ld(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function jl(s,o,u){jp(o);try{const c=s.viewQuery;null!==c&&cd(1,c,u);const d=s.template;null!==d&&oI(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&iI(s,o),s.staticViewQueries&&cd(2,s.viewQuery,u);const g=s.components;null!==g&&function aS(s,o){for(let u=0;u<o.length;u++)fS(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,rl()}}function Xo(s,o,u,c){const d=o[2];if(128!=(128&d)){jp(o);try{Ka(o),function wh(s){return R.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&oI(s,o,u,2,c);const v=3==(3&d);if(v){const T=s.preOrderCheckHooks;null!==T&&sl(o,T,null)}else{const T=s.preOrderHooks;null!==T&&ha(o,T,0,null),Sh(o,0)}if(function Hl(s){for(let o=I_(s);null!==o;o=C_(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],g=d[3];0==(512&d[2])&&ua(g,1),d[2]|=512}}}(o),function pI(s){for(let o=I_(s);null!==o;o=C_(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];Ro(c)&&Xo(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&iI(s,o),v){const T=s.contentCheckHooks;null!==T&&sl(o,T)}else{const T=s.contentHooks;null!==T&&ha(o,T,1),Sh(o,1)}!function rI(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Ai(~d);else{const g=d,v=u[++c],I=u[++c];Y0(v,g),I(2,o[g])}}}finally{Ai(-1)}}(s,o);const I=s.components;null!==I&&function oS(s,o){for(let u=0;u<o.length;u++)iv(s,o[u])}(o,I);const C=s.viewQuery;if(null!==C&&cd(2,C,c),v){const T=s.viewCheckHooks;null!==T&&sl(o,T)}else{const T=s.viewHooks;null!==T&&ha(o,T,2),Sh(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ua(o[3],-1))}finally{rl()}}}function sI(s,o,u,c){const d=o[10],v=vc(o);try{!v&&d.begin&&d.begin(),v&&jl(s,o,c),Xo(s,o,u,c)}finally{!v&&d.end&&d.end()}}function oI(s,o,u,c,d){const g=Ir(),v=2&c;try{Ai(-1),v&&o.length>22&&OE(s,o,22,!1),u(c,d)}finally{Ai(g)}}function Y_(s,o,u){!ct()||(function sn(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||fl(u,o),fi(c,o);const v=u.initialInputs;for(let I=d;I<g;I++){const C=s.data[I],T=qr(C);T&&Ni(o,u,C);const A=pa(o,s,I,u);fi(A,o),null!==v&&Rs(0,I-d,A,C,0,v),T&&(Zt(u.index,o)[8]=A)}}(s,o,u,ci(u,o)),128==(128&u.flags)&&function Du(s,o,u){const c=u.directiveStart,d=u.directiveEnd,g=u.index,v=function Up(){return R.lFrame.currentDirectiveIndex}();try{Ai(g);for(let I=c;I<d;I++){const C=s.data[I],T=o[I];Bp(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Mn(C,T)}}finally{Ai(-1),Bp(v)}}(s,o,u))}function Q_(s,o,u=ci){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function Yg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Qg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Qg(s,o,u,c,d,g,v,I,C,T){const A=22+c,F=A+d,q=function uS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(A,F),te="function"==typeof T?T():T;return q[1]={type:s,blueprint:q,template:u,queries:null,viewQuery:I,declTNode:o,data:q.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function J_(s,o,u,c){const d=fo(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&_f(s).push(c,d.length-1))}function X_(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function ev(s,o){const c=o.directiveEnd,d=s.data,g=o.attrs,v=[];let I=null,C=null;for(let T=o.directiveStart;T<c;T++){const A=d[T],F=A.inputs,q=null===g||AE(o)?null:hS(F,g);v.push(q),I=X_(F,T,I),C=X_(A.outputs,T,C)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=C}function Ki(s,o,u,c,d,g,v,I){const C=ci(o,u);let A,T=o.inputs;!I&&null!=T&&(A=T[c])?(gi(s,u,A,c,d),vs(o)&&tv(u,o.index)):3&o.type&&(c=function dS(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}function tv(s,o){const u=Zt(o,s);16&u[2]||(u[2]|=32)}function Jg(s,o,u,c){let d=!1;if(ct()){const g=function rv(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];jT(u,v.selectors,!1)&&(d||(d=[]),Ja(fl(u,o),s,v.type),qr(v)?(dI(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==g){d=!0,Wn(u,s.data.length,g.length);for(let A=0;A<g.length;A++){const F=g[A];F.providersResolver&&F.providersResolver(F)}let I=!1,C=!1,T=ld(s,o,g.length,null);for(let A=0;A<g.length;A++){const F=g[A];u.mergedAttrs=ul(u.mergedAttrs,F.hostAttrs),en(s,u,o,T,F),hI(T,F,v),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const q=F.type.prototype;!I&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),I=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),T++}ev(s,u)}v&&function mf(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new be(-301,!1);c.push(o[d],g)}}}(u,c,v)}return u.mergedAttrs=ul(u.mergedAttrs,u.attrs),d}function Cn(s,o,u,c,d,g){const v=g.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const C=~o.index;(function vn(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(I)!=C&&I.push(C),I.push(c,d,v)}}function Mn(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function dI(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function hI(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;qr(o)&&(u[""]=s)}}function Wn(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function en(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=ji(d.type)),v=new Po(g,qr(d),Ri);s.blueprint[c]=v,u[c]=v,Cn(s,o,0,c,ld(s,u,d.hostVars,$t),d)}function Ni(s,o,u){const c=ci(o,s),d=Yg(u),g=s[10],v=Xg(s,ho(s,d,null,u.onPush?32:16,c,o,g,g.createRenderer(c,u),null,null,null));s[o.index]=v}function ea(s,o,u,c,d,g){const v=ci(s,o);!function yf(s,o,u,c,d,g,v){if(null==g)s.removeAttribute(o,d,u);else{const I=null==v?ye(g):v(g,c||"",d);s.setAttribute(o,d,I,u)}}(o[11],v,g,s.value,u,c,d)}function Rs(s,o,u,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const T=v[C++],A=v[C++],F=v[C++];null!==I?c.setInput(u,F,T,A):u[A]=F}}}function hS(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function fI(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function iv(s,o){const u=Zt(o,s);if(Ro(u)){const c=u[1];48&u[2]?Xo(c,u,c.template,u[8]):u[5]>0&&$l(u)}}function $l(s){for(let c=I_(s);null!==c;c=C_(c))for(let d=10;d<c.length;d++){const g=c[d];if(Ro(g))if(512&g[2]){const v=g[1];Xo(v,g,v.template,g[8])}else g[5]>0&&$l(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Zt(u[c],s);Ro(d)&&d[5]>0&&$l(d)}}function fS(s,o){const u=Zt(o,s),c=u[1];(function gI(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),jl(c,u,u[8])}function Xg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function sv(s){for(;s;){s[2]|=32;const o=td(s);if(cc(s)&&!o)return s;s=o}return null}function cd(s,o,u){nl(0),o(s,u)}function fo(s){return s[7]||(s[7]=[])}function _f(s){return s.cleanup||(s.cleanup=[])}function mI(s,o){const u=s[9],c=u?u.get(bg,null):null;c&&c.handleError(o)}function gi(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],I=u[g++],C=o[v],T=s.data[v];null!==T.setInput?T.setInput(C,d,c,I):C[I]=d}}function Sa(s,o,u){const c=$s(o,s);!function D_(s,o,u){s.setValue(o,u)}(s[11],c,u)}function dd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=he(d,I):2==g&&(c=he(c,I+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}function hd(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(Hn(g)),vr(g))for(let I=10;I<g.length;I++){const C=g[I],T=C[1].firstChild;null!==T&&hd(C[1],C,T,c)}const v=u.type;if(8&v)hd(s,o,u.child,c);else if(32&v){const I=Rg(u,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=LT(o,u);if(Array.isArray(I))c.push(...I);else{const C=td(o[16]);hd(C[1],C,I,c,!0)}}u=d?u.projectionNext:u.next}return c}class vf{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return hd(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(vr(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Og(o,c),Zr(u,c))}this._attachedToViewContainer=!1}Pg(this._lView[1],this._lView)}onDestroy(o){J_(this._lView[1],this._lView,null,o)}markForCheck(){sv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function em(s,o,u){const c=o[10];c.begin&&c.begin();try{Xo(s,o,s.template,u)}catch(d){throw mI(o,d),d}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function AT(s,o){yu(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=o}}class yI extends vf{constructor(o){super(o),this._view=o}detectChanges(){!function Tu(s){!function pS(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=y_(u);if(null!==c){const d=c[1];sI(d,c,d.template,u)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class tm extends _{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=U(o);return new pd(u,this.ngModule)}}function av(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class _I{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const d=this.injector.get(o,gn,c);return d!==gn||u===gn?d:this.parentInjector.get(o,u,c)}}class pd extends Qc{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function WT(s){return s.map(GT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return av(this.componentDef.inputs)}get outputs(){return av(this.componentDef.outputs)}create(o,u,c,d){let g=(d=d||this.ngModule)instanceof ao?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new _I(o,g):o,I=v.get(Z,null);if(null===I)throw new be(407,!1);const C=v.get(st,null),T=I.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",F=c?function cS(s,o,u){return s.selectRootElement(o,u===at.ShadowDom)}(T,c,this.componentDef.encapsulation):Ng(I.createRenderer(null,this.componentDef),A,function fd(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),q=this.componentDef.onPush?288:272,te={components:[]},Se=Qg(0,null,null,1,0,null,null,null,null,null),je=ho(null,Se,te,q,null,null,I,T,C,v,null);let Qe,dt;jp(je);try{const kt=function _S(s,o,u,c,d,g){const v=u[1];u[22]=s;const C=bu(v,22,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(dd(C,T,!0),null!==s&&(Qa(d,s,T),null!==C.classes&&Ug(d,s,C.classes),null!==C.styles&&VT(d,s,C.styles)));const A=c.createRenderer(s,o),F=ho(u,Yg(o),null,o.onPush?32:16,u[22],C,c,A,g||null,null,null);return v.firstCreatePass&&(Ja(fl(C,u),v,o.type),dI(v,C),Wn(C,u.length,1)),Xg(u,F),u[22]=F}(F,this.componentDef,je,I,T);if(F)if(c)Qa(T,F,["ng-version",wt.full]);else{const{attrs:ke,classes:At}=function zT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!Qo(d))break;d=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);ke&&Qa(T,F,ke),At&&At.length>0&&Ug(T,F,At.join(" "))}if(dt=di(Se,22),void 0!==u){const ke=dt.projection=[];for(let At=0;At<this.ngContentSelectors.length;At++){const pn=u[At];ke.push(null!=pn?Array.from(pn):null)}}Qe=function vS(s,o,u,c,d){const g=u[1],v=function cI(s,o,u){const c=On();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),en(s,c,o,ld(s,o,1,null),u),ev(s,c));const d=pa(o,s,c.directiveStart,c);fi(d,o);const g=ci(c,o);return g&&fi(g,o),d}(g,u,o);if(c.components.push(v),s[8]=v,null!==d)for(const C of d)C(v,o);if(o.contentQueries){const C=On();o.contentQueries(1,v,C.directiveStart)}const I=On();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ai(I.index),Cn(u[1],I,0,I.directiveStart,I.directiveEnd,o),Mn(o,v)),v}(kt,this.componentDef,je,te,[uv]),jl(Se,je,null)}finally{rl()}return new yS(this.componentType,Qe,m(dt,je),je,dt)}}class yS extends class wg{}{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new yI(d),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;gi(g[1],g,d,o,u),tv(g,this._tNode.index)}}get injector(){return new tu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function uv(){const s=On();il(Te()[1],s)}function po(s){let o=function Gl(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(qr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new be(903,!1);d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=Bt(s.inputs),v.declaredInputs=Bt(s.declaredInputs),v.outputs=Bt(s.outputs);const I=d.hostBindings;I&&ES(s,I);const C=d.viewQuery,T=d.contentQueries;if(C&&wS(s,C),T&&Ef(s,T),oe(s.inputs,d.inputs),oe(s.declaredInputs,d.declaredInputs),oe(s.outputs,d.outputs),qr(d)&&d.data.animation){const A=s.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(s),I===po&&(u=!1)}}o=Object.getPrototypeOf(o)}!function wf(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ul(d.hostAttrs,u=ul(u,d.hostAttrs))}}(c)}function Bt(s){return s===or?{}:s===Tt?[]:s}function wS(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Ef(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function ES(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let gd=null;function Os(){if(!gd){const s=Nt.Symbol;if(s&&s.iterator)gd=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(gd=c)}}}return gd}function md(s){return!!rm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Os()in s)}function rm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Tr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Wl(s,o,u,c){const d=Te();return Tr(d,da(),o)&&(_t(),ea(kn(),d,s,o,u,c)),Wl}function Aa(s,o,u,c){return Tr(s,da(),u)?o+ye(u)+c:$t}function _d(s,o,u,c,d,g){const I=function mo(s,o,u,c){const d=Tr(s,o,u);return Tr(s,o+1,c)||d}(s,function bs(){return R.lFrame.bindingIndex}(),u,d);return No(2),I?o+ye(u)+c+ye(d)+g:$t}function hv(s,o,u,c,d,g,v,I){const C=Te(),T=_t(),A=s+22,F=T.firstCreatePass?function DS(s,o,u,c,d,g,v,I,C){const T=o.consts,A=bu(o,s,4,v||null,ns(T,I));Jg(o,u,A,ns(T,C)),il(o,A);const F=A.tViews=Qg(2,A,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,A),F.queries=o.queries.embeddedTView(A)),A}(A,T,C,o,u,c,d,g,v):T.data[A];Fr(F,!1);const q=C[11].createComment("");hf(T,C,q,F),fi(q,C),Xg(C,C[A]=fI(q,C,q,F)),Ba(F)&&Y_(T,C,F),null!=v&&Q_(C,F,I)}function CI(s){return function Gs(s,o){return s[o]}(function zs(){return R.lFrame.contextLView}(),22+s)}function fv(s,o,u){const c=Te();return Tr(c,da(),o)&&Ki(_t(),kn(),c,s,o,c[11],u,!1),fv}function Yi(s,o,u,c,d){const v=d?"class":"style";gi(s,u,o.inputs[v],v,c)}function Cd(s,o,u,c){const d=Te(),g=_t(),v=22+s,I=d[11],C=d[v]=Ng(I,o,function wc(){return R.lFrame.currentNamespace}()),T=g.firstCreatePass?function pv(s,o,u,c,d,g,v){const I=o.consts,T=bu(o,s,2,d,ns(I,g));return Jg(o,u,T,ns(I,v)),null!==T.attrs&&dd(T,T.attrs,!1),null!==T.mergedAttrs&&dd(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(v,g,d,0,o,u,c):g.data[v];Fr(T,!0);const A=T.mergedAttrs;null!==A&&Qa(I,C,A);const F=T.classes;null!==F&&Ug(I,C,F);const q=T.styles;return null!==q&&VT(I,C,q),64!=(64&T.flags)&&hf(g,d,C,T),0===function ae(){return R.lFrame.elementDepthCount}()&&fi(C,d),function Pe(){R.lFrame.elementDepthCount++}(),Ba(T)&&(Y_(g,d,T),function aI(s,o,u){if(To(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,T,d)),null!==c&&Q_(d,T),Cd}function bd(){let s=On();Za()?function ca(){R.lFrame.isParent=!1}():(s=s.parent,Fr(s,!1));const o=s;!function qe(){R.lFrame.elementDepthCount--}();const u=_t();return u.firstCreatePass&&(il(u,s),To(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Ec(s){return 0!=(16&s.flags)}(o)&&Yi(u,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zp(s){return 0!=(32&s.flags)}(o)&&Yi(u,o,Te(),o.stylesWithoutHost,!1),bd}function Dd(s,o,u,c){return Cd(s,o,u,c),bd(),Dd}function bI(){return Te()}function gv(s){return!!s&&"function"==typeof s.then}function Td(s){return!!s&&"function"==typeof s.subscribe}const DI=Td;function mv(s,o,u,c){const d=Te(),g=_t(),v=On();return function yv(s,o,u,c,d,g,v,I){const C=Ba(c),A=s.firstCreatePass&&_f(s),F=o[8],q=fo(o);let te=!0;if(3&c.type||I){const Qe=ci(c,o),dt=I?I(Qe):Qe,kt=q.length,ke=I?pn=>I(Hn(pn[c.index])):c.index;let At=null;if(!I&&C&&(At=function Sf(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const I=o[7],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==At)(At.__ngLastListenerFn__||At).__ngNextListenerFn__=g,At.__ngLastListenerFn__=g,te=!1;else{g=Mu(c,o,F,g,!1);const pn=u.listen(dt,d,g);q.push(g,pn),A&&A.push(d,ke,kt,kt+1)}}else g=Mu(c,o,F,g,!1);const Se=c.outputs;let je;if(te&&null!==Se&&(je=Se[d])){const Qe=je.length;if(Qe)for(let dt=0;dt<Qe;dt+=2){const Yn=o[je[dt]][je[dt+1]].subscribe(g),Yd=q.length;q.push(g,Yn),A&&A.push(d,c.index,Yd,-(Yd+1))}}}(g,d,d[11],v,s,o,0,c),mv}function Af(s,o,u,c){try{return!1!==u(c)}catch(d){return mI(s,d),!1}}function Mu(s,o,u,c,d){return function g(v){if(v===Function)return c;sv(2&s.flags?Zt(s.index,o):o);let C=Af(o,0,c,v),T=g.__ngNextListenerFn__;for(;T;)C=Af(o,0,T,v)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function am(s=1){return function Ya(s){return(R.lFrame.contextLView=function Dh(s,o){for(;s>0;)o=o[15],s--;return o}(s,R.lFrame.contextLView))[8]}(s)}function ql(s,o,u){return xf(s,"",o,"",u),ql}function xf(s,o,u,c,d){const g=Te(),v=Aa(g,o,u,c);return v!==$t&&Ki(_t(),kn(),g,s,v,g[11],d,!1),xf}function TI(s,o,u,c,d){const g=s[u+1],v=null===o;let I=c?ls(g):Da(g),C=!1;for(;0!==I&&(!1===C||v);){const A=s[I+1];MS(s[I],o)&&(C=!0,s[I+1]=c?B_(A):$g(A)),I=c?ls(A):Da(A)}C&&(s[u+1]=c?$g(g):B_(g))}function MS(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&iu(s,o)>=0}function Rf(s,o){return function Ps(s,o,u,c){const d=Te(),g=_t(),v=No(2);g.firstUpdatePass&&function PI(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[Ir()],v=function OI(s,o){return o>=s.expandoStartIndex}(s,u);(function VI(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function FS(s,o,u,c){const d=function tl(s){const o=R.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Ad(u=Nf(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=Nf(d,s,o,u,c),null===g){let C=function LS(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Da(c))return s[ls(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Nf(null,s,o,C[1],c),C=Ad(C,o.attrs,c),function kI(s,o,u,c){s[ls(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else g=function cm(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Ad(c,s[g].hostAttrs,u);return Ad(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function AS(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,I=ls(v),C=Da(v);s[c]=u;let A,T=!1;if(Array.isArray(u)){const F=u;A=F[1],(null===A||iu(F,A)>0)&&(T=!0)}else A=u;if(d)if(0!==C){const q=ls(s[I+1]);s[c+1]=Eu(q,I),0!==q&&(s[q+1]=U_(s[q+1],c)),s[I+1]=function Qr(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=Eu(I,0),0!==I&&(s[I+1]=U_(s[I+1],c)),I=c;else s[c+1]=Eu(C,0),0===I?I=c:s[C+1]=U_(s[C+1],c),C=c;T&&(s[c+1]=$g(s[c+1])),TI(s,A,c,!0),TI(s,A,c,!1),function xS(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&iu(g,o)>=0&&(u[c+1]=B_(u[c+1]))}(o,A,s,c,g),v=Eu(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==$t&&Tr(d,v,o)&&function FI(s,o,u,c,d,g,v,I){if(!(3&o.type))return;const C=s.data,T=C[I+1];dm(function GE(s){return 1==(1&s)}(T)?LI(C,o,u,d,Da(T),v):void 0)||(dm(g)||function V_(s){return 2==(2&s)}(T)&&(g=LI(C,null,u,d,I,v)),function N_(s,o,u,c,d){if(o)d?s.addClass(u,c):s.removeClass(u,c);else{let g=-1===c.indexOf("-")?void 0:Yo.DashCase;null==d?s.removeStyle(u,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Yo.Important),s.setStyle(u,c,d,g))}}(c,v,$s(Ir(),u),d,g))}(g,g.data[Ir()],d,d[11],s,d[v+1]=function US(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ge(Wi(s)))),s}(o,u),c,v)}(s,o,null,!0),Rf}function Nf(s,o,u,c,d){let g=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(g=o[I],c=Ad(c,g.hostAttrs,d),g!==s);)I++;return null!==s&&(u.directiveStylingLast=I),c}function Ad(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),it(s,v,!!u||o[++g]))}return void 0===s?null:s}function LI(s,o,u,c,d,g){const v=null===o;let I;for(;d>0;){const C=s[d],T=Array.isArray(C),A=T?C[1]:C,F=null===A;let q=u[d+1];q===$t&&(q=F?Tt:void 0);let te=F?Uh(q,c):A===c?q:void 0;if(T&&!dm(te)&&(te=Uh(C,c)),dm(te)&&(I=te,v))return I;const Se=s[d+1];d=v?ls(Se):Da(Se)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=Uh(C,c))}return I}function dm(s){return void 0!==s}function UI(s,o=""){const u=Te(),c=_t(),d=s+22,g=c.firstCreatePass?bu(c,d,1,o,null):c.data[d],v=u[d]=function b_(s,o){return s.createText(o)}(u[11],o);hf(c,u,v,g),Fr(g,!1)}function Av(s){return Of("",s,""),Av}function Of(s,o,u){const c=Te(),d=Aa(c,s,o,u);return d!==$t&&Sa(c,Ir(),d),Of}function xv(s,o,u,c,d){const g=Te(),v=_d(g,s,o,u,c,d);return v!==$t&&Sa(g,Ir(),v),xv}const Zl=void 0;var JI=["en",[["a","p"],["AM","PM"],Zl],[["AM","PM"],Zl,Zl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zl,"{1} 'at' {0}",Zl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Md(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Yl={};function Ql(s){const o=function Lf(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=mm(o);if(u)return u;const c=o.split("-")[0];if(u=mm(c),u)return u;if("en"===c)return JI;throw new be(701,!1)}function gm(s){return Ql(s)[xt.PluralCase]}function mm(s){return s in Yl||(Yl[s]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[s]),Yl[s]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const Rd="en-US";let eC=Rd;function bm(s,o,u,c,d){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)bm(s[g],o,u,c,d);else{const g=_t(),v=Te();let I=Ms(s)?s:J(s.provide),C=zo(s);const T=On(),A=1048575&T.providerIndexes,F=T.directiveStart,q=T.providerIndexes>>20;if(Ms(s)||!s.multi){const te=new Po(C,d,Ri),Se=ia(I,o,d?A:A+q,F);-1===Se?(Ja(fl(T,v),g,I),yi(g,s,o.length),o.push(I),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),u.push(te),v.push(te)):(u[Se]=te,v[Se]=te)}else{const te=ia(I,o,A+q,F),Se=ia(I,o,A,A+q),je=te>=0&&u[te],Qe=Se>=0&&u[Se];if(d&&!Qe||!d&&!je){Ja(fl(T,v),g,I);const dt=function _C(s,o,u,c,d){const g=new Po(s,u,Ri);return g.multi=[],g.index=o,g.componentProviders=0,Wf(g,d,c&&!u),g}(d?ks:Dm,u.length,d,c,C);!d&&Qe&&(u[Se].providerFactory=dt),yi(g,s,o.length,0),o.push(I),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),u.push(dt),v.push(dt)}else yi(g,s,te>-1?te:Se,Wf(u[d?Se:te],C,!d&&c));!d&&c&&Qe&&u[Se].componentProviders++}}}function yi(s,o,u,c){const d=Ms(o),g=function tf(s){return!!s.useClass}(o);if(d||g){const C=(g?J(o.useClass):o).prototype.ngOnDestroy;if(C){const T=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const A=T.indexOf(u);-1===A?T.push(u,[c,C]):T[A+1].push(c,C)}else T.push(u,C)}}}function Wf(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function ia(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function Dm(s,o,u,c){return Pa(this.multi,[])}function ks(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=pa(u,u[1],this.providerFactory.index,c);g=I.slice(0,v),Pa(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],Pa(d,g);return g}function Pa(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function iw(s,o=[]){return u=>{u.providersResolver=(c,d)=>function rw(s,o,u){const c=_t();if(c.firstCreatePass){const d=qr(s);bm(u,c.data,c.blueprint,d,!0),bm(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Fs{}class pA{}function gA(s,o){return new Tm(s,o??null)}class Tm extends Fs{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tm(this);const c=ot(o);this._bootstrapComponents=ba(c.bootstrap),this._r3Injector=pi(o,u,[{provide:Fs,useValue:this},{provide:_,useValue:this.componentFactoryResolver}],ge(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class sw extends pA{constructor(o){super(),this.moduleType=o}create(o){return new Tm(this.moduleType,o)}}class mA extends Fs{constructor(o,u,c){super(),this.componentFactoryResolver=new tm(this),this.instance=null;const d=new nf([...o,{provide:Fs,useValue:this},{provide:_,useValue:this.componentFactoryResolver}],u||fu(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function ow(s,o,u=null){return new mA(s,o,u).injector}let yA=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Zc(0,u.type),d=c.length>0?ow([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(Fn(ao))}),s})();function Ud(s){s.getStandaloneInjector=o=>o.get(yA).getOrCreateStandaloneInjector(s)}function xC(s){return o=>{setTimeout(s,void 0,o)}}const Eo=class LA extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let d=o,g=u||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=xC(g),d&&(d=xC(d)),v&&(v=xC(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof X.w0&&o.add(I),I}};function VA(){return this._results[Os()]()}class cw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Os(),c=cw.prototype;c[u]||(c[u]=VA)}get changes(){return this._changes||(this._changes=new Eo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=$n(o);(this._changesDetected=!function is(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Kf=(()=>{class s{}return s.__NG_ELEMENT_ID__=jA,s})();const UA=Kf,BA=class extends UA{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,d=ho(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),jl(c,d,o),new vf(d)}};function jA(){return xm(On(),Te())}function xm(s,o){return 4&s.type?new BA(o,s,m(s,o)):null}let Mm=(()=>{class s{}return s.__NG_ELEMENT_ID__=HA,s})();function HA(){return RC(On(),Te())}const MO=Mm,$A=class extends MO{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return m(this._hostTNode,this._hostLView)}get injector(){return new tu(this._hostTNode,this._hostLView)}get parentInjector(){const o=Tc(this._hostTNode,this._hostLView);if(Kp(o)){const u=dl(o,this._hostLView),c=ll(o);return new tu(u[1].data[c+8],u)}return new tu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=MC(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(u||{},g);return this.insert(v,d),v}createComponent(o,u,c,d,g){const v=o&&!function xi(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const F=u||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new pd(U(o)),T=c||this.parentInjector;if(!g&&null==C.ngModule){const q=(v?T:this.parentInjector).get(ao,null);q&&(g=q)}const A=C.create(T,d,void 0,g);return this.insert(A.hostView,I),A}insert(o,u){const c=o._lView,d=c[1];if(function el(s){return vr(s[3])}(c)){const A=this.indexOf(o);if(-1!==A)this.detach(A);else{const F=c[3],q=new $A(F,F[6],F[3]);q.detach(q.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function MT(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],wl(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function RT(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=64}(d,c,v,g);const I=M_(g,v),C=c[11],T=Dr(C,v[7]);return null!==T&&function fO(s,o,u,c,d,g){c[0]=d,c[6]=o,yu(s,c,u,1,d,g)}(d,v[6],C,c,T,I),o.attachToViewContainerRef(),wl(dw(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=MC(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Og(this._lContainer,u);c&&(Zr(dw(this._lContainer),u),Pg(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Og(this._lContainer,u);return c&&null!=Zr(dw(this._lContainer),u)?new vf(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function MC(s){return s[8]}function dw(s){return s[8]||(s[8]=[])}function RC(s,o){let u;const c=o[s.index];if(vr(c))u=c;else{let d;if(8&s.type)d=Hn(c);else{const g=o[11];d=g.createComment("");const v=ci(s,o);Vl(g,Dr(g,v),d,function FT(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=u=fI(c,o,d,s),Xg(o,u)}return new $A(u,s,o)}class hw{constructor(o){this.queryList=o,this.matches=null}clone(){return new hw(this.queryList)}setDirty(){this.queryList.setDirty()}}class fw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new fw(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==YA(o,u).matches&&this.queries[u].setDirty()}}class ka{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Br{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Br(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Oi{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Oi(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,Zf(u,g)),this.matchTNodeWithReadOption(o,u,eu(u,o,g,!1,!1))}else c===Kf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,eu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===E||d===Mm||d===Kf&&4&u.type)this.addMatch(u.index,-2);else{const g=eu(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function Zf(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function zA(s,o,u,c){return-1===u?function WA(s,o){return 11&s.type?m(s,o):4&s.type?xm(s,o):null}(o,s):-2===u?function qA(s,o,u){return u===E?m(o,s):u===Kf?xm(o,s):u===Mm?RC(o,s):void 0}(s,o,c):pa(s,s[1],u,o)}function OC(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,v=u.matches,I=[];for(let C=0;C<v.length;C+=2){const T=v[C];I.push(T<0?null:zA(o,g[T],v[C+1],u.metadata.read))}d.matches=I}return d.matches}function Hd(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=OC(s,o,d,u);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const T=g[I+1],A=o[-C];for(let F=10;F<A.length;F++){const q=A[F];q[17]===q[3]&&Hd(q[1],q,T,c)}if(null!==A[9]){const F=A[9];for(let q=0;q<F.length;q++){const te=F[q];Hd(te[1],te,T,c)}}}}}return c}function PC(s){const o=Te(),u=_t(),c=Ly();nl(c+1);const d=YA(u,c);if(s.dirty&&vc(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Hd(u,o,c,[]):OC(u,o,d,c);s.reset(g,S),s.notifyOnChanges()}return!0}return!1}function pw(s,o,u,c){const d=_t();if(d.firstCreatePass){const g=On();(function Yf(s,o,u){null===s.queries&&(s.queries=new Br),s.queries.track(new Oi(o,u))})(d,new ka(o,u,c),g.index),function ZA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Rm(s,o,u){const c=new cw(4==(4&u));J_(s,o,c,c.destroy),null===o[19]&&(o[19]=new fw),o[19].queries.push(new hw(c))}(d,Te(),u)}function gw(){return function mw(s,o){return s[19].queries[o].queryList}(Te(),Ly())}function YA(s,o){return s.queries.getByIndex(o)}function tp(...s){}const ib=new xn("Application Initializer");let Fm=(()=>{class s{constructor(u){this.appInits=u,this.resolve=tp,this.reject=tp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(gv(g))u.push(g);else if(DI(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Fn(ib,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const sb=new xn("AppId",{providedIn:"root",factory:function np(){return`${rp()}${rp()}${rp()}`}});function rp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Lm=new xn("Platform Initializer"),ab=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ub=new xn("appBootstrapListener");let lb=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Vm=new xn("LocaleId",{providedIn:"root",factory:()=>ei(Vm,Ye.Optional|Ye.SkipSelf)||function cx(){return typeof $localize<"u"&&$localize.locale||Rd}()}),dx=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hx{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let fx=(()=>{class s{compileModuleSync(u){return new sw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=ba(ot(u).declarations).reduce((v,I)=>{const C=U(I);return C&&v.push(new pd(C)),v},[]);return new hx(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const gx=(()=>Promise.resolve(0))();function Bm(s){typeof Zone>"u"?gx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class hs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Eo(!1),this.onMicrotaskEmpty=new Eo(!1),this.onStable=new Eo(!1),this.onError=new Eo(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function db(){let s=Nt.requestAnimationFrame,o=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function mx(s){const o=()=>{!function $O(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Nt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,fb(s),s.isCheckStableRunning=!0,jm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),fb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,I)=>{try{return yx(s),u.invokeTask(d,g,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Hm(s)}},onInvoke:(u,c,d,g,v,I,C)=>{try{return yx(s),u.invoke(d,g,v,I,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Hm(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,fb(s),jm(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new be(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,hb,tp,tp);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const hb={};function jm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function fb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function yx(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Hm(s){s._nesting--,jm(s)}class GO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Eo,this.onMicrotaskEmpty=new Eo,this.onStable=new Eo,this.onError=new Eo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}const pb=new xn(""),bw=new xn("");let Wd,_x=(()=>{class s{constructor(u,c,d){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Wd||(function Tw(s){Wd=s}(d),d.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),Bm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bm(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Fn(hs),Fn(Dw),Fn(bw))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Dw=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Wd?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Jl=null;const $m=new xn("AllowMultipleToken"),gb=new xn("PlatformDestroyListeners");class qO{constructor(o,u){this.name=o,this.token=u}}function Ix(s,o,u=[]){const c=`Platform: ${o}`,d=new xn(c);return(g=[])=>{let v=Sw();if(!v||v.injector.get($m,!1)){const I=[...u,...g,{provide:d,useValue:!0}];s?s(I):function KO(s){if(Jl&&!Jl.get($m,!1))throw new be(400,!1);Jl=s;const o=s.get(Gm);(function Ex(s){const o=s.get(Lm,null);o&&o.forEach(u=>u())})(s)}(function Cx(s=[],o){return id.create({name:o,providers:[{provide:oo,useValue:"platform"},{provide:gb,useValue:new Set([()=>Jl=null])},...s]})}(I,c))}return function ZO(s){const o=Sw();if(!o)throw new be(401,!1);return o}()}}function Sw(){return Jl?.get(Gm)??null}let Gm=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const d=function zm(s,o){let u;return u="noop"===s?new GO:("zone.js"===s?void 0:s)||new hs(o),u}(c?.ngZone,function Wm(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:hs,useValue:d}];return d.run(()=>{const v=id.create({providers:g,parent:this.injector,name:u.moduleType.name}),I=u.create(v),C=I.injector.get(bg,null);if(!C)throw new be(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:A=>{C.handleError(A)}});I.onDestroy(()=>{qd(this._modules,I),T.unsubscribe()})}),function qm(s,o,u){try{const c=u();return gv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,d,()=>{const T=I.injector.get(Fm);return T.runInitializers(),T.donePromise.then(()=>(function Uv(s){Rt(s,"Expected localeId to be defined"),"string"==typeof s&&(eC=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Vm,Rd)||Rd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,c=[]){const d=Km({},c);return function WO(s,o,u){const c=new sw(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(zd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new be(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(gb,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Fn(id))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Km(s,o){return Array.isArray(o)?o.reduce(Km,s):{...s,...o}}let zd=(()=>{class s{constructor(u,c,d){this._zone=u,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new L.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new L.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),Bm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),T.unsubscribe()}});this.isStable=(0,re.T)(g,v.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const d=u instanceof Qc;if(!this._injector.get(Fm).done)throw!d&&Ke(u),new be(405,false);let v;v=d?u:this._injector.get(_).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function vx(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Fs),T=v.create(id.NULL,[],c||v.selector,I),A=T.location.nativeElement,F=T.injector.get(pb,null);return F?.registerApplication(A),T.onDestroy(()=>{this.detachView(T.hostView),qd(this.components,T),F?.unregisterApplication(A)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;qd(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ub,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>qd(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new be(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Fn(hs),Fn(ao),Fn(bg))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function qd(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let mb=!0,yb=!1;function _b(){return yb=!0,mb}function vb(){if(yb)throw new Error("Cannot enable prod mode after platform setup.");mb=!1}let Tx=(()=>{class s{}return s.__NG_ELEMENT_ID__=wb,s})();function wb(s){return function Sx(s,o,u){if(vs(s)&&!u){const c=Zt(s.index,o);return new vf(c,c)}return 47&s.type?new vf(o[16],o):null}(On(),Te(),16==(16&s))}class Mw{constructor(){}supports(o){return md(o)}create(o){return new Fx(o)}}const kx=(s,o)=>o;class Fx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||kx}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<Va(c,d,g)?u:c,I=Va(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const T=I-d,A=C-d;if(T!=A){for(let q=0;q<T;q++){const te=q<g.length?g[q]:g[q]=0,Se=te+q;A<=Se&&Se<T&&(g[q]=te+1)}g[v.previousIndex]=A-T}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!md(o))throw new be(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,I)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,I),c=!0),u=u._next}else d=0,function CS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Os()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new Lx(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Db),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Db),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Lx{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xm{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Db{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Xm,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Va(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Rw{constructor(){}supports(o){return o instanceof Map||rm(o)}create(){return new _i}}class _i{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||rm(o)))throw new be(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new Uu(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class Uu{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tb(){return new Sb([new Mw])}let Sb=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Tb()),deps:[[s,new Uo,new cr]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new be(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Tb}),s})();function Nw(){return new ey([new Rw])}let ey=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Nw()),deps:[[s,new Uo,new cr]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new be(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Nw}),s})();const Mb=Ix(null,"core",[]);let ty=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Fn(zd))},s.\u0275mod=Ot({type:s}),s.\u0275inj=Et({}),s})();function Rb(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(pt,Re,P)=>{P.d(Re,{Z:()=>be});var p=P(2090),X=P(4859),L=P(9681),re=P(1877);class de{constructor(ye,le){this._delegate=ye,this.firebase=le,(0,L._addComponent)(ye,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(ye,le=L._DEFAULT_ENTRY_NAME){var lt;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(ye);return!rt.isInitialized()&&"EXPLICIT"===(null===(lt=rt.getComponent())||void 0===lt?void 0:lt.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:le})}_removeServiceInstance(ye,le=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(le)}_addComponent(ye){(0,L._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,L._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function he(){const Ze=function ge(Ze){const ye={},le={__esModule:!0,initializeApp:function Ne(Ve,j={}){const ve=L.initializeApp(Ve,j);if((0,p.r3)(ye,ve.name))return ye[ve.name];const Q=new Ze(ve,le);return ye[ve.name]=Q,Q},app:rt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function De(Ve){const j=Ve.name,ve=j.replace("-compat","");if(L._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Q=(ee=rt())=>{if("function"!=typeof ee[ve])throw oe.create("invalid-app-argument",{appName:j});return ee[ve]()};void 0!==Ve.serviceProps&&(0,p.ZB)(Q,Ve.serviceProps),le[ve]=Q,Ze.prototype[ve]=function(...ee){return this._getService.bind(this,j).apply(this,Ve.multipleInstances?ee:[])}}return"PUBLIC"===Ve.type?le[ve]:null},removeApp:function lt(Ve){delete ye[Ve]},useAsService:function Ge(Ve,j){return"serverAuth"===j?null:j},modularAPIs:L}};function rt(Ve){if(!(0,p.r3)(ye,Ve=Ve||L._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Ve});return ye[Ve]}return le.default=le,Object.defineProperty(le,"apps",{get:function we(){return Object.keys(ye).map(Ve=>ye[Ve])}}),rt.App=Ze,le}(de);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function ye(le){(0,p.ZB)(Ze,le)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),Ze}(),z=new re.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ze=self.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=$;!function Ce(Ze){(0,L.registerVersion)("@firebase/app-compat","0.1.38",Ze)}()},9681:(pt,Re,P)=>{P.r(Re),P.d(Re,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Gr,_DEFAULT_ENTRY_NAME:()=>Rt,_addComponent:()=>ln,_addOrOverwriteComponent:()=>nn,_apps:()=>un,_clearComponents:()=>$r,_components:()=>Rn,_getProvider:()=>Et,_registerComponent:()=>qn,_removeServiceInstance:()=>jt,deleteApp:()=>Di,getApp:()=>Nr,getApps:()=>Xn,initializeApp:()=>Jn,onLog:()=>li,registerVersion:()=>In,setLogLevel:()=>An});var p=P(5861),X=P(4859),L=P(1877),re=P(2090),de=P(8766);class fe{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function oe(Je){return"VERSION"===Je.getComponent()?.type}(tt)){const bt=tt.getImmediate();return`${bt.library}/${bt.version}`}return null}).filter(tt=>tt).join(" ")}}const ge="@firebase/app",$=new L.Yd("@firebase/app"),Rt="[DEFAULT]",ze={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,Rn=new Map;function ln(Je,Ae){try{Je.container.addComponent(Ae)}catch(tt){$.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Je.name}`,tt)}}function nn(Je,Ae){Je.container.addOrOverwriteComponent(Ae)}function qn(Je){const Ae=Je.name;if(Rn.has(Ae))return $.debug(`There were multiple attempts to register component ${Ae}.`),!1;Rn.set(Ae,Je);for(const tt of un.values())ln(tt,Je);return!0}function Et(Je,Ae){const tt=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),Je.container.getProvider(Ae)}function jt(Je,Ae,tt=Rt){Et(Je,Ae).clearInstance(tt)}function $r(){Rn.clear()}const gr=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class bn{constructor(Ae,tt,bt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=bt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}const Gr="9.13.0";function Jn(Je,Ae={}){let tt=Je;"object"!=typeof Ae&&(Ae={name:Ae});const bt=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},Ae),Dt=bt.name;if("string"!=typeof Dt||!Dt)throw gr.create("bad-app-name",{appName:String(Dt)});if(tt||(tt=(0,re.aH)()),!tt)throw gr.create("no-options");const Ot=un.get(Dt);if(Ot){if((0,re.vZ)(tt,Ot.options)&&(0,re.vZ)(bt,Ot.config))return Ot;throw gr.create("duplicate-app",{appName:Dt})}const H=new X.H0(Dt);for(const N of Rn.values())H.addComponent(N);const B=new bn(tt,bt,H);return un.set(Dt,B),B}function Nr(Je=Rt){const Ae=un.get(Je);if(!Ae&&Je===Rt)return Jn();if(!Ae)throw gr.create("no-app",{appName:Je});return Ae}function Xn(){return Array.from(un.values())}function Di(Je){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(Je){const Ae=Je.name;un.has(Ae)&&(un.delete(Ae),yield Promise.all(Je.container.getProviders().map(tt=>tt.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function In(Je,Ae,tt){var bt;let Dt=null!==(bt=ze[Je])&&void 0!==bt?bt:Je;tt&&(Dt+=`-${tt}`);const Ot=Dt.match(/\s|\//),H=Ae.match(/\s|\//);if(Ot||H){const B=[`Unable to register library "${Dt}" with version "${Ae}":`];return Ot&&B.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Ot&&H&&B.push("and"),H&&B.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void $.warn(B.join(" "))}qn(new X.wA(`${Dt}-version`,()=>({library:Dt,version:Ae}),"VERSION"))}function li(Je,Ae){if(null!==Je&&"function"!=typeof Je)throw gr.create("invalid-log-argument");(0,L.Am)(Je,Ae)}function An(Je){(0,L.Ub)(Je)}const Dn="firebase-heartbeat-store";let Pn=null;function on(){return Pn||(Pn=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Ae)=>{0===Ae&&Je.createObjectStore(Dn)}}).catch(Je=>{throw gr.create("idb-open",{originalErrorMessage:Je.message})})),Pn}function at(){return(at=(0,p.Z)(function*(Je){var Ae;try{return(yield on()).transaction(Dn).objectStore(Dn).get(Un(Je))}catch(tt){if(tt instanceof re.ZR)$.warn(tt.message);else{const bt=gr.create("idb-get",{originalErrorMessage:null===(Ae=tt)||void 0===Ae?void 0:Ae.message});$.warn(bt.message)}}})).apply(this,arguments)}function Nt(Je,Ae){return hn.apply(this,arguments)}function hn(){return(hn=(0,p.Z)(function*(Je,Ae){var tt;try{const Dt=(yield on()).transaction(Dn,"readwrite");return yield Dt.objectStore(Dn).put(Ae,Un(Je)),Dt.done}catch(bt){if(bt instanceof re.ZR)$.warn(bt.message);else{const Dt=gr.create("idb-set",{originalErrorMessage:null===(tt=bt)||void 0===tt?void 0:tt.message});$.warn(Dt.message)}}})).apply(this,arguments)}function Un(Je){return`${Je.name}!${Je.options.appId}`}class Wr{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Qt(tt),this._heartbeatsCachePromise=this._storage.read().then(bt=>(this._heartbeatsCache=bt,bt))}triggerHeartbeat(){var Ae=this;return(0,p.Z)(function*(){const bt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=Kt();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!Ae._heartbeatsCache.heartbeats.some(Ot=>Ot.date===Dt))return Ae._heartbeatsCache.heartbeats.push({date:Dt,agent:bt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Ot=>{const H=new Date(Ot.date).valueOf();return Date.now()-H<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,p.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const tt=Kt(),{heartbeatsToSend:bt,unsentEntries:Dt}=function mr(Je,Ae=1024){const tt=[];let bt=Je.slice();for(const Dt of Je){const Ot=tt.find(H=>H.agent===Dt.agent);if(Ot){if(Ot.dates.push(Dt.date),Bn(tt)>Ae){Ot.dates.pop();break}}else if(tt.push({agent:Dt.agent,dates:[Dt.date]}),Bn(tt)>Ae){tt.pop();break}bt=bt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:bt}}(Ae._heartbeatsCache.heartbeats),Ot=(0,re.L)(JSON.stringify({version:2,heartbeats:bt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=tt,Dt.length>0?(Ae._heartbeatsCache.heartbeats=Dt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Ot})()}}function Kt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,p.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function mt(Je){return at.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var tt=this;return(0,p.Z)(function*(){var bt;if(yield tt._canUseIndexedDBPromise){const Ot=yield tt.read();return Nt(tt.app,{lastSentHeartbeatDate:null!==(bt=Ae.lastSentHeartbeatDate)&&void 0!==bt?bt:Ot.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var tt=this;return(0,p.Z)(function*(){var bt;if(yield tt._canUseIndexedDBPromise){const Ot=yield tt.read();return Nt(tt.app,{lastSentHeartbeatDate:null!==(bt=Ae.lastSentHeartbeatDate)&&void 0!==bt?bt:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...Ae.heartbeats]})}})()}}function Bn(Je){return(0,re.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function Er(Je){qn(new X.wA("platform-logger",Ae=>new fe(Ae),"PRIVATE")),qn(new X.wA("heartbeat",Ae=>new Wr(Ae),"PRIVATE")),In(ge,"0.8.3",Je),In(ge,"0.8.3","esm2017"),In("fire-js","")}("")},4859:(pt,Re,P)=>{P.d(Re,{H0:()=>ge,wA:()=>L,zt:()=>de});var p=P(5861),X=P(2090);class L{constructor($,z,J){this.name=$,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const re="[DEFAULT]";class de{constructor($,z){this.name=$,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const z=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(z)){const J=new X.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:z});Oe&&J.resolve(Oe)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate($){var z;const J=this.normalizeInstanceIdentifier($?.identifier),Oe=null!==(z=$?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Ce){if(Oe)return null;throw Ce}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function oe(he){return"EAGER"===he.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(z);try{const Ce=this.getOrInitializeService({instanceIdentifier:Oe});J.resolve(Ce)}catch{}}}}clearInstance($=re){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,p.Z)(function*(){const z=Array.from($.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=re){return this.instances.has($)}getOptions($=re){return this.instancesOptions.get($)||{}}initialize($={}){const{options:z={}}=$,J=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[Ce,be]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Ce)&&be.resolve(Oe);return Oe}onInit($,z){var J;const Oe=this.normalizeInstanceIdentifier(z),Ce=null!==(J=this.onInitCallbacks.get(Oe))&&void 0!==J?J:new Set;Ce.add($),this.onInitCallbacks.set(Oe,Ce);const be=this.instances.get(Oe);return be&&$(be,Oe),()=>{Ce.delete($)}}invokeOnInitCallbacks($,z){const J=this.onInitCallbacks.get(z);if(J)for(const Oe of J)try{Oe($,z)}catch{}}getOrInitializeService({instanceIdentifier:$,options:z={}}){let J=this.instances.get($);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(he=$,he===re?void 0:he),options:z}),this.instances.set($,J),this.instancesOptions.set($,z),this.invokeOnInitCallbacks(J,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,J)}catch{}var he;return J||null}normalizeInstanceIdentifier($=re){return this.component?this.component.multipleInstances?$:re:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor($){this.name=$,this.providers=new Map}addComponent($){const z=this.getProvider($.name);if(z.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);z.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const z=new de($,this);return this.providers.set($,z),z}getProviders(){return Array.from(this.providers.values())}}},2833:(pt,Re,P)=>{var p=P(5861),X=P(9681),L=P(4859),re=P(2090),de=P(8766);const fe="@firebase/installations",oe="0.5.16",he=`w:${oe}`,$="FIS_v2",Ze=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(Y){return Y instanceof re.ZR&&Y.code.includes("request-failed")}function le({projectId:Y}){return`https://firebaseinstallations.googleapis.com/v1/projects/${Y}/installations`}function lt(Y){return{token:Y.token,requestStatus:2,expiresIn:j(Y.expiresIn),creationTime:Date.now()}}function rt(Y,_e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,p.Z)(function*(Y,_e){const ut=(yield _e.json()).error;return Ze.create("request-failed",{requestName:Y,serverCode:ut.code,serverMessage:ut.message,serverStatus:ut.status})})).apply(this,arguments)}function we({apiKey:Y}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Y})}function De(Y,{refreshToken:_e}){const Be=we(Y);return Be.append("Authorization",function ve(Y){return`${$} ${Y}`}(_e)),Be}function Ge(Y){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,p.Z)(function*(Y){const _e=yield Y();return _e.status>=500&&_e.status<600?Y():_e})).apply(this,arguments)}function j(Y){return Number(Y.replace("s","000"))}function Q(Y,_e){return ee.apply(this,arguments)}function ee(){return(ee=(0,p.Z)(function*({appConfig:Y,heartbeatServiceProvider:_e},{fid:Be}){const ut=le(Y),Ht=we(Y),rn=_e.getImmediate({optional:!0});if(rn){const yr=yield rn.getHeartbeatsHeader();yr&&Ht.append("x-firebase-client",yr)}const fn={method:"POST",headers:Ht,body:JSON.stringify({fid:Be,authVersion:$,appId:Y.appId,sdkVersion:he})},zr=yield Ge(()=>fetch(ut,fn));if(zr.ok){const yr=yield zr.json();return{fid:yr.fid||Be,registrationStatus:2,refreshToken:yr.refreshToken,authToken:lt(yr.authToken)}}throw yield rt("Create Installation",zr)})).apply(this,arguments)}function se(Y){return new Promise(_e=>{setTimeout(_e,Y)})}const He=/^[cdef][\w-]{21}$/;function ft(){try{const Y=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(Y),Y[0]=112+Y[0]%16;const Be=function Yt(Y){return function ne(Y){return btoa(String.fromCharCode(...Y)).replace(/\+/g,"-").replace(/\//g,"_")}(Y).substr(0,22)}(Y);return He.test(Be)?Be:""}catch{return""}}function Rt(Y){return`${Y.appName}!${Y.appId}`}const ze=new Map;function un(Y,_e){const Be=Rt(Y);nn(Be,_e),function qn(Y,_e){const Be=function jt(){return!Et&&"BroadcastChannel"in self&&(Et=new BroadcastChannel("[Firebase] FID Change"),Et.onmessage=Y=>{nn(Y.data.key,Y.data.fid)}),Et}();Be&&Be.postMessage({key:Y,fid:_e}),function $r(){0===ze.size&&Et&&(Et.close(),Et=null)}()}(Be,_e)}function nn(Y,_e){const Be=ze.get(Y);if(Be)for(const ut of Be)ut(_e)}let Et=null;const bn="firebase-installations-store";let Gr=null;function Jn(){return Gr||(Gr=(0,de.X3)("firebase-installations-database",1,{upgrade:(Y,_e)=>{0===_e&&Y.createObjectStore(bn)}})),Gr}function Nr(Y,_e){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,p.Z)(function*(Y,_e){const Be=Rt(Y),Ht=(yield Jn()).transaction(bn,"readwrite"),rn=Ht.objectStore(bn),jn=yield rn.get(Be);return yield rn.put(_e,Be),yield Ht.done,(!jn||jn.fid!==_e.fid)&&un(Y,_e.fid),_e})).apply(this,arguments)}function Di(Y){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(Y){const _e=Rt(Y),ut=(yield Jn()).transaction(bn,"readwrite");yield ut.objectStore(bn).delete(_e),yield ut.done})).apply(this,arguments)}function In(Y,_e){return li.apply(this,arguments)}function li(){return(li=(0,p.Z)(function*(Y,_e){const Be=Rt(Y),Ht=(yield Jn()).transaction(bn,"readwrite"),rn=Ht.objectStore(bn),jn=yield rn.get(Be),fn=_e(jn);return void 0===fn?yield rn.delete(Be):yield rn.put(fn,Be),yield Ht.done,fn&&(!jn||jn.fid!==fn.fid)&&un(Y,fn.fid),fn})).apply(this,arguments)}function An(Y){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(Y){let _e;const Be=yield In(Y.appConfig,ut=>{const Ht=Kn(ut),rn=Dn(Y,Ht);return _e=rn.registrationPromise,rn.installationEntry});return""===Be.fid?{installationEntry:yield _e}:{installationEntry:Be,registrationPromise:_e}})).apply(this,arguments)}function Kn(Y){return hn(Y||{fid:ft(),registrationStatus:0})}function Dn(Y,_e){if(0===_e.registrationStatus){if(!navigator.onLine)return{installationEntry:_e,registrationPromise:Promise.reject(Ze.create("app-offline"))};const Be={fid:_e.fid,registrationStatus:1,registrationTime:Date.now()},ut=function Pn(Y,_e){return on.apply(this,arguments)}(Y,Be);return{installationEntry:Be,registrationPromise:ut}}return 1===_e.registrationStatus?{installationEntry:_e,registrationPromise:mt(Y)}:{installationEntry:_e}}function on(){return(on=(0,p.Z)(function*(Y,_e){try{const Be=yield Q(Y,_e);return Nr(Y.appConfig,Be)}catch(Be){throw ye(Be)&&409===Be.customData.serverCode?yield Di(Y.appConfig):yield Nr(Y.appConfig,{fid:_e.fid,registrationStatus:0}),Be}})).apply(this,arguments)}function mt(Y){return at.apply(this,arguments)}function at(){return(at=(0,p.Z)(function*(Y){let _e=yield Nt(Y.appConfig);for(;1===_e.registrationStatus;)yield se(100),_e=yield Nt(Y.appConfig);if(0===_e.registrationStatus){const{installationEntry:Be,registrationPromise:ut}=yield An(Y);return ut||Be}return _e})).apply(this,arguments)}function Nt(Y){return In(Y,_e=>{if(!_e)throw Ze.create("installation-not-found");return hn(_e)})}function hn(Y){return function Un(Y){return 1===Y.registrationStatus&&Y.registrationTime+1e4<Date.now()}(Y)?{fid:Y.fid,registrationStatus:0}:Y}function or(Y,_e){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,p.Z)(function*({appConfig:Y,heartbeatServiceProvider:_e},Be){const ut=Wr(Y,Be),Ht=De(Y,Be),rn=_e.getImmediate({optional:!0});if(rn){const yr=yield rn.getHeartbeatsHeader();yr&&Ht.append("x-firebase-client",yr)}const fn={method:"POST",headers:Ht,body:JSON.stringify({installation:{sdkVersion:he,appId:Y.appId}})},zr=yield Ge(()=>fetch(ut,fn));if(zr.ok)return lt(yield zr.json());throw yield rt("Generate Auth Token",zr)})).apply(this,arguments)}function Wr(Y,{fid:_e}){return`${le(Y)}/${_e}/authTokens:generate`}function Kt(Y){return mr.apply(this,arguments)}function mr(){return(mr=(0,p.Z)(function*(Y,_e=!1){let Be;const ut=yield In(Y.appConfig,rn=>{if(!tt(rn))throw Ze.create("not-registered");const jn=rn.authToken;if(!_e&&bt(jn))return rn;if(1===jn.requestStatus)return Be=Qt(Y,_e),rn;{if(!navigator.onLine)throw Ze.create("app-offline");const fn=Ot(rn);return Be=Je(Y,fn),fn}});return Be?yield Be:ut.authToken})).apply(this,arguments)}function Qt(Y,_e){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,p.Z)(function*(Y,_e){let Be=yield Er(Y.appConfig);for(;1===Be.authToken.requestStatus;)yield se(100),Be=yield Er(Y.appConfig);const ut=Be.authToken;return 0===ut.requestStatus?Kt(Y,_e):ut})).apply(this,arguments)}function Er(Y){return In(Y,_e=>{if(!tt(_e))throw Ze.create("not-registered");return function H(Y){return 1===Y.requestStatus&&Y.requestTime+1e4<Date.now()}(_e.authToken)?Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}}):_e})}function Je(Y,_e){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,p.Z)(function*(Y,_e){try{const Be=yield or(Y,_e),ut=Object.assign(Object.assign({},_e),{authToken:Be});return yield Nr(Y.appConfig,ut),Be}catch(Be){if(!ye(Be)||401!==Be.customData.serverCode&&404!==Be.customData.serverCode){const ut=Object.assign(Object.assign({},_e),{authToken:{requestStatus:0}});yield Nr(Y.appConfig,ut)}else yield Di(Y.appConfig);throw Be}})).apply(this,arguments)}function tt(Y){return void 0!==Y&&2===Y.registrationStatus}function bt(Y){return 2===Y.requestStatus&&!function Dt(Y){const _e=Date.now();return _e<Y.creationTime||Y.creationTime+Y.expiresIn<_e+36e5}(Y)}function Ot(Y){const _e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},Y),{authToken:_e})}function N(){return(N=(0,p.Z)(function*(Y){const _e=Y,{installationEntry:Be,registrationPromise:ut}=yield An(_e);return ut?ut.catch(console.error):Kt(_e).catch(console.error),Be.fid})).apply(this,arguments)}function U(){return(U=(0,p.Z)(function*(Y,_e=!1){const Be=Y;return yield ie(Be),(yield Kt(Be,_e)).token})).apply(this,arguments)}function ie(Y){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,p.Z)(function*(Y){const{registrationPromise:_e}=yield An(Y);_e&&(yield _e)})).apply(this,arguments)}function cn(Y){return Ze.create("missing-app-config-values",{valueName:Y})}const Ti="installations",Ui=Y=>{const _e=Y.getProvider("app").getImmediate(),Be=function Nn(Y){if(!Y||!Y.options)throw cn("App Configuration");if(!Y.name)throw cn("App Name");const _e=["projectId","apiKey","appId"];for(const Be of _e)if(!Y.options[Be])throw cn(Be);return{appName:Y.name,projectId:Y.options.projectId,apiKey:Y.options.apiKey,appId:Y.options.appId}}(_e);return{app:_e,appConfig:Be,heartbeatServiceProvider:(0,X._getProvider)(_e,"heartbeat"),_delete:()=>Promise.resolve()}},es=Y=>{const _e=Y.getProvider("app").getImmediate(),Be=(0,X._getProvider)(_e,Ti).getImmediate();return{getId:()=>function B(Y){return N.apply(this,arguments)}(Be),getToken:Ht=>function G(Y){return U.apply(this,arguments)}(Be,Ht)}};(function Ft(){(0,X._registerComponent)(new L.wA(Ti,Ui,"PUBLIC")),(0,X._registerComponent)(new L.wA("installations-internal",es,"PRIVATE"))})(),(0,X.registerVersion)(fe,oe),(0,X.registerVersion)(fe,oe,"esm2017")},1877:(pt,Re,P)=>{P.d(Re,{Am:()=>he,Ub:()=>ge,Yd:()=>oe,in:()=>X});const p=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},re=X.INFO,de={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},fe=($,z,...J)=>{if(z<$.logLevel)return;const Oe=(new Date).toISOString(),Ce=de[z];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ce](`[${Oe}]  ${$.name}:`,...J)};class oe{constructor(z){this.name=z,this._logLevel=re,this._logHandler=fe,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in X))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?L[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...z),this._logHandler(this,X.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...z),this._logHandler(this,X.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,X.INFO,...z),this._logHandler(this,X.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,X.WARN,...z),this._logHandler(this,X.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...z),this._logHandler(this,X.ERROR,...z)}}function ge($){p.forEach(z=>{z.setLogLevel($)})}function he($,z){for(const J of p){let Oe=null;z&&z.level&&(Oe=L[z.level]),J.userLogHandler=null===$?null:(Ce,be,...Ze)=>{const ye=Ze.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch{return null}}).filter(le=>le).join(" ");be>=(Oe??Ce.logLevel)&&$({level:X[be].toLowerCase(),message:ye,args:Ze,type:Ce.name})}}}},8766:(pt,Re,P)=>{P.d(Re,{Lj:()=>Ne,X3:()=>rt});var p=P(5861);let L,re;const oe=new WeakMap,ge=new WeakMap,he=new WeakMap,$=new WeakMap,z=new WeakMap;let Ce={get(j,ve,Q){if(j instanceof IDBTransaction){if("done"===ve)return ge.get(j);if("objectStoreNames"===ve)return j.objectStoreNames||he.get(j);if("store"===ve)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return le(j[ve])},set:(j,ve,Q)=>(j[ve]=Q,!0),has:(j,ve)=>j instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in j};function ye(j){return"function"==typeof j?function Ze(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ve){return j.apply(lt(this),ve),le(oe.get(this))}:function(...ve){return le(j.apply(lt(this),ve))}:function(ve,...Q){const ee=j.call(lt(this),ve,...Q);return he.set(ee,ve.sort?ve.sort():[ve]),le(ee)}}(j):(j instanceof IDBTransaction&&function Oe(j){if(ge.has(j))return;const ve=new Promise((Q,ee)=>{const se=()=>{j.removeEventListener("complete",ne),j.removeEventListener("error",He),j.removeEventListener("abort",He)},ne=()=>{Q(),se()},He=()=>{ee(j.error||new DOMException("AbortError","AbortError")),se()};j.addEventListener("complete",ne),j.addEventListener("error",He),j.addEventListener("abort",He)});ge.set(j,ve)}(j),((j,ve)=>ve.some(Q=>j instanceof Q))(j,function de(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Ce):j)}function le(j){if(j instanceof IDBRequest)return function J(j){const ve=new Promise((Q,ee)=>{const se=()=>{j.removeEventListener("success",ne),j.removeEventListener("error",He)},ne=()=>{Q(le(j.result)),se()},He=()=>{ee(j.error),se()};j.addEventListener("success",ne),j.addEventListener("error",He)});return ve.then(Q=>{Q instanceof IDBCursor&&oe.set(Q,j)}).catch(()=>{}),z.set(ve,j),ve}(j);if($.has(j))return $.get(j);const ve=ye(j);return ve!==j&&($.set(j,ve),z.set(ve,j)),ve}const lt=j=>z.get(j);function rt(j,ve,{blocked:Q,upgrade:ee,blocking:se,terminated:ne}={}){const He=indexedDB.open(j,ve),Ue=le(He);return ee&&He.addEventListener("upgradeneeded",ft=>{ee(le(He.result),ft.oldVersion,ft.newVersion,le(He.transaction))}),Q&&He.addEventListener("blocked",()=>Q()),Ue.then(ft=>{ne&&ft.addEventListener("close",()=>ne()),se&&ft.addEventListener("versionchange",()=>se())}).catch(()=>{}),Ue}function Ne(j,{blocked:ve}={}){const Q=indexedDB.deleteDatabase(j);return ve&&Q.addEventListener("blocked",()=>ve()),le(Q).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ge=new Map;function Ve(j,ve){if(!(j instanceof IDBDatabase)||ve in j||"string"!=typeof ve)return;if(Ge.get(ve))return Ge.get(ve);const Q=ve.replace(/FromIndex$/,""),ee=ve!==Q,se=De.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!se&&!we.includes(Q))return;const ne=function(){var He=(0,p.Z)(function*(Ue,...ft){const Yt=this.transaction(Ue,se?"readwrite":"readonly");let Rt=Yt.store;return ee&&(Rt=Rt.index(ft.shift())),(yield Promise.all([Rt[Q](...ft),se&&Yt.done]))[0]});return function(ft){return He.apply(this,arguments)}}();return Ge.set(ve,ne),ne}!function be(j){Ce=j(Ce)}(j=>({...j,get:(ve,Q,ee)=>Ve(ve,Q)||j.get(ve,Q,ee),has:(ve,Q)=>!!Ve(ve,Q)||j.has(ve,Q)}))},5861:(pt,Re,P)=>{function p(L,re,de,fe,oe,ge,he){try{var $=L[ge](he),z=$.value}catch(J){return void de(J)}$.done?re(z):Promise.resolve(z).then(fe,oe)}function X(L){return function(){var re=this,de=arguments;return new Promise(function(fe,oe){var ge=L.apply(re,de);function he(z){p(ge,fe,oe,he,$,"next",z)}function $(z){p(ge,fe,oe,he,$,"throw",z)}he(void 0)})}}P.d(Re,{Z:()=>X})}},pt=>{pt(pt.s=7462)}]);